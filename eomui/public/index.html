<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EOMUI</title>
    <link rel="icon" href="favicon.svg">
    <link rel="apple-touch-icon" href="EOM_logo_192.png" sizes="192x192">
    <link rel="mask-icon" href="favicon.svg" color="#3a3a3a">
    <link rel="manifest" href="manifest.webmanifest" />
    <meta name="theme-color" content="#3a3a3a">
    <script type="module" crossorigin>(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))h(t);new MutationObserver(t=>{for(const l of t)if(l.type==="childList")for(const p of l.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&h(p)}).observe(document,{childList:!0,subtree:!0});function i(t){const l={};return t.integrity&&(l.integrity=t.integrity),t.referrerPolicy&&(l.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?l.credentials="include":t.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function h(t){if(t.ep)return;t.ep=!0;const l=i(t);fetch(t.href,l)}})();const dc=!1;var Ci=Array.isArray,kl=Array.prototype.indexOf,uo=Array.from,Ja=Object.defineProperty,hn=Object.getOwnPropertyDescriptor,Ul=Object.getOwnPropertyDescriptors,hc=Object.prototype,Wl=Array.prototype,co=Object.getPrototypeOf,jo=Object.isExtensible;const Hl=()=>{};function zl(r){for(var e=0;e<r.length;e++)r[e]()}function vc(){var r,e,i=new Promise((h,t)=>{r=h,e=t});return{promise:i,resolve:r,reject:e}}function Gl(r,e){if(Array.isArray(r))return r;if(!(Symbol.iterator in r))return Array.from(r);const i=[];for(const h of r)if(i.push(h),i.length===e)break;return i}const _t=2,lo=4,fo=8,an=16,_r=32,on=64,ho=128,Qt=256,wi=512,mt=1024,Wt=2048,Ir=4096,ar=8192,sn=16384,vo=32768,xi=65536,qo=1<<17,Kl=1<<18,bn=1<<19,Ql=1<<20,Xa=1<<21,po=1<<22,Zr=1<<23,Hn=Symbol("$state"),Yl=Symbol("legacy props"),Jl=Symbol(""),dn=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Xl(r){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Zl(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function ef(r){throw new Error("https://svelte.dev/e/effect_in_teardown")}function tf(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function rf(r){throw new Error("https://svelte.dev/e/effect_orphan")}function nf(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function af(r){throw new Error("https://svelte.dev/e/props_invalid_value")}function of(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function sf(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function uf(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function cf(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Di=1,Pi=2,pc=4,lf=8,ff=16,df=1,hf=4,vf=8,pf=16,mf=1,gf=2,lt=Symbol(),_f="http://www.w3.org/1999/xhtml";function yf(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let bf=!1;function mc(r){return r===this.v}function wf(r,e){return r!=r?e==e:r!==e||r!==null&&typeof r=="object"||typeof r=="function"}function gc(r){return!wf(r,this.v)}let Sf=!1;const Ef=[];function Xe(r,e=!1,i=!1){return yi(r,new Map,"",Ef,null,i)}function yi(r,e,i,h,t=null,l=!1){if(typeof r=="object"&&r!==null){var p=e.get(r);if(p!==void 0)return p;if(r instanceof Map)return new Map(r);if(r instanceof Set)return new Set(r);if(Ci(r)){var u=Array(r.length);e.set(r,u),t!==null&&e.set(t,u);for(var f=0;f<r.length;f+=1){var s=r[f];f in r&&(u[f]=yi(s,e,i,h,null,l))}return u}if(co(r)===hc){u={},e.set(r,u),t!==null&&e.set(t,u);for(var n in r)u[n]=yi(r[n],e,i,h,null,l);return u}if(r instanceof Date)return structuredClone(r);if(typeof r.toJSON=="function"&&!l)return yi(r.toJSON(),e,i,h,r)}if(r instanceof EventTarget)return r;try{return structuredClone(r)}catch{return r}}let Ht=null;function mn(r){Ht=r}function Mi(r,e=!1,i){Ht={p:Ht,c:null,e:null,s:r,x:null,l:null}}function Ii(r){var e=Ht,i=e.e;if(i!==null){e.e=null;for(var h of i)Ac(h)}return r!==void 0&&(e.x=r),Ht=e.p,r??{}}function _c(){return!0}let Xr=[];function yc(){var r=Xr;Xr=[],zl(r)}function tn(r){if(Xr.length===0&&!zn){var e=Xr;queueMicrotask(()=>{e===Xr&&yc()})}Xr.push(r)}function Cf(){for(;Xr.length>0;)yc()}const xf=new WeakMap;function bc(r){var e=Te;if(e===null)return Ae.f|=Zr,r;if((e.f&vo)===0){if((e.f&ho)===0)throw!e.parent&&r instanceof Error&&wc(r),r;e.b.error(r)}else gn(r,e)}function gn(r,e){for(;e!==null;){if((e.f&ho)!==0)try{e.b.error(r);return}catch(i){r=i}e=e.parent}throw r instanceof Error&&wc(r),r}function wc(r){const e=xf.get(r);e&&(Ja(r,"message",{value:e.message}),Ja(r,"stack",{value:e.stack}))}const ui=new Set;let Ze=null,bi=null,rr=null,Za=new Set,dr=[],Oi=null,eo=!1,zn=!1;class vr{current=new Map;#n=new Map;#t=new Set;#f=0;#a=null;#s=[];#i=[];#r=[];#e=[];#o=[];skipped_effects=new Set;process(e){dr=[],bi=null,this.apply();for(const l of e)this.#u(l);if(this.#f===0){var i=rr;this.#l();var h=this.#s,t=this.#i;this.#s=[],this.#i=[],this.#r=[],bi=this,Ze=null,rr=i,ko(h),ko(t),bi=null,this.#a?.resolve()}else this.#c(this.#s),this.#c(this.#i),this.#c(this.#r);rr=null}#u(e){e.f^=mt;for(var i=e.first;i!==null;){var h=i.f,t=(h&(_r|on))!==0,l=t&&(h&mt)!==0,p=l||(h&ar)!==0||this.skipped_effects.has(i);if(!p&&i.fn!==null){t?i.f^=mt:(h&lo)!==0?this.#i.push(i):Bi(i)&&((i.f&an)!==0&&this.#r.push(i),Ei(i));var u=i.first;if(u!==null){i=u;continue}}var f=i.parent;for(i=i.next;i===null&&f!==null;)i=f.next,f=f.parent}}#c(e){for(const i of e)((i.f&Wt)!==0?this.#e:this.#o).push(i),gt(i,mt);e.length=0}capture(e,i){this.#n.has(e)||this.#n.set(e,i),this.current.set(e,e.v),rr?.set(e,e.v)}activate(){Ze=this}deactivate(){Ze=null,rr=null}flush(){if(dr.length>0){if(this.activate(),Sc(),Ze!==null&&Ze!==this)return}else this.#f===0&&this.#l();this.deactivate();for(const e of Za)if(Za.delete(e),e(),Ze!==null)break}#l(){for(const e of this.#t)e();if(this.#t.clear(),ui.size>1){this.#n.clear();let e=!0;for(const i of ui){if(i===this){e=!1;continue}const h=[];for(const[l,p]of this.current){if(i.current.has(l))if(e&&p!==i.current.get(l))i.current.set(l,p);else continue;h.push(l)}if(h.length===0)continue;const t=[...i.current.keys()].filter(l=>!this.current.has(l));if(t.length>0){for(const l of h)Ec(l,t);if(dr.length>0){Ze=i,i.apply();for(const l of dr)i.#u(l);dr=[],i.deactivate()}}}Ze=null}ui.delete(this)}increment(){this.#f+=1}decrement(){this.#f-=1;for(const e of this.#e)gt(e,Wt),rn(e);for(const e of this.#o)gt(e,Ir),rn(e);this.flush()}add_callback(e){this.#t.add(e)}settled(){return(this.#a??=vc()).promise}static ensure(){if(Ze===null){const e=Ze=new vr;ui.add(Ze),zn||vr.enqueue(()=>{Ze===e&&e.flush()})}return Ze}static enqueue(e){tn(e)}apply(){}}function Df(r){var e=zn;zn=!0;try{for(var i;;){if(Cf(),dr.length===0&&(Ze?.flush(),dr.length===0))return Oi=null,i;Sc()}}finally{zn=e}}function Sc(){var r=pn;eo=!0;try{var e=0;for(Ho(!0);dr.length>0;){var i=vr.ensure();if(e++>1e3){var h,t;Pf()}i.process(dr),Mr.clear()}}finally{eo=!1,Ho(r),Oi=null}}function Pf(){try{nf()}catch(r){gn(r,Oi)}}let Jr=null;function ko(r){var e=r.length;if(e!==0){for(var i=0;i<e;){var h=r[i++];if((h.f&(sn|ar))===0&&Bi(h)&&(Jr=[],Ei(h),h.deps===null&&h.first===null&&h.nodes_start===null&&(h.teardown===null&&h.ac===null?Nc(h):h.fn=null),Jr?.length>0)){Mr.clear();for(const t of Jr)Ei(t);Jr=[]}}Jr=null}}function Ec(r,e){if(r.reactions!==null)for(const i of r.reactions){const h=i.f;(h&_t)!==0?Ec(i,e):(h&(po|an))!==0&&Cc(i,e)&&(gt(i,Wt),rn(i))}}function Cc(r,e){if(r.deps!==null){for(const i of r.deps)if(e.includes(i)||(i.f&_t)!==0&&Cc(i,e))return!0}return!1}function rn(r){for(var e=Oi=r;e.parent!==null;){e=e.parent;var i=e.f;if(eo&&e===Te&&(i&an)!==0)return;if((i&(on|_r))!==0){if((i&mt)===0)return;e.f^=mt}}dr.push(e)}function Mf(r){let e=0,i=nn(0),h;return()=>{Hf()&&(J(i),go(()=>(e===0&&(h=Sn(()=>r(()=>Gn(i)))),e+=1,()=>{tn(()=>{e-=1,e===0&&(h?.(),h=void 0,Gn(i))})})))}}var If=xi|bn|ho;function Of(r,e,i){new Rf(r,e,i)}class Rf{parent;#n=!1;#t;#f=null;#a;#s;#i;#r=null;#e=null;#o=null;#u=null;#c=0;#l=0;#h=!1;#d=null;#g=()=>{this.#d&&_n(this.#d,this.#c)};#_=Mf(()=>(this.#d=nn(this.#c),()=>{this.#d=null}));constructor(e,i,h){this.#t=e,this.#a=i,this.#s=h,this.parent=Te.b,this.#n=!!this.#a.pending,this.#i=_o(()=>{Te.b=this;{try{this.#r=tr(()=>h(this.#t))}catch(t){this.error(t)}this.#l>0?this.#p():this.#n=!1}},If)}#y(){try{this.#r=tr(()=>this.#s(this.#t))}catch(e){this.error(e)}this.#n=!1}#b(){const e=this.#a.pending;e&&(this.#e=tr(()=>e(this.#t)),vr.enqueue(()=>{this.#r=this.#v(()=>(vr.ensure(),tr(()=>this.#s(this.#t)))),this.#l>0?this.#p():(vn(this.#e,()=>{this.#e=null}),this.#n=!1)}))}is_pending(){return this.#n||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#a.pending}#v(e){var i=Te,h=Ae,t=Ht;pr(this.#i),bt(this.#i),mn(this.#i.ctx);try{return e()}catch(l){return bc(l),null}finally{pr(i),bt(h),mn(t)}}#p(){const e=this.#a.pending;this.#r!==null&&(this.#u=document.createDocumentFragment(),Lf(this.#r,this.#u)),this.#e===null&&(this.#e=tr(()=>e(this.#t)))}#m(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(e);return}this.#l+=e,this.#l===0&&(this.#n=!1,this.#e&&vn(this.#e,()=>{this.#e=null}),this.#u&&(this.#t.before(this.#u),this.#u=null),tn(()=>{vr.ensure().flush()}))}update_pending_count(e){this.#m(e),this.#c+=e,Za.add(this.#g)}get_effect_pending(){return this.#_(),J(this.#d)}error(e){var i=this.#a.onerror;let h=this.#a.failed;if(this.#h||!i&&!h)throw e;this.#r&&(Yt(this.#r),this.#r=null),this.#e&&(Yt(this.#e),this.#e=null),this.#o&&(Yt(this.#o),this.#o=null);var t=!1,l=!1;const p=()=>{if(t){yf();return}t=!0,l&&cf(),vr.ensure(),this.#c=0,this.#o!==null&&vn(this.#o,()=>{this.#o=null}),this.#n=this.has_pending_snippet(),this.#r=this.#v(()=>(this.#h=!1,tr(()=>this.#s(this.#t)))),this.#l>0?this.#p():this.#n=!1};var u=Ae;try{bt(null),l=!0,i?.(e,p),l=!1}catch(f){gn(f,this.#i&&this.#i.parent)}finally{bt(u)}h&&tn(()=>{this.#o=this.#v(()=>{this.#h=!0;try{return tr(()=>{h(this.#t,()=>e,()=>p)})}catch(f){return gn(f,this.#i.parent),null}finally{this.#h=!1}})})}}function Lf(r,e){for(var i=r.nodes_start,h=r.nodes_end;i!==null;){var t=i===h?null:Jn(i);e.append(i),i=t}}function Bf(r,e,i){const h=Ri;if(e.length===0){i(r.map(h));return}var t=Ze,l=Te,p=Af();Promise.all(e.map(u=>Ff(u))).then(u=>{p();try{i([...r.map(h),...u])}catch(f){(l.f&sn)===0&&gn(f,l)}t?.deactivate(),to()}).catch(u=>{gn(u,l)})}function Af(){var r=Te,e=Ae,i=Ht,h=Ze;return function(){pr(r),bt(e),mn(i),h?.activate()}}function to(){pr(null),bt(null),mn(null)}function Ri(r){var e=_t|Wt,i=Ae!==null&&(Ae.f&_t)!==0?Ae:null;return Te===null||i!==null&&(i.f&Qt)!==0?e|=Qt:Te.f|=bn,{ctx:Ht,deps:null,effects:null,equals:mc,f:e,fn:r,reactions:null,rv:0,v:lt,wv:0,parent:i??Te,ac:null}}function Ff(r,e){let i=Te;i===null&&Zl();var h=i.b,t=void 0,l=nn(lt),p=!Ae,u=new Map;return Kf(()=>{var f=vc();t=f.promise;try{Promise.resolve(r()).then(f.resolve,f.reject).then(to)}catch(d){f.reject(d),to()}var s=Ze,n=h.is_pending();p&&(h.update_pending_count(1),n||(s.increment(),u.get(s)?.reject(dn),u.delete(s),u.set(s,f)));const c=(d,o=void 0)=>{if(n||s.activate(),o)o!==dn&&(l.f|=Zr,_n(l,o));else{(l.f&Zr)!==0&&(l.f^=Zr),_n(l,d);for(const[a,m]of u){if(u.delete(a),a===s)break;m.reject(dn)}}p&&(h.update_pending_count(-1),n||s.decrement())};f.promise.then(c,d=>c(null,d||"unknown"))}),Bc(()=>{for(const f of u.values())f.reject(dn)}),new Promise(f=>{function s(n){function c(){n===t?f(l):s(t)}n.then(c,c)}s(t)})}function Tf(r){const e=Ri(r);return qc(e),e}function xc(r){const e=Ri(r);return e.equals=gc,e}function Dc(r){var e=r.effects;if(e!==null){r.effects=null;for(var i=0;i<e.length;i+=1)Yt(e[i])}}function $f(r){for(var e=r.parent;e!==null;){if((e.f&_t)===0)return e;e=e.parent}return null}function mo(r){var e,i=Te;pr($f(r));try{Dc(r),e=Hc(r)}finally{pr(i)}return e}function Pc(r){var e=mo(r);if(r.equals(e)||(r.v=e,r.wv=Uc()),!un)if(rr!==null)rr.set(r,r.v);else{var i=(Pr||(r.f&Qt)!==0)&&r.deps!==null?Ir:mt;gt(r,i)}}const Mr=new Map;function nn(r,e){var i={f:0,v:r,reactions:null,equals:mc,rv:0,wv:0};return i}function Ge(r,e){const i=nn(r);return qc(i),i}function Nf(r,e=!1,i=!0){const h=nn(r);return e||(h.equals=gc),h}function be(r,e,i=!1){Ae!==null&&(!nr||(Ae.f&qo)!==0)&&_c()&&(Ae.f&(_t|an|po|qo))!==0&&!gr?.includes(r)&&uf();let h=i?ir(e):e;return _n(r,h)}function _n(r,e){if(!r.equals(e)){var i=r.v;un?Mr.set(r,e):Mr.set(r,i),r.v=e;var h=vr.ensure();h.capture(r,i),(r.f&_t)!==0&&((r.f&Wt)!==0&&mo(r),gt(r,(r.f&Qt)===0?mt:Ir)),r.wv=Uc(),Mc(r,Wt),Te!==null&&(Te.f&mt)!==0&&(Te.f&(_r|on))===0&&(Kt===null?Jf([r]):Kt.push(r))}return e}function Gn(r){be(r,r.v+1)}function Mc(r,e){var i=r.reactions;if(i!==null)for(var h=i.length,t=0;t<h;t++){var l=i[t],p=l.f,u=(p&Wt)===0;u&&gt(l,e),(p&_t)!==0?Mc(l,Ir):u&&((p&an)!==0&&Jr!==null&&Jr.push(l),rn(l))}}function ir(r){if(typeof r!="object"||r===null||Hn in r)return r;const e=co(r);if(e!==hc&&e!==Wl)return r;var i=new Map,h=Ci(r),t=Ge(0),l=en,p=u=>{if(en===l)return u();var f=Ae,s=en;bt(null),Go(l);var n=u();return bt(f),Go(s),n};return h&&i.set("length",Ge(r.length)),new Proxy(r,{defineProperty(u,f,s){(!("value"in s)||s.configurable===!1||s.enumerable===!1||s.writable===!1)&&of();var n=i.get(f);return n===void 0?n=p(()=>{var c=Ge(s.value);return i.set(f,c),c}):be(n,s.value,!0),!0},deleteProperty(u,f){var s=i.get(f);if(s===void 0){if(f in u){const n=p(()=>Ge(lt));i.set(f,n),Gn(t)}}else be(s,lt),Gn(t);return!0},get(u,f,s){if(f===Hn)return r;var n=i.get(f),c=f in u;if(n===void 0&&(!c||hn(u,f)?.writable)&&(n=p(()=>{var o=ir(c?u[f]:lt),a=Ge(o);return a}),i.set(f,n)),n!==void 0){var d=J(n);return d===lt?void 0:d}return Reflect.get(u,f,s)},getOwnPropertyDescriptor(u,f){var s=Reflect.getOwnPropertyDescriptor(u,f);if(s&&"value"in s){var n=i.get(f);n&&(s.value=J(n))}else if(s===void 0){var c=i.get(f),d=c?.v;if(c!==void 0&&d!==lt)return{enumerable:!0,configurable:!0,value:d,writable:!0}}return s},has(u,f){if(f===Hn)return!0;var s=i.get(f),n=s!==void 0&&s.v!==lt||Reflect.has(u,f);if(s!==void 0||Te!==null&&(!n||hn(u,f)?.writable)){s===void 0&&(s=p(()=>{var d=n?ir(u[f]):lt,o=Ge(d);return o}),i.set(f,s));var c=J(s);if(c===lt)return!1}return n},set(u,f,s,n){var c=i.get(f),d=f in u;if(h&&f==="length")for(var o=s;o<c.v;o+=1){var a=i.get(o+"");a!==void 0?be(a,lt):o in u&&(a=p(()=>Ge(lt)),i.set(o+"",a))}if(c===void 0)(!d||hn(u,f)?.writable)&&(c=p(()=>Ge(void 0)),be(c,ir(s)),i.set(f,c));else{d=c.v!==lt;var m=p(()=>ir(s));be(c,m)}var _=Reflect.getOwnPropertyDescriptor(u,f);if(_?.set&&_.set.call(n,s),!d){if(h&&typeof f=="string"){var w=i.get("length"),S=Number(f);Number.isInteger(S)&&S>=w.v&&be(w,S+1)}Gn(t)}return!0},ownKeys(u){J(t);var f=Reflect.ownKeys(u).filter(c=>{var d=i.get(c);return d===void 0||d.v!==lt});for(var[s,n]of i)n.v!==lt&&!(s in u)&&f.push(s);return f},setPrototypeOf(){sf()}})}var Uo,Ic,Oc,Rc;function Vf(){if(Uo===void 0){Uo=window,Ic=/Firefox/.test(navigator.userAgent);var r=Element.prototype,e=Node.prototype,i=Text.prototype;Oc=hn(e,"firstChild").get,Rc=hn(e,"nextSibling").get,jo(r)&&(r.__click=void 0,r.__className=void 0,r.__attributes=null,r.__style=void 0,r.__e=void 0),jo(i)&&(i.__t=void 0)}}function wn(r=""){return document.createTextNode(r)}function yn(r){return Oc.call(r)}function Jn(r){return Rc.call(r)}function fe(r,e){return yn(r)}function In(r,e=!1){{var i=yn(r);return i instanceof Comment&&i.data===""?Jn(i):i}}function se(r,e=1,i=!1){let h=r;for(;e--;)h=Jn(h);return h}function jf(r){r.textContent=""}function Lc(){return!1}let Wo=!1;function qf(){Wo||(Wo=!0,document.addEventListener("reset",r=>{Promise.resolve().then(()=>{if(!r.defaultPrevented)for(const e of r.target.elements)e.__on_r?.()})},{capture:!0}))}function Li(r){var e=Ae,i=Te;bt(null),pr(null);try{return r()}finally{bt(e),pr(i)}}function kf(r,e,i,h=i){r.addEventListener(e,()=>Li(i));const t=r.__on_r;t?r.__on_r=()=>{t(),h(!0)}:r.__on_r=()=>h(!0),qf()}function Uf(r){Te===null&&Ae===null&&rf(),Ae!==null&&(Ae.f&Qt)!==0&&Te===null&&tf(),un&&ef()}function Wf(r,e){var i=e.last;i===null?e.last=e.first=r:(i.next=r,r.prev=i,e.last=r)}function yr(r,e,i,h=!0){var t=Te;t!==null&&(t.f&ar)!==0&&(r|=ar);var l={ctx:Ht,deps:null,nodes_start:null,nodes_end:null,f:r|Wt,first:null,fn:e,last:null,next:null,parent:t,b:t&&t.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(i)try{Ei(l),l.f|=vo}catch(f){throw Yt(l),f}else e!==null&&rn(l);if(h){var p=l;if(i&&p.deps===null&&p.teardown===null&&p.nodes_start===null&&p.first===p.last&&(p.f&bn)===0&&(p=p.first),p!==null&&(p.parent=t,t!==null&&Wf(p,t),Ae!==null&&(Ae.f&_t)!==0&&(r&on)===0)){var u=Ae;(u.effects??=[]).push(p)}}return l}function Hf(){return Ae!==null&&!nr}function Bc(r){const e=yr(fo,null,!1);return gt(e,mt),e.teardown=r,e}function zf(r){Uf();var e=Te.f,i=!Ae&&(e&_r)!==0&&(e&vo)===0;if(i){var h=Ht;(h.e??=[]).push(r)}else return Ac(r)}function Ac(r){return yr(lo|Ql,r,!1)}function Gf(r){vr.ensure();const e=yr(on|bn,r,!0);return(i={})=>new Promise(h=>{i.outro?vn(e,()=>{Yt(e),h(void 0)}):(Yt(e),h(void 0))})}function Fc(r){return yr(lo,r,!1)}function Kf(r){return yr(po|bn,r,!0)}function go(r,e=0){return yr(fo|e,r,!0)}function Dr(r,e=[],i=[]){Bf(e,i,h=>{yr(fo,()=>r(...h.map(J)),!0)})}function _o(r,e=0){var i=yr(an|e,r,!0);return i}function tr(r,e=!0){return yr(_r|bn,r,!0,e)}function Tc(r){var e=r.teardown;if(e!==null){const i=un,h=Ae;zo(!0),bt(null);try{e.call(null)}finally{zo(i),bt(h)}}}function $c(r,e=!1){var i=r.first;for(r.first=r.last=null;i!==null;){const t=i.ac;t!==null&&Li(()=>{t.abort(dn)});var h=i.next;(i.f&on)!==0?i.parent=null:Yt(i,e),i=h}}function Qf(r){for(var e=r.first;e!==null;){var i=e.next;(e.f&_r)===0&&Yt(e),e=i}}function Yt(r,e=!0){var i=!1;(e||(r.f&Kl)!==0)&&r.nodes_start!==null&&r.nodes_end!==null&&(Yf(r.nodes_start,r.nodes_end),i=!0),$c(r,e&&!i),Si(r,0),gt(r,sn);var h=r.transitions;if(h!==null)for(const l of h)l.stop();Tc(r);var t=r.parent;t!==null&&t.first!==null&&Nc(r),r.next=r.prev=r.teardown=r.ctx=r.deps=r.fn=r.nodes_start=r.nodes_end=r.ac=null}function Yf(r,e){for(;r!==null;){var i=r===e?null:Jn(r);r.remove(),r=i}}function Nc(r){var e=r.parent,i=r.prev,h=r.next;i!==null&&(i.next=h),h!==null&&(h.prev=i),e!==null&&(e.first===r&&(e.first=h),e.last===r&&(e.last=i))}function vn(r,e){var i=[];yo(r,i,!0),Vc(i,()=>{Yt(r),e&&e()})}function Vc(r,e){var i=r.length;if(i>0){var h=()=>--i||e();for(var t of r)t.out(h)}else e()}function yo(r,e,i){if((r.f&ar)===0){if(r.f^=ar,r.transitions!==null)for(const p of r.transitions)(p.is_global||i)&&e.push(p);for(var h=r.first;h!==null;){var t=h.next,l=(h.f&xi)!==0||(h.f&_r)!==0;yo(h,e,l?i:!1),h=t}}}function bo(r){jc(r,!0)}function jc(r,e){if((r.f&ar)!==0){r.f^=ar,(r.f&mt)===0&&(gt(r,Wt),rn(r));for(var i=r.first;i!==null;){var h=i.next,t=(i.f&xi)!==0||(i.f&_r)!==0;jc(i,t?e:!1),i=h}if(r.transitions!==null)for(const l of r.transitions)(l.is_global||e)&&l.in()}}let pn=!1;function Ho(r){pn=r}let un=!1;function zo(r){un=r}let Ae=null,nr=!1;function bt(r){Ae=r}let Te=null;function pr(r){Te=r}let gr=null;function qc(r){Ae!==null&&(gr===null?gr=[r]:gr.push(r))}let pt=null,Ut=0,Kt=null;function Jf(r){Kt=r}let kc=1,Kn=0,en=Kn;function Go(r){en=r}let Pr=!1;function Uc(){return++kc}function Bi(r){var e=r.f;if((e&Wt)!==0)return!0;if((e&Ir)!==0){var i=r.deps,h=(e&Qt)!==0;if(i!==null){var t,l,p=(e&wi)!==0,u=h&&Te!==null&&!Pr,f=i.length;if((p||u)&&(Te===null||(Te.f&sn)===0)){var s=r,n=s.parent;for(t=0;t<f;t++)l=i[t],(p||!l?.reactions?.includes(s))&&(l.reactions??=[]).push(s);p&&(s.f^=wi),u&&n!==null&&(n.f&Qt)===0&&(s.f^=Qt)}for(t=0;t<f;t++)if(l=i[t],Bi(l)&&Pc(l),l.wv>r.wv)return!0}(!h||Te!==null&&!Pr)&&gt(r,mt)}return!1}function Wc(r,e,i=!0){var h=r.reactions;if(h!==null&&!gr?.includes(r))for(var t=0;t<h.length;t++){var l=h[t];(l.f&_t)!==0?Wc(l,e,!1):e===l&&(i?gt(l,Wt):(l.f&mt)!==0&&gt(l,Ir),rn(l))}}function Hc(r){var e=pt,i=Ut,h=Kt,t=Ae,l=Pr,p=gr,u=Ht,f=nr,s=en,n=r.f;pt=null,Ut=0,Kt=null,Pr=(n&Qt)!==0&&(nr||!pn||Ae===null),Ae=(n&(_r|on))===0?r:null,gr=null,mn(r.ctx),nr=!1,en=++Kn,r.ac!==null&&(Li(()=>{r.ac.abort(dn)}),r.ac=null);try{r.f|=Xa;var c=r.fn,d=c(),o=r.deps;if(pt!==null){var a;if(Si(r,Ut),o!==null&&Ut>0)for(o.length=Ut+pt.length,a=0;a<pt.length;a++)o[Ut+a]=pt[a];else r.deps=o=pt;if(!Pr||(n&_t)!==0&&r.reactions!==null)for(a=Ut;a<o.length;a++)(o[a].reactions??=[]).push(r)}else o!==null&&Ut<o.length&&(Si(r,Ut),o.length=Ut);if(_c()&&Kt!==null&&!nr&&o!==null&&(r.f&(_t|Ir|Wt))===0)for(a=0;a<Kt.length;a++)Wc(Kt[a],r);return t!==null&&t!==r&&(Kn++,Kt!==null&&(h===null?h=Kt:h.push(...Kt))),(r.f&Zr)!==0&&(r.f^=Zr),d}catch(m){return bc(m)}finally{r.f^=Xa,pt=e,Ut=i,Kt=h,Ae=t,Pr=l,gr=p,mn(u),nr=f,en=s}}function Xf(r,e){let i=e.reactions;if(i!==null){var h=kl.call(i,r);if(h!==-1){var t=i.length-1;t===0?i=e.reactions=null:(i[h]=i[t],i.pop())}}i===null&&(e.f&_t)!==0&&(pt===null||!pt.includes(e))&&(gt(e,Ir),(e.f&(Qt|wi))===0&&(e.f^=wi),Dc(e),Si(e,0))}function Si(r,e){var i=r.deps;if(i!==null)for(var h=e;h<i.length;h++)Xf(r,i[h])}function Ei(r){var e=r.f;if((e&sn)===0){gt(r,mt);var i=Te,h=pn;Te=r,pn=!0;try{(e&an)!==0?Qf(r):$c(r),Tc(r);var t=Hc(r);r.teardown=typeof t=="function"?t:null,r.wv=kc;var l;dc&&Sf&&(r.f&Wt)!==0&&r.deps}finally{pn=h,Te=i}}}async function Zf(){await Promise.resolve(),Df()}function J(r){var e=r.f,i=(e&_t)!==0;if(Ae!==null&&!nr){var h=Te!==null&&(Te.f&sn)!==0;if(!h&&!gr?.includes(r)){var t=Ae.deps;if((Ae.f&Xa)!==0)r.rv<Kn&&(r.rv=Kn,pt===null&&t!==null&&t[Ut]===r?Ut++:pt===null?pt=[r]:(!Pr||!pt.includes(r))&&pt.push(r));else{(Ae.deps??=[]).push(r);var l=r.reactions;l===null?r.reactions=[Ae]:l.includes(Ae)||l.push(Ae)}}}else if(i&&r.deps===null&&r.effects===null){var p=r,u=p.parent;u!==null&&(u.f&Qt)===0&&(p.f^=Qt)}if(un){if(Mr.has(r))return Mr.get(r);if(i){p=r;var f=p.v;return((p.f&mt)===0&&p.reactions!==null||zc(p))&&(f=mo(p)),Mr.set(p,f),f}}else if(i){if(p=r,rr?.has(p))return rr.get(p);Bi(p)&&Pc(p)}if(rr?.has(r))return rr.get(r);if((r.f&Zr)!==0)throw r.v;return r.v}function zc(r){if(r.v===lt)return!0;if(r.deps===null)return!1;for(const e of r.deps)if(Mr.has(e)||(e.f&_t)!==0&&zc(e))return!0;return!1}function Sn(r){var e=nr;try{return nr=!0,r()}finally{nr=e}}const ed=-7169;function gt(r,e){r.f=r.f&ed|e}const td=["touchstart","touchmove"];function rd(r){return td.includes(r)}const Gc=new Set,ro=new Set;function nd(r,e,i,h={}){function t(l){if(h.capture||jn.call(e,l),!l.cancelBubble)return Li(()=>i?.call(this,l))}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?tn(()=>{e.addEventListener(r,t,h)}):e.addEventListener(r,t,h),t}function On(r,e,i,h,t){var l={capture:h,passive:t},p=nd(r,e,i,l);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Bc(()=>{e.removeEventListener(r,p,l)})}function wo(r){for(var e=0;e<r.length;e++)Gc.add(r[e]);for(var i of ro)i(r)}let Ko=null;function jn(r){var e=this,i=e.ownerDocument,h=r.type,t=r.composedPath?.()||[],l=t[0]||r.target;Ko=r;var p=0,u=Ko===r&&r.__root;if(u){var f=t.indexOf(u);if(f!==-1&&(e===document||e===window)){r.__root=e;return}var s=t.indexOf(e);if(s===-1)return;f<=s&&(p=f)}if(l=t[p]||r.target,l!==e){Ja(r,"currentTarget",{configurable:!0,get(){return l||i}});var n=Ae,c=Te;bt(null),pr(null);try{for(var d,o=[];l!==null;){var a=l.assignedSlot||l.parentNode||l.host||null;try{var m=l["__"+h];if(m!=null&&(!l.disabled||r.target===l))if(Ci(m)){var[_,...w]=m;_.apply(l,[r,...w])}else m.call(l,r)}catch(S){d?o.push(S):d=S}if(r.cancelBubble||a===e||a===null)break;l=a}if(d){for(let S of o)queueMicrotask(()=>{throw S});throw d}}finally{r.__root=e,delete r.currentTarget,bt(n),pr(c)}}}function Kc(r){var e=document.createElement("template");return e.innerHTML=r.replaceAll("<!>","\x3C!---->"),e.content}function Qn(r,e){var i=Te;i.nodes_start===null&&(i.nodes_start=r,i.nodes_end=e)}function wt(r,e){var i=(e&mf)!==0,h=(e&gf)!==0,t,l=!r.startsWith("<!>");return()=>{t===void 0&&(t=Kc(l?r:"<!>"+r),i||(t=yn(t)));var p=h||Ic?document.importNode(t,!0):t.cloneNode(!0);if(i){var u=yn(p),f=p.lastChild;Qn(u,f)}else Qn(p,p);return p}}function id(r,e,i="svg"){var h=!r.startsWith("<!>"),t=`<${i}>${h?r:"<!>"+r}</${i}>`,l;return()=>{if(!l){var p=Kc(t),u=yn(p);l=yn(u)}var f=l.cloneNode(!0);return Qn(f,f),f}}function So(r,e){return id(r,e,"svg")}function ad(r=""){{var e=wn(r+"");return Qn(e,e),e}}function Qo(){var r=document.createDocumentFragment(),e=document.createComment(""),i=wn();return r.append(e,i),Qn(e,i),r}function st(r,e){r!==null&&r.before(e)}function ft(r,e){var i=e==null?"":typeof e=="object"?e+"":e;i!==(r.__t??=r.nodeValue)&&(r.__t=i,r.nodeValue=i+"")}function od(r,e){return sd(r,e)}const fn=new Map;function sd(r,{target:e,anchor:i,props:h={},events:t,context:l,intro:p=!0}){Vf();var u=new Set,f=c=>{for(var d=0;d<c.length;d++){var o=c[d];if(!u.has(o)){u.add(o);var a=rd(o);e.addEventListener(o,jn,{passive:a});var m=fn.get(o);m===void 0?(document.addEventListener(o,jn,{passive:a}),fn.set(o,1)):fn.set(o,m+1)}}};f(uo(Gc)),ro.add(f);var s=void 0,n=Gf(()=>{var c=i??e.appendChild(wn());return Of(c,{pending:()=>{}},d=>{if(l){Mi({});var o=Ht;o.c=l}t&&(h.$$events=t),s=r(d,h)||{},l&&Ii()}),()=>{for(var d of u){e.removeEventListener(d,jn);var o=fn.get(d);--o===0?(document.removeEventListener(d,jn),fn.delete(d)):fn.set(d,o)}ro.delete(f),c!==i&&c.parentNode?.removeChild(c)}});return ud.set(s,n),s}let ud=new WeakMap;function hr(r,e,i=!1){var h=r,t=null,l=null,p=lt,u=i?xi:0,f=!1;const s=(o,a=!0)=>{f=!0,d(a,o)};var n=null;function c(){n!==null&&(n.lastChild.remove(),h.before(n),n=null);var o=p?t:l,a=p?l:t;o&&bo(o),a&&vn(a,()=>{p?l=null:t=null})}const d=(o,a)=>{if(p!==(p=o)){var m=Lc(),_=h;if(m&&(n=document.createDocumentFragment(),n.append(_=wn())),p?t??=a&&tr(()=>a(_)):l??=a&&tr(()=>a(_)),m){var w=Ze,S=p?t:l,C=p?l:t;S&&w.skipped_effects.delete(S),C&&w.skipped_effects.add(C),w.add_callback(c)}else c()}};_o(()=>{f=!1,e(s),f||d(null,null)},u)}function qn(r,e){return e}function cd(r,e,i){for(var h=r.items,t=[],l=e.length,p=0;p<l;p++)yo(e[p].e,t,!0);var u=l>0&&t.length===0&&i!==null;if(u){var f=i.parentNode;jf(f),f.append(i),h.clear(),fr(r,e[0].prev,e[l-1].next)}Vc(t,()=>{for(var s=0;s<l;s++){var n=e[s];u||(h.delete(n.k),fr(r,n.prev,n.next)),Yt(n.e,!u)}})}function kn(r,e,i,h,t,l=null){var p=r,u={flags:e,items:new Map,first:null},f=(e&pc)!==0;if(f){var s=r;p=s.appendChild(wn())}var n=null,c=!1,d=new Map,o=xc(()=>{var w=i();return Ci(w)?w:w==null?[]:uo(w)}),a,m;function _(){ld(m,a,u,d,p,t,e,h,i),l!==null&&(a.length===0?n?bo(n):n=tr(()=>l(p)):n!==null&&vn(n,()=>{n=null}))}_o(()=>{m??=Te,a=J(o);var w=a.length;if(!(c&&w===0)){c=w===0;var S,C,b,E;if(Lc()){var x=new Set,P=Ze;for(C=0;C<w;C+=1){b=a[C],E=h(b,C);var R=u.items.get(E)??d.get(E);R?(e&(Di|Pi))!==0&&Qc(R,b,C,e):(S=Yc(null,u,null,null,b,E,C,t,e,i,!0),d.set(E,S)),x.add(E)}for(const[F,O]of u.items)x.has(F)||P.skipped_effects.add(O.e);P.add_callback(_)}else _();J(o)}})}function ld(r,e,i,h,t,l,p,u,f){var s=(p&lf)!==0,n=(p&(Di|Pi))!==0,c=e.length,d=i.items,o=i.first,a=o,m,_=null,w,S=[],C=[],b,E,x,P;if(s)for(P=0;P<c;P+=1)b=e[P],E=u(b,P),x=d.get(E),x!==void 0&&(x.a?.measure(),(w??=new Set).add(x));for(P=0;P<c;P+=1){if(b=e[P],E=u(b,P),x=d.get(E),x===void 0){var R=h.get(E);if(R!==void 0){h.delete(E),d.set(E,R);var F=_?_.next:a;fr(i,_,R),fr(i,R,F),Hi(R,F,t),_=R}else{var O=a?a.e.nodes_start:t;_=Yc(O,i,_,_===null?i.first:_.next,b,E,P,l,p,f)}d.set(E,_),S=[],C=[],a=_.next;continue}if(n&&Qc(x,b,P,p),(x.e.f&ar)!==0&&(bo(x.e),s&&(x.a?.unfix(),(w??=new Set).delete(x))),x!==a){if(m!==void 0&&m.has(x)){if(S.length<C.length){var T=C[0],j;_=T.prev;var G=S[0],k=S[S.length-1];for(j=0;j<S.length;j+=1)Hi(S[j],T,t);for(j=0;j<C.length;j+=1)m.delete(C[j]);fr(i,G.prev,k.next),fr(i,_,G),fr(i,k,T),a=T,_=k,P-=1,S=[],C=[]}else m.delete(x),Hi(x,a,t),fr(i,x.prev,x.next),fr(i,x,_===null?i.first:_.next),fr(i,_,x),_=x;continue}for(S=[],C=[];a!==null&&a.k!==E;)(a.e.f&ar)===0&&(m??=new Set).add(a),C.push(a),a=a.next;if(a===null)continue;x=a}S.push(x),_=x,a=x.next}if(a!==null||m!==void 0){for(var Z=m===void 0?[]:uo(m);a!==null;)(a.e.f&ar)===0&&Z.push(a),a=a.next;var ae=Z.length;if(ae>0){var ne=(p&pc)!==0&&c===0?t:null;if(s){for(P=0;P<ae;P+=1)Z[P].a?.measure();for(P=0;P<ae;P+=1)Z[P].a?.fix()}cd(i,Z,ne)}}s&&tn(()=>{if(w!==void 0)for(x of w)x.a?.apply()}),r.first=i.first&&i.first.e,r.last=_&&_.e;for(var oe of h.values())Yt(oe.e);h.clear()}function Qc(r,e,i,h){(h&Di)!==0&&_n(r.v,e),(h&Pi)!==0?_n(r.i,i):r.i=i}function Yc(r,e,i,h,t,l,p,u,f,s,n){var c=(f&Di)!==0,d=(f&ff)===0,o=c?d?Nf(t,!1,!1):nn(t):t,a=(f&Pi)===0?p:nn(p),m={i:a,v:o,k:l,a:null,e:null,prev:i,next:h};try{if(r===null){var _=document.createDocumentFragment();_.append(r=wn())}return m.e=tr(()=>u(r,o,a,s),bf),m.e.prev=i&&i.e,m.e.next=h&&h.e,i===null?n||(e.first=m):(i.next=m,i.e.next=m.e),h!==null&&(h.prev=m,h.e.prev=m.e),m}finally{}}function Hi(r,e,i){for(var h=r.next?r.next.e.nodes_start:i,t=e?e.e.nodes_start:i,l=r.e.nodes_start;l!==null&&l!==h;){var p=Jn(l);t.before(l),l=p}}function fr(r,e,i){e===null?r.first=i:(e.next=i,e.e.next=i&&i.e),i!==null&&(i.prev=e,i.e.prev=e&&e.e)}function fd(r,e,i){Fc(()=>{var h=Sn(()=>e(r,i?.())||{});if(h?.destroy)return()=>h.destroy()})}function Jc(r){var e,i,h="";if(typeof r=="string"||typeof r=="number")h+=r;else if(typeof r=="object")if(Array.isArray(r)){var t=r.length;for(e=0;e<t;e++)r[e]&&(i=Jc(r[e]))&&(h&&(h+=" "),h+=i)}else for(i in r)r[i]&&(h&&(h+=" "),h+=i);return h}function dd(){for(var r,e,i=0,h="",t=arguments.length;i<t;i++)(r=arguments[i])&&(e=Jc(r))&&(h&&(h+=" "),h+=e);return h}function Et(r){return typeof r=="object"?dd(r):r??""}const Yo=[...` 	
\r\fÂ \v\uFEFF`];function hd(r,e,i){var h=r==null?"":""+r;if(e&&(h=h?h+" "+e:e),i){for(var t in i)if(i[t])h=h?h+" "+t:t;else if(h.length)for(var l=t.length,p=0;(p=h.indexOf(t,p))>=0;){var u=p+l;(p===0||Yo.includes(h[p-1]))&&(u===h.length||Yo.includes(h[u]))?h=(p===0?"":h.substring(0,p))+h.substring(u+1):p=u}}return h===""?null:h}function vd(r,e){return r==null?null:String(r)}function yt(r,e,i,h,t,l){var p=r.__className;if(p!==i||p===void 0){var u=hd(i,h,l);u==null?r.removeAttribute("class"):e?r.className=u:r.setAttribute("class",u),r.__className=i}else if(l&&t!==l)for(var f in l){var s=!!l[f];(t==null||s!==!!t[f])&&r.classList.toggle(f,s)}return l}function Ar(r,e,i,h){var t=r.__style;if(t!==e){var l=vd(e);l==null?r.removeAttribute("style"):r.style.cssText=l,r.__style=e}return h}const pd=Symbol("is custom element"),md=Symbol("is html");function zi(r,e){var i=Eo(r);i.value===(i.value=e??void 0)||r.value===e&&(e!==0||r.nodeName!=="PROGRESS")||(r.value=e??"")}function no(r,e){var i=Eo(r);i.checked!==(i.checked=e??void 0)&&(r.checked=e)}function qe(r,e,i,h){var t=Eo(r);t[e]!==(t[e]=i)&&(e==="loading"&&(r[Jl]=i),i==null?r.removeAttribute(e):typeof i!="string"&&gd(r).includes(e)?r[e]=i:r.setAttribute(e,i))}function Eo(r){return r.__attributes??={[pd]:r.nodeName.includes("-"),[md]:r.namespaceURI===_f}}var Jo=new Map;function gd(r){var e=r.getAttribute("is")||r.nodeName,i=Jo.get(e);if(i)return i;Jo.set(e,i=[]);for(var h,t=r,l=Element.prototype;l!==t;){h=Ul(t);for(var p in h)h[p].set&&i.push(p);t=co(t)}return i}function Gi(r,e,i=e){var h=new WeakSet;kf(r,"input",async t=>{var l=t?r.defaultValue:r.value;if(l=Ki(r)?Qi(l):l,i(l),Ze!==null&&h.add(Ze),await Zf(),l!==(l=e())){var p=r.selectionStart,u=r.selectionEnd,f=r.value.length;if(r.value=l??"",u!==null){var s=r.value.length;p===u&&u===f&&s>f?(r.selectionStart=s,r.selectionEnd=s):(r.selectionStart=p,r.selectionEnd=Math.min(u,s))}}}),Sn(e)==null&&r.value&&(i(Ki(r)?Qi(r.value):r.value),Ze!==null&&h.add(Ze)),go(()=>{var t=e();if(r===document.activeElement){var l=bi??Ze;if(h.has(l))return}Ki(r)&&t===Qi(r.value)||r.type==="date"&&!t&&!r.value||t!==r.value&&(r.value=t??"")})}function Ki(r){var e=r.type;return e==="number"||e==="range"}function Qi(r){return r===""?null:+r}function Xo(r,e){return r===e||r?.[Hn]===e}function Rn(r={},e,i,h){return Fc(()=>{var t,l;return go(()=>{t=l,l=[],Sn(()=>{r!==i(...l)&&(e(r,...l),t&&Xo(i(...t),r)&&e(null,...t))})}),()=>{tn(()=>{l&&Xo(i(...l),r)&&e(null,...l)})}}),r}let ci=!1;function _d(r){var e=ci;try{return ci=!1,[r(),ci]}finally{ci=e}}function Xc(r,e,i,h){var t=(i&vf)!==0,l=(i&pf)!==0,p=h,u=!0,f=()=>(u&&(u=!1,p=l?Sn(h):h),p),s;if(t){var n=Hn in r||Yl in r;s=hn(r,e)?.set??(n&&e in r?S=>r[e]=S:void 0)}var c,d=!1;t?[c,d]=_d(()=>r[e]):c=r[e],c===void 0&&h!==void 0&&(c=f(),s&&(af(),s(c)));var o;if(o=()=>{var S=r[e];return S===void 0?f():(u=!0,S)},(i&hf)===0)return o;if(s){var a=r.$$legacy;return(function(S,C){return arguments.length>0?((!C||a||d)&&s(C?o():S),S):o()})}var m=!1,_=((i&df)!==0?Ri:xc)(()=>(m=!1,o()));t&&J(_);var w=Te;return(function(S,C){if(arguments.length>0){const b=C?J(_):t?ir(S):S;return be(_,b),m=!0,p!==void 0&&(p=b),S}return un&&m||(w.f&sn)!==0?_.v:J(_)})}function io(r){Ht===null&&Xl(),zf(()=>{const e=Sn(r);if(typeof e=="function")return e})}const yd="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(yd);var bd=(r,e,i,h)=>e()?i():h(),wd=wt('<p style="font-size: small;">Currently this only supports off-brand lights using the LotusLampX app <a target="_blank" href="https://www.amazon.com/dp/B0CCBH8R6K">like this strip.</a></p>'),Sd=wt('<div class="bluetooth-led-control svelte-1oqb8um"><div><button> </button> <span> </span></div> <!></div>');function Ed(r,e){Mi(e,!0);let i=Ge(null),h=Ge(null),t=Xc(e,"BTLEDconnected",15,!1),l=Ge("Disconnected");async function p(){try{if(be(l,"Connecting..."),be(i,await navigator.bluetooth.requestDevice({optionalServices:[65520],filters:[{namePrefix:"ELK-"}]}),!0),!J(i)?.gatt)throw new Error("GATT not available");const C=await J(i).gatt.connect();be(l,"Getting service...");const b=await C.getPrimaryService(65520);be(h,await b.getCharacteristic(65523),!0),t(!0),be(l,"Connected"),J(i).addEventListener("gattserverdisconnected",()=>{t(!1),be(l,"Disconnected"),be(h,null)})}catch(C){console.error("Bluetooth connection failed:",C),be(l,`Error: ${C instanceof Error?C.message:String(C)}`),t(!1),be(h,null)}}async function u(){J(i)?.gatt?.connected&&J(i).gatt.disconnect(),be(i,null),be(h,null),t(!1),be(l,"Disconnected")}async function f(C,b,E){if(!J(h))throw new Error("Not connected to Bluetooth device");C=Math.max(0,Math.min(255,Math.floor(C))),b=Math.max(0,Math.min(255,Math.floor(b))),E=Math.max(0,Math.min(255,Math.floor(E)));const x=new Uint8Array([126,7,5,3,C,b,E,16,239]);try{await J(h).writeValue(x),console.log(`Wrote RGB: ${C}, ${b}, ${E}`)}catch(P){throw console.error("Failed to write RGB value:",P),P}}var s={writeRGB:f},n=Sd(),c=fe(n),d=fe(c);d.__click=[bd,t,u,p];var o=fe(d),a=se(d,2);let m;var _=fe(a),w=se(c,2);{var S=C=>{var b=wd();st(C,b)};hr(w,C=>{t()||C(S)})}return Dr(C=>{ft(o,t()?"Disconnect":"Connect to a light"),m=yt(a,1,"bluetooth-led-status svelte-1oqb8um",null,m,C),ft(_,J(l))},[()=>({BTLEDconnected:t()})]),st(r,n),Ii(s)}wo(["click"]);var Fr={},Ct={},Yi={},li={exports:{}},Zo;function St(){if(Zo)return li.exports;Zo=1;var r=typeof Reflect=="object"?Reflect:null,e=r&&typeof r.apply=="function"?r.apply:function(E,x,P){return Function.prototype.apply.call(E,x,P)},i;r&&typeof r.ownKeys=="function"?i=r.ownKeys:Object.getOwnPropertySymbols?i=function(E){return Object.getOwnPropertyNames(E).concat(Object.getOwnPropertySymbols(E))}:i=function(E){return Object.getOwnPropertyNames(E)};function h(b){console&&console.warn&&console.warn(b)}var t=Number.isNaN||function(E){return E!==E};function l(){l.init.call(this)}li.exports=l,li.exports.once=w,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var p=10;function u(b){if(typeof b!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof b)}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return p},set:function(b){if(typeof b!="number"||b<0||t(b))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+b+".");p=b}}),l.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(E){if(typeof E!="number"||E<0||t(E))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+E+".");return this._maxListeners=E,this};function f(b){return b._maxListeners===void 0?l.defaultMaxListeners:b._maxListeners}l.prototype.getMaxListeners=function(){return f(this)},l.prototype.emit=function(E){for(var x=[],P=1;P<arguments.length;P++)x.push(arguments[P]);var R=E==="error",F=this._events;if(F!==void 0)R=R&&F.error===void 0;else if(!R)return!1;if(R){var O;if(x.length>0&&(O=x[0]),O instanceof Error)throw O;var T=new Error("Unhandled error."+(O?" ("+O.message+")":""));throw T.context=O,T}var j=F[E];if(j===void 0)return!1;if(typeof j=="function")e(j,this,x);else for(var G=j.length,k=a(j,G),P=0;P<G;++P)e(k[P],this,x);return!0};function s(b,E,x,P){var R,F,O;if(u(x),F=b._events,F===void 0?(F=b._events=Object.create(null),b._eventsCount=0):(F.newListener!==void 0&&(b.emit("newListener",E,x.listener?x.listener:x),F=b._events),O=F[E]),O===void 0)O=F[E]=x,++b._eventsCount;else if(typeof O=="function"?O=F[E]=P?[x,O]:[O,x]:P?O.unshift(x):O.push(x),R=f(b),R>0&&O.length>R&&!O.warned){O.warned=!0;var T=new Error("Possible EventEmitter memory leak detected. "+O.length+" "+String(E)+" listeners added. Use emitter.setMaxListeners() to increase limit");T.name="MaxListenersExceededWarning",T.emitter=b,T.type=E,T.count=O.length,h(T)}return b}l.prototype.addListener=function(E,x){return s(this,E,x,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(E,x){return s(this,E,x,!0)};function n(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(b,E,x){var P={fired:!1,wrapFn:void 0,target:b,type:E,listener:x},R=n.bind(P);return R.listener=x,P.wrapFn=R,R}l.prototype.once=function(E,x){return u(x),this.on(E,c(this,E,x)),this},l.prototype.prependOnceListener=function(E,x){return u(x),this.prependListener(E,c(this,E,x)),this},l.prototype.removeListener=function(E,x){var P,R,F,O,T;if(u(x),R=this._events,R===void 0)return this;if(P=R[E],P===void 0)return this;if(P===x||P.listener===x)--this._eventsCount===0?this._events=Object.create(null):(delete R[E],R.removeListener&&this.emit("removeListener",E,P.listener||x));else if(typeof P!="function"){for(F=-1,O=P.length-1;O>=0;O--)if(P[O]===x||P[O].listener===x){T=P[O].listener,F=O;break}if(F<0)return this;F===0?P.shift():m(P,F),P.length===1&&(R[E]=P[0]),R.removeListener!==void 0&&this.emit("removeListener",E,T||x)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(E){var x,P,R;if(P=this._events,P===void 0)return this;if(P.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):P[E]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete P[E]),this;if(arguments.length===0){var F=Object.keys(P),O;for(R=0;R<F.length;++R)O=F[R],O!=="removeListener"&&this.removeAllListeners(O);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(x=P[E],typeof x=="function")this.removeListener(E,x);else if(x!==void 0)for(R=x.length-1;R>=0;R--)this.removeListener(E,x[R]);return this};function d(b,E,x){var P=b._events;if(P===void 0)return[];var R=P[E];return R===void 0?[]:typeof R=="function"?x?[R.listener||R]:[R]:x?_(R):a(R,R.length)}l.prototype.listeners=function(E){return d(this,E,!0)},l.prototype.rawListeners=function(E){return d(this,E,!1)},l.listenerCount=function(b,E){return typeof b.listenerCount=="function"?b.listenerCount(E):o.call(b,E)},l.prototype.listenerCount=o;function o(b){var E=this._events;if(E!==void 0){var x=E[b];if(typeof x=="function")return 1;if(x!==void 0)return x.length}return 0}l.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};function a(b,E){for(var x=new Array(E),P=0;P<E;++P)x[P]=b[P];return x}function m(b,E){for(;E+1<b.length;E++)b[E]=b[E+1];b.pop()}function _(b){for(var E=new Array(b.length),x=0;x<E.length;++x)E[x]=b[x].listener||b[x];return E}function w(b,E){return new Promise(function(x,P){function R(O){b.removeListener(E,F),P(O)}function F(){typeof b.removeListener=="function"&&b.removeListener("error",R),x([].slice.call(arguments))}C(b,E,F,{once:!0}),E!=="error"&&S(b,R,{once:!0})})}function S(b,E,x){typeof b.on=="function"&&C(b,"error",E,x)}function C(b,E,x,P){if(typeof b.on=="function")P.once?b.once(E,x):b.on(E,x);else if(typeof b.addEventListener=="function")b.addEventListener(E,function R(F){P.once&&b.removeEventListener(E,R),x(F)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof b)}return li.exports}var es;function br(){return es||(es=1,(function(r){/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.ButtplugLogger=r.LogMessage=r.ButtplugLogLevel=void 0;const e=St();var i;(function(l){l[l.Off=0]="Off",l[l.Fatal=1]="Fatal",l[l.Error=2]="Error",l[l.Warn=3]="Warn",l[l.Info=4]="Info",l[l.Debug=5]="Debug",l[l.Trace=6]="Trace"})(i=r.ButtplugLogLevel||(r.ButtplugLogLevel={}));class h{constructor(p,u){const f=new Date,s=f.getHours(),n=f.getMinutes(),c=f.getSeconds();this.timestamp=`${s}:${n}:${c}`,this.logMessage=p,this.logLevel=u}get Message(){return this.logMessage}get LogLevel(){return this.logLevel}get Timestamp(){return this.timestamp}get FormattedMessage(){return`${i[this.logLevel]} : ${this.timestamp} : ${this.logMessage}`}}r.LogMessage=h;class t extends e.EventEmitter{constructor(){super(),this.maximumConsoleLogLevel=i.Off,this.maximumEventLogLevel=i.Off}static get Logger(){return t.sLogger===void 0&&(t.sLogger=new t),this.sLogger}get MaximumConsoleLogLevel(){return this.maximumConsoleLogLevel}set MaximumConsoleLogLevel(p){this.maximumConsoleLogLevel=p}get MaximumEventLogLevel(){return this.maximumEventLogLevel}set MaximumEventLogLevel(p){this.maximumEventLogLevel=p}Fatal(p){this.AddLogMessage(p,i.Fatal)}Error(p){this.AddLogMessage(p,i.Error)}Warn(p){this.AddLogMessage(p,i.Warn)}Info(p){this.AddLogMessage(p,i.Info)}Debug(p){this.AddLogMessage(p,i.Debug)}Trace(p){this.AddLogMessage(p,i.Trace)}AddLogMessage(p,u){if(u>this.maximumEventLogLevel&&u>this.maximumConsoleLogLevel)return;const f=new h(p,u);u<=this.maximumConsoleLogLevel&&console.log(f.FormattedMessage),u<=this.maximumEventLogLevel&&this.emit("log",f)}}r.ButtplugLogger=t,t.sLogger=void 0})(Yi)),Yi}var xt={},Ji={},Xi={},fi={},Zi={},di={},hi={},ts;function Cd(){if(ts)return hi;ts=1,Object.defineProperty(hi,"__esModule",{value:!0});var r=el(),e=(function(){function i(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}return i.prototype.addTypeMetadata=function(h){this._typeMetadatas.has(h.target)||this._typeMetadatas.set(h.target,new Map),this._typeMetadatas.get(h.target).set(h.propertyName,h)},i.prototype.addTransformMetadata=function(h){this._transformMetadatas.has(h.target)||this._transformMetadatas.set(h.target,new Map),this._transformMetadatas.get(h.target).has(h.propertyName)||this._transformMetadatas.get(h.target).set(h.propertyName,[]),this._transformMetadatas.get(h.target).get(h.propertyName).push(h)},i.prototype.addExposeMetadata=function(h){this._exposeMetadatas.has(h.target)||this._exposeMetadatas.set(h.target,new Map),this._exposeMetadatas.get(h.target).set(h.propertyName,h)},i.prototype.addExcludeMetadata=function(h){this._excludeMetadatas.has(h.target)||this._excludeMetadatas.set(h.target,new Map),this._excludeMetadatas.get(h.target).set(h.propertyName,h)},i.prototype.findTransformMetadatas=function(h,t,l){return this.findMetadatas(this._transformMetadatas,h,t).filter(function(p){return!p.options||p.options.toClassOnly===!0&&p.options.toPlainOnly===!0?!0:p.options.toClassOnly===!0?l===r.TransformationType.CLASS_TO_CLASS||l===r.TransformationType.PLAIN_TO_CLASS:p.options.toPlainOnly===!0?l===r.TransformationType.CLASS_TO_PLAIN:!0})},i.prototype.findExcludeMetadata=function(h,t){return this.findMetadata(this._excludeMetadatas,h,t)},i.prototype.findExposeMetadata=function(h,t){return this.findMetadata(this._exposeMetadatas,h,t)},i.prototype.findExposeMetadataByCustomName=function(h,t){return this.getExposedMetadatas(h).find(function(l){return l.options&&l.options.name===t})},i.prototype.findTypeMetadata=function(h,t){return this.findMetadata(this._typeMetadatas,h,t)},i.prototype.getStrategy=function(h){var t=this._excludeMetadatas.get(h),l=t&&t.get(void 0),p=this._exposeMetadatas.get(h),u=p&&p.get(void 0);return l&&u||!l&&!u?"none":l?"excludeAll":"exposeAll"},i.prototype.getExposedMetadatas=function(h){return this.getMetadata(this._exposeMetadatas,h)},i.prototype.getExcludedMetadatas=function(h){return this.getMetadata(this._excludeMetadatas,h)},i.prototype.getExposedProperties=function(h,t){return this.getExposedMetadatas(h).filter(function(l){return!l.options||l.options.toClassOnly===!0&&l.options.toPlainOnly===!0?!0:l.options.toClassOnly===!0?t===r.TransformationType.CLASS_TO_CLASS||t===r.TransformationType.PLAIN_TO_CLASS:l.options.toPlainOnly===!0?t===r.TransformationType.CLASS_TO_PLAIN:!0}).map(function(l){return l.propertyName})},i.prototype.getExcludedProperties=function(h,t){return this.getExcludedMetadatas(h).filter(function(l){return!l.options||l.options.toClassOnly===!0&&l.options.toPlainOnly===!0?!0:l.options.toClassOnly===!0?t===r.TransformationType.CLASS_TO_CLASS||t===r.TransformationType.PLAIN_TO_CLASS:l.options.toPlainOnly===!0?t===r.TransformationType.CLASS_TO_PLAIN:!0}).map(function(l){return l.propertyName})},i.prototype.clear=function(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()},i.prototype.getMetadata=function(h,t){var l=h.get(t),p;l&&(p=Array.from(l.values()).filter(function(o){return o.propertyName!==void 0}));for(var u=[],f=0,s=this.getAncestors(t);f<s.length;f++){var n=s[f],c=h.get(n);if(c){var d=Array.from(c.values()).filter(function(o){return o.propertyName!==void 0});u.push.apply(u,d)}}return u.concat(p||[])},i.prototype.findMetadata=function(h,t,l){var p=h.get(t);if(p){var u=p.get(l);if(u)return u}for(var f=0,s=this.getAncestors(t);f<s.length;f++){var n=s[f],c=h.get(n);if(c){var d=c.get(l);if(d)return d}}},i.prototype.findMetadatas=function(h,t,l){var p=h.get(t),u;p&&(u=p.get(l));for(var f=[],s=0,n=this.getAncestors(t);s<n.length;s++){var c=n[s],d=h.get(c);d&&d.has(l)&&f.push.apply(f,d.get(l))}return f.reverse().concat((u||[]).reverse())},i.prototype.getAncestors=function(h){if(!h)return[];if(!this._ancestorsMap.has(h)){for(var t=[],l=Object.getPrototypeOf(h.prototype.constructor);typeof l.prototype<"u";l=Object.getPrototypeOf(l.prototype.constructor))t.push(l);this._ancestorsMap.set(h,t)}return this._ancestorsMap.get(h)},i})();return hi.MetadataStorage=e,hi}var rs;function Zc(){if(rs)return di;rs=1,Object.defineProperty(di,"__esModule",{value:!0});var r=Cd();return di.defaultMetadataStorage=new r.MetadataStorage,di}var ns;function el(){return ns||(ns=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=Zc(),i;(function(p){p[p.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",p[p.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",p[p.CLASS_TO_CLASS=2]="CLASS_TO_CLASS"})(i=r.TransformationType||(r.TransformationType={}));var h=(function(){function p(u,f){this.transformationType=u,this.options=f,this.recursionStack=new Set}return p.prototype.transform=function(u,f,s,n,c,d){var o=this;if(d===void 0&&(d=0),Array.isArray(f)||f instanceof Set){var a=n&&this.transformationType===i.PLAIN_TO_CLASS?t(n):[];return f.forEach(function(x,P){var R=u?u[P]:void 0;if(!o.options.enableCircularCheck||!o.isCircular(x)){var F=void 0;if(typeof s!="function"&&s&&s.options&&s.options.discriminator&&s.options.discriminator.property&&s.options.discriminator.subTypes){if(o.transformationType===i.PLAIN_TO_CLASS){F=s.options.discriminator.subTypes.find(function(G){return G.name===x[s.options.discriminator.property]});var O={newObject:a,object:x,property:void 0},T=s.typeFunction(O);F===void 0?F=T:F=F.value,s.options.keepDiscriminatorProperty||delete x[s.options.discriminator.property]}o.transformationType===i.CLASS_TO_CLASS&&(F=x.constructor),o.transformationType===i.CLASS_TO_PLAIN&&(x[s.options.discriminator.property]=s.options.discriminator.subTypes.find(function(G){return G.value===x.constructor}).name)}else F=s;var j=o.transform(R,x,F,void 0,x instanceof Map,d+1);a instanceof Set?a.add(j):a.push(j)}else o.transformationType===i.CLASS_TO_CLASS&&(a instanceof Set?a.add(x):a.push(x))}),a}else{if(s===String&&!c)return f==null?f:String(f);if(s===Number&&!c)return f==null?f:Number(f);if(s===Boolean&&!c)return f==null?f:!!f;if((s===Date||f instanceof Date)&&!c)return f instanceof Date?new Date(f.valueOf()):f==null?f:new Date(f);if(l()&&(s===Buffer||f instanceof Buffer)&&!c)return f==null?f:Buffer.from(f);if(typeof f=="object"&&f!==null){!s&&f.constructor!==Object&&(s=f.constructor),!s&&u&&(s=u.constructor),this.options.enableCircularCheck&&this.recursionStack.add(f);var m=this.getKeys(s,f),_=u||{};!u&&(this.transformationType===i.PLAIN_TO_CLASS||this.transformationType===i.CLASS_TO_CLASS)&&(c?_=new Map:s?_=new s:_={});for(var w=function(x){var P=x,R=x,F=x;if(!S.options.ignoreDecorators&&s){if(S.transformationType===i.PLAIN_TO_CLASS){var O=e.defaultMetadataStorage.findExposeMetadataByCustomName(s,x);O&&(F=O.propertyName,R=O.propertyName)}else if(S.transformationType===i.CLASS_TO_PLAIN||S.transformationType===i.CLASS_TO_CLASS){var O=e.defaultMetadataStorage.findExposeMetadata(s,x);O&&O.options&&O.options.name&&(R=O.options.name)}}var T=void 0;f instanceof Map?T=f.get(P):f[P]instanceof Function?T=f[P]():T=f[P];var j=void 0,G=T instanceof Map;if(s&&c)j=s;else if(s){var k=e.defaultMetadataStorage.findTypeMetadata(s,F);if(k){var Z={newObject:_,object:f,property:F},ae=k.typeFunction?k.typeFunction(Z):k.reflectedType;k.options&&k.options.discriminator&&k.options.discriminator.property&&k.options.discriminator.subTypes?f[P]instanceof Array?j=k:(S.transformationType===i.PLAIN_TO_CLASS&&(j=k.options.discriminator.subTypes.find(function(_e){if(T&&k.options.discriminator.property in T)return _e.name===T[k.options.discriminator.property]}),j===void 0?j=ae:j=j.value,k.options.keepDiscriminatorProperty||T&&k.options.discriminator.property in T&&delete T[k.options.discriminator.property]),S.transformationType===i.CLASS_TO_CLASS&&(j=T.constructor),S.transformationType===i.CLASS_TO_PLAIN&&(T[k.options.discriminator.property]=k.options.discriminator.subTypes.find(function(_e){return _e.value===T.constructor}).name)):j=ae,G=G||k.reflectedType===Map}else if(S.options.targetMaps)S.options.targetMaps.filter(function(_e){return _e.target===s&&!!_e.properties[F]}).forEach(function(_e){return j=_e.properties[F]});else if(S.options.enableImplicitConversion&&S.transformationType===i.PLAIN_TO_CLASS){var ne=Reflect.getMetadata("design:type",s.prototype,F);ne&&(j=ne)}}var oe=Array.isArray(f[P])?S.getReflectedType(s,F):void 0,ue=u?u[P]:void 0;if(_.constructor.prototype){var de=Object.getOwnPropertyDescriptor(_.constructor.prototype,R);if((S.transformationType===i.PLAIN_TO_CLASS||S.transformationType===i.CLASS_TO_CLASS)&&(de&&!de.set||_[R]instanceof Function))return"continue"}if(!S.options.enableCircularCheck||!S.isCircular(T)){var me=S.transformationType===i.PLAIN_TO_CLASS?R:x,ee=void 0;S.transformationType===i.CLASS_TO_PLAIN?(ee=f[me],ee=S.applyCustomTransformations(ee,s,me,f,S.transformationType),ee=f[me]===ee?T:ee,ee=S.transform(ue,ee,j,oe,G,d+1)):(ee=S.transform(ue,T,j,oe,G,d+1),ee=S.applyCustomTransformations(ee,s,me,f,S.transformationType)),_ instanceof Map?_.set(R,ee):_[R]=ee}else if(S.transformationType===i.CLASS_TO_CLASS){var ee=T;ee=S.applyCustomTransformations(ee,s,x,f,S.transformationType),_ instanceof Map?_.set(R,ee):_[R]=ee}},S=this,C=0,b=m;C<b.length;C++){var E=b[C];w(E)}return this.options.enableCircularCheck&&this.recursionStack.delete(f),_}else return f}},p.prototype.applyCustomTransformations=function(u,f,s,n,c){var d=this,o=e.defaultMetadataStorage.findTransformMetadatas(f,s,this.transformationType);return this.options.version!==void 0&&(o=o.filter(function(a){return a.options?d.checkVersion(a.options.since,a.options.until):!0})),this.options.groups&&this.options.groups.length?o=o.filter(function(a){return a.options?d.checkGroups(a.options.groups):!0}):o=o.filter(function(a){return!a.options||!a.options.groups||!a.options.groups.length}),o.forEach(function(a){u=a.transformFn(u,n,c)}),u},p.prototype.isCircular=function(u){return this.recursionStack.has(u)},p.prototype.getReflectedType=function(u,f){if(u){var s=e.defaultMetadataStorage.findTypeMetadata(u,f);return s?s.reflectedType:void 0}},p.prototype.getKeys=function(u,f){var s=this,n=e.defaultMetadataStorage.getStrategy(u);n==="none"&&(n=this.options.strategy||"exposeAll");var c=[];if(n==="exposeAll"&&(f instanceof Map?c=Array.from(f.keys()):c=Object.keys(f)),!this.options.ignoreDecorators&&u){var d=e.defaultMetadataStorage.getExposedProperties(u,this.transformationType);this.transformationType===i.PLAIN_TO_CLASS&&(d=d.map(function(a){var m=e.defaultMetadataStorage.findExposeMetadata(u,a);return m&&m.options&&m.options.name?m.options.name:a})),this.options.excludeExtraneousValues?c=d:c=c.concat(d);var o=e.defaultMetadataStorage.getExcludedProperties(u,this.transformationType);o.length>0&&(c=c.filter(function(a){return o.indexOf(a)===-1})),this.options.version!==void 0&&(c=c.filter(function(a){var m=e.defaultMetadataStorage.findExposeMetadata(u,a);return!m||!m.options?!0:s.checkVersion(m.options.since,m.options.until)})),this.options.groups&&this.options.groups.length?c=c.filter(function(a){var m=e.defaultMetadataStorage.findExposeMetadata(u,a);return!m||!m.options?!0:s.checkGroups(m.options.groups)}):c=c.filter(function(a){var m=e.defaultMetadataStorage.findExposeMetadata(u,a);return!m||!m.options||!m.options.groups||!m.options.groups.length})}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(c=c.filter(function(a){return s.options.excludePrefixes.every(function(m){return a.substr(0,m.length)!==m})})),c=c.filter(function(a,m,_){return _.indexOf(a)===m}),c},p.prototype.checkVersion=function(u,f){var s=!0;return s&&u&&(s=this.options.version>=u),s&&f&&(s=this.options.version<f),s},p.prototype.checkGroups=function(u){return u?this.options.groups.some(function(f){return u.indexOf(f)!==-1}):!0},p})();r.TransformOperationExecutor=h;function t(p){var u=new p;return!(u instanceof Set)&&!("push"in u)?[]:u}function l(){try{return Buffer,!0}catch{}return!1}r.testForBuffer=l})(Zi)),Zi}var is;function ao(){if(is)return fi;is=1,Object.defineProperty(fi,"__esModule",{value:!0});var r=el(),e=(function(){function i(){}return i.prototype.classToPlain=function(h,t){var l=new r.TransformOperationExecutor(r.TransformationType.CLASS_TO_PLAIN,t||{});return l.transform(void 0,h,void 0,void 0,void 0,void 0)},i.prototype.classToPlainFromExist=function(h,t,l){var p=new r.TransformOperationExecutor(r.TransformationType.CLASS_TO_PLAIN,l||{});return p.transform(t,h,void 0,void 0,void 0,void 0)},i.prototype.plainToClass=function(h,t,l){var p=new r.TransformOperationExecutor(r.TransformationType.PLAIN_TO_CLASS,l||{});return p.transform(void 0,t,h,void 0,void 0,void 0)},i.prototype.plainToClassFromExist=function(h,t,l){var p=new r.TransformOperationExecutor(r.TransformationType.PLAIN_TO_CLASS,l||{});return p.transform(h,t,void 0,void 0,void 0,void 0)},i.prototype.classToClass=function(h,t){var l=new r.TransformOperationExecutor(r.TransformationType.CLASS_TO_CLASS,t||{});return l.transform(void 0,h,void 0,void 0,void 0,void 0)},i.prototype.classToClassFromExist=function(h,t,l){var p=new r.TransformOperationExecutor(r.TransformationType.CLASS_TO_CLASS,l||{});return p.transform(t,h,void 0,void 0,void 0,void 0)},i.prototype.serialize=function(h,t){return JSON.stringify(this.classToPlain(h,t))},i.prototype.deserialize=function(h,t,l){var p=JSON.parse(t);return this.plainToClass(h,p,l)},i.prototype.deserializeArray=function(h,t,l){var p=JSON.parse(t);return this.plainToClass(h,p,l)},i})();return fi.ClassTransformer=e,fi}var lr={},vi={},as;function xd(){if(as)return vi;as=1,Object.defineProperty(vi,"__esModule",{value:!0});var r=(function(){function e(i,h,t,l,p){this.target=i,this.propertyName=h,this.reflectedType=t,this.typeFunction=l,this.options=p}return e})();return vi.TypeMetadata=r,vi}var pi={},os;function Dd(){if(os)return pi;os=1,Object.defineProperty(pi,"__esModule",{value:!0});var r=(function(){function e(i,h,t){this.target=i,this.propertyName=h,this.options=t}return e})();return pi.ExposeMetadata=r,pi}var mi={},ss;function Pd(){if(ss)return mi;ss=1,Object.defineProperty(mi,"__esModule",{value:!0});var r=(function(){function e(i,h,t){this.target=i,this.propertyName=h,this.options=t}return e})();return mi.ExcludeMetadata=r,mi}var gi={},us;function Md(){if(us)return gi;us=1,Object.defineProperty(gi,"__esModule",{value:!0});var r=(function(){function e(i,h,t,l){this.target=i,this.propertyName=h,this.transformFn=t,this.options=l}return e})();return gi.TransformMetadata=r,gi}var cs;function Id(){if(cs)return lr;cs=1,Object.defineProperty(lr,"__esModule",{value:!0});var r=ao(),e=Zc(),i=xd(),h=Dd(),t=Pd(),l=Md();function p(o,a){return function(m,_){var w=new l.TransformMetadata(m.constructor,_,o,a);e.defaultMetadataStorage.addTransformMetadata(w)}}lr.Transform=p;function u(o,a){return function(m,_){var w=Reflect.getMetadata("design:type",m,_),S=new i.TypeMetadata(m.constructor,_,w,o,a);e.defaultMetadataStorage.addTypeMetadata(S)}}lr.Type=u;function f(o){return function(a,m){var _=new h.ExposeMetadata(a instanceof Function?a:a.constructor,m,o||{});e.defaultMetadataStorage.addExposeMetadata(_)}}lr.Expose=f;function s(o){return function(a,m){var _=new t.ExcludeMetadata(a instanceof Function?a:a.constructor,m,o||{});e.defaultMetadataStorage.addExcludeMetadata(_)}}lr.Exclude=s;function n(o){return function(a,m,_){var w=new r.ClassTransformer,S=_.value;_.value=function(){for(var C=[],b=0;b<arguments.length;b++)C[b]=arguments[b];var E=S.apply(this,C),x=!!E&&(typeof E=="object"||typeof E=="function")&&typeof E.then=="function";return x?E.then(function(P){return w.classToPlain(P,o)}):w.classToPlain(E,o)}}}lr.TransformClassToPlain=n;function c(o){return function(a,m,_){var w=new r.ClassTransformer,S=_.value;_.value=function(){for(var C=[],b=0;b<arguments.length;b++)C[b]=arguments[b];var E=S.apply(this,C),x=!!E&&(typeof E=="object"||typeof E=="function")&&typeof E.then=="function";return x?E.then(function(P){return w.classToClass(P,o)}):w.classToClass(E,o)}}}lr.TransformClassToClass=c;function d(o,a){return function(m,_,w){var S=new r.ClassTransformer,C=w.value;w.value=function(){for(var b=[],E=0;E<arguments.length;E++)b[E]=arguments[E];var x=C.apply(this,b),P=!!x&&(typeof x=="object"||typeof x=="function")&&typeof x.then=="function";return P?x.then(function(R){return S.plainToClass(o,R,a)}):S.plainToClass(o,x,a)}}}return lr.TransformPlainToClass=d,lr}var ls;function tl(){return ls||(ls=1,(function(r){function e(a){for(var m in a)r.hasOwnProperty(m)||(r[m]=a[m])}Object.defineProperty(r,"__esModule",{value:!0});var i=ao(),h=ao();r.ClassTransformer=h.ClassTransformer,e(Id());var t=new i.ClassTransformer;function l(a,m){return t.classToPlain(a,m)}r.classToPlain=l;function p(a,m,_){return t.classToPlainFromExist(a,m,_)}r.classToPlainFromExist=p;function u(a,m,_){return t.plainToClass(a,m,_)}r.plainToClass=u;function f(a,m,_){return t.plainToClassFromExist(a,m,_)}r.plainToClassFromExist=f;function s(a,m){return t.classToClass(a,m)}r.classToClass=s;function n(a,m,_){return t.classToClassFromExist(a,m,_)}r.classToClassFromExist=n;function c(a,m){return t.serialize(a,m)}r.serialize=c;function d(a,m,_){return t.deserialize(a,m,_)}r.deserialize=d;function o(a,m,_){return t.deserializeArray(a,m,_)}r.deserializeArray=o,(function(a){a[a.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",a[a.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",a[a.CLASS_TO_CLASS=2]="CLASS_TO_CLASS"})(r.TransformationType||(r.TransformationType={}))})(Xi)),Xi}var at={},fs;function Ne(){if(fs)return at;fs=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var r=at&&at.__createBinding||(Object.create?(function(n,c,d,o){o===void 0&&(o=d),Object.defineProperty(n,o,{enumerable:!0,get:function(){return c[d]}})}):(function(n,c,d,o){o===void 0&&(o=d),n[o]=c[d]})),e=at&&at.__setModuleDefault||(Object.create?(function(n,c){Object.defineProperty(n,"default",{enumerable:!0,value:c})}):function(n,c){n.default=c}),i=at&&at.__importStar||function(n){if(n&&n.__esModule)return n;var c={};if(n!=null)for(var d in n)d!=="default"&&Object.prototype.hasOwnProperty.call(n,d)&&r(c,n,d);return e(c,n),c};Object.defineProperty(at,"__esModule",{value:!0}),at.ButtplugUnknownException=at.ButtplugPingException=at.ButtplugMessageException=at.ButtplugDeviceException=at.ButtplugInitException=at.ButtplugException=void 0;const h=i(Ke());class t extends Error{constructor(c,d,o=h.SYSTEM_MESSAGE_ID,a){super(c),this.errorClass=h.ErrorClass.ERROR_UNKNOWN,this.errorClass=d,this.innerError=a,this.messageId=o}get ErrorClass(){return this.errorClass}get InnerException(){return this.innerError}get Id(){return this.messageId}get ErrorMessage(){return new h.Error(this.message,this.ErrorClass,this.Id)}static LogAndError(c,d,o,a=h.SYSTEM_MESSAGE_ID){return d.Error(o),new c(o,a)}static FromError(c){switch(c.ErrorCode){case h.ErrorClass.ERROR_DEVICE:return new p(c.ErrorMessage,c.Id);case h.ErrorClass.ERROR_INIT:return new l(c.ErrorMessage,c.Id);case h.ErrorClass.ERROR_UNKNOWN:return new s(c.ErrorMessage,c.Id);case h.ErrorClass.ERROR_PING:return new f(c.ErrorMessage,c.Id);case h.ErrorClass.ERROR_MSG:return new u(c.ErrorMessage,c.Id);default:throw new Error(`Message type ${c.ErrorCode} not handled`)}}}at.ButtplugException=t;class l extends t{constructor(c,d=h.SYSTEM_MESSAGE_ID){super(c,h.ErrorClass.ERROR_INIT,d)}}at.ButtplugInitException=l;class p extends t{constructor(c,d=h.SYSTEM_MESSAGE_ID){super(c,h.ErrorClass.ERROR_DEVICE,d)}}at.ButtplugDeviceException=p;class u extends t{constructor(c,d=h.SYSTEM_MESSAGE_ID){super(c,h.ErrorClass.ERROR_MSG,d)}}at.ButtplugMessageException=u;class f extends t{constructor(c,d=h.SYSTEM_MESSAGE_ID){super(c,h.ErrorClass.ERROR_PING,d)}}at.ButtplugPingException=f;class s extends t{constructor(c,d=h.SYSTEM_MESSAGE_ID){super(c,h.ErrorClass.ERROR_UNKNOWN,d)}}return at.ButtplugUnknownException=s,at}var ds={};/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var hs;function Od(){if(hs)return ds;hs=1;var r;return(function(e){(function(i){var h=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),t=l(e);typeof h.Reflect>"u"?h.Reflect=e:t=l(h.Reflect,t),i(t);function l(p,u){return function(f,s){typeof p[f]!="function"&&Object.defineProperty(p,f,{configurable:!0,writable:!0,value:s}),u&&u(f,s)}}})(function(i){var h=Object.prototype.hasOwnProperty,t=typeof Symbol=="function",l=t&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",p=t&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",u=typeof Object.create=="function",f={__proto__:[]}instanceof Array,s=!u&&!f,n={create:u?function(){return rt(Object.create(null))}:f?function(){return rt({__proto__:null})}:function(){return rt({})},has:s?function(q,Y){return h.call(q,Y)}:function(q,Y){return Y in q},get:s?function(q,Y){return h.call(q,Y)?q[Y]:void 0}:function(q,Y){return q[Y]}},c=Object.getPrototypeOf(Function),d=typeof process=="object"&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",o=!d&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Qe(),a=!d&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Le(),m=!d&&typeof WeakMap=="function"?WeakMap:je(),_=new m;function w(q,Y,y,v){if(ee(y)){if(!X(q))throw new TypeError;if(!Ee(Y))throw new TypeError;return T(q,Y)}else{if(!X(q))throw new TypeError;if(!te(Y))throw new TypeError;if(!te(v)&&!ee(v)&&!_e(v))throw new TypeError;return _e(v)&&(v=void 0),y=Q(y),j(q,Y,y,v)}}i("decorate",w);function S(q,Y){function y(v,g){if(!te(v))throw new TypeError;if(!ee(g)&&!we(g))throw new TypeError;oe(q,Y,v,g)}return y}i("metadata",S);function C(q,Y,y,v){if(!te(y))throw new TypeError;return ee(v)||(v=Q(v)),oe(q,Y,y,v)}i("defineMetadata",C);function b(q,Y,y){if(!te(Y))throw new TypeError;return ee(y)||(y=Q(y)),k(q,Y,y)}i("hasMetadata",b);function E(q,Y,y){if(!te(Y))throw new TypeError;return ee(y)||(y=Q(y)),Z(q,Y,y)}i("hasOwnMetadata",E);function x(q,Y,y){if(!te(Y))throw new TypeError;return ee(y)||(y=Q(y)),ae(q,Y,y)}i("getMetadata",x);function P(q,Y,y){if(!te(Y))throw new TypeError;return ee(y)||(y=Q(y)),ne(q,Y,y)}i("getOwnMetadata",P);function R(q,Y){if(!te(q))throw new TypeError;return ee(Y)||(Y=Q(Y)),ue(q,Y)}i("getMetadataKeys",R);function F(q,Y){if(!te(q))throw new TypeError;return ee(Y)||(Y=Q(Y)),de(q,Y)}i("getOwnMetadataKeys",F);function O(q,Y,y){if(!te(Y))throw new TypeError;ee(y)||(y=Q(y));var v=G(Y,y,!1);if(ee(v)||!v.delete(q))return!1;if(v.size>0)return!0;var g=_.get(Y);return g.delete(y),g.size>0||_.delete(Y),!0}i("deleteMetadata",O);function T(q,Y){for(var y=q.length-1;y>=0;--y){var v=q[y],g=v(Y);if(!ee(g)&&!_e(g)){if(!Ee(g))throw new TypeError;Y=g}}return Y}function j(q,Y,y,v){for(var g=q.length-1;g>=0;--g){var D=q[g],L=D(Y,y,v);if(!ee(L)&&!_e(L)){if(!te(L))throw new TypeError;v=L}}return v}function G(q,Y,y){var v=_.get(q);if(ee(v)){if(!y)return;v=new o,_.set(q,v)}var g=v.get(Y);if(ee(g)){if(!y)return;g=new o,v.set(Y,g)}return g}function k(q,Y,y){var v=Z(q,Y,y);if(v)return!0;var g=it(Y);return _e(g)?!1:k(q,g,y)}function Z(q,Y,y){var v=G(Y,y,!1);return ee(v)?!1:W(v.has(q))}function ae(q,Y,y){var v=Z(q,Y,y);if(v)return ne(q,Y,y);var g=it(Y);if(!_e(g))return ae(q,g,y)}function ne(q,Y,y){var v=G(Y,y,!1);if(!ee(v))return v.get(q)}function oe(q,Y,y,v){var g=G(y,v,!0);g.set(q,Y)}function ue(q,Y){var y=de(q,Y),v=it(q);if(v===null)return y;var g=ue(v,Y);if(g.length<=0)return y;if(y.length<=0)return g;for(var D=new a,L=[],N=0,V=y;N<V.length;N++){var ie=V[N],he=D.has(ie);he||(D.add(ie),L.push(ie))}for(var Ie=0,Pe=g;Ie<Pe.length;Ie++){var ie=Pe[Ie],he=D.has(ie);he||(D.add(ie),L.push(ie))}return L}function de(q,Y){var y=[],v=G(q,Y,!1);if(ee(v))return y;for(var g=v.keys(),D=xe(g),L=0;;){var N=et(D);if(!N)return y.length=L,y;var V=De(N);try{y[L]=V}catch(ie){try{Ve(D)}finally{throw ie}}L++}}function me(q){if(q===null)return 1;switch(typeof q){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return q===null?1:6;default:return 6}}function ee(q){return q===void 0}function _e(q){return q===null}function Fe(q){return typeof q=="symbol"}function te(q){return typeof q=="object"?q!==null:typeof q=="function"}function M(q,Y){switch(me(q)){case 0:return q;case 1:return q;case 2:return q;case 3:return q;case 4:return q;case 5:return q}var y="string",v=Be(q,l);if(v!==void 0){var g=v.call(q,y);if(te(g))throw new TypeError;return g}return $(q)}function $(q,Y){var y,v,g;{var D=q.toString;if(ge(D)){var v=D.call(q);if(!te(v))return v}var y=q.valueOf;if(ge(y)){var v=y.call(q);if(!te(v))return v}}throw new TypeError}function W(q){return!!q}function re(q){return""+q}function Q(q){var Y=M(q);return Fe(Y)?Y:re(Y)}function X(q){return Array.isArray?Array.isArray(q):q instanceof Object?q instanceof Array:Object.prototype.toString.call(q)==="[object Array]"}function ge(q){return typeof q=="function"}function Ee(q){return typeof q=="function"}function we(q){switch(me(q)){case 3:return!0;case 4:return!0;default:return!1}}function Be(q,Y){var y=q[Y];if(y!=null){if(!ge(y))throw new TypeError;return y}}function xe(q){var Y=Be(q,p);if(!ge(Y))throw new TypeError;var y=Y.call(q);if(!te(y))throw new TypeError;return y}function De(q){return q.value}function et(q){var Y=q.next();return Y.done?!1:Y}function Ve(q){var Y=q.return;Y&&Y.call(q)}function it(q){var Y=Object.getPrototypeOf(q);if(typeof q!="function"||q===c||Y!==c)return Y;var y=q.prototype,v=y&&Object.getPrototypeOf(y);if(v==null||v===Object.prototype)return Y;var g=v.constructor;return typeof g!="function"||g===q?Y:g}function Qe(){var q={},Y=[],y=(function(){function L(N,V,ie){this._index=0,this._keys=N,this._values=V,this._selector=ie}return L.prototype["@@iterator"]=function(){return this},L.prototype[p]=function(){return this},L.prototype.next=function(){var N=this._index;if(N>=0&&N<this._keys.length){var V=this._selector(this._keys[N],this._values[N]);return N+1>=this._keys.length?(this._index=-1,this._keys=Y,this._values=Y):this._index++,{value:V,done:!1}}return{value:void 0,done:!0}},L.prototype.throw=function(N){throw this._index>=0&&(this._index=-1,this._keys=Y,this._values=Y),N},L.prototype.return=function(N){return this._index>=0&&(this._index=-1,this._keys=Y,this._values=Y),{value:N,done:!0}},L})();return(function(){function L(){this._keys=[],this._values=[],this._cacheKey=q,this._cacheIndex=-2}return Object.defineProperty(L.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),L.prototype.has=function(N){return this._find(N,!1)>=0},L.prototype.get=function(N){var V=this._find(N,!1);return V>=0?this._values[V]:void 0},L.prototype.set=function(N,V){var ie=this._find(N,!0);return this._values[ie]=V,this},L.prototype.delete=function(N){var V=this._find(N,!1);if(V>=0){for(var ie=this._keys.length,he=V+1;he<ie;he++)this._keys[he-1]=this._keys[he],this._values[he-1]=this._values[he];return this._keys.length--,this._values.length--,N===this._cacheKey&&(this._cacheKey=q,this._cacheIndex=-2),!0}return!1},L.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=q,this._cacheIndex=-2},L.prototype.keys=function(){return new y(this._keys,this._values,v)},L.prototype.values=function(){return new y(this._keys,this._values,g)},L.prototype.entries=function(){return new y(this._keys,this._values,D)},L.prototype["@@iterator"]=function(){return this.entries()},L.prototype[p]=function(){return this.entries()},L.prototype._find=function(N,V){return this._cacheKey!==N&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=N)),this._cacheIndex<0&&V&&(this._cacheIndex=this._keys.length,this._keys.push(N),this._values.push(void 0)),this._cacheIndex},L})();function v(L,N){return L}function g(L,N){return N}function D(L,N){return[L,N]}}function Le(){return(function(){function q(){this._map=new o}return Object.defineProperty(q.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),q.prototype.has=function(Y){return this._map.has(Y)},q.prototype.add=function(Y){return this._map.set(Y,Y),this},q.prototype.delete=function(Y){return this._map.delete(Y)},q.prototype.clear=function(){this._map.clear()},q.prototype.keys=function(){return this._map.keys()},q.prototype.values=function(){return this._map.values()},q.prototype.entries=function(){return this._map.entries()},q.prototype["@@iterator"]=function(){return this.keys()},q.prototype[p]=function(){return this.keys()},q})()}function je(){var q=16,Y=n.create(),y=v();return(function(){function V(){this._key=v()}return V.prototype.has=function(ie){var he=g(ie,!1);return he!==void 0?n.has(he,this._key):!1},V.prototype.get=function(ie){var he=g(ie,!1);return he!==void 0?n.get(he,this._key):void 0},V.prototype.set=function(ie,he){var Ie=g(ie,!0);return Ie[this._key]=he,this},V.prototype.delete=function(ie){var he=g(ie,!1);return he!==void 0?delete he[this._key]:!1},V.prototype.clear=function(){this._key=v()},V})();function v(){var V;do V="@@WeakMap@@"+N();while(n.has(Y,V));return Y[V]=!0,V}function g(V,ie){if(!h.call(V,y)){if(!ie)return;Object.defineProperty(V,y,{value:n.create()})}return V[y]}function D(V,ie){for(var he=0;he<ie;++he)V[he]=Math.random()*255|0;return V}function L(V){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(V)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(V)):D(new Uint8Array(V),V):D(new Array(V),V)}function N(){var V=L(q);V[6]=V[6]&79|64,V[8]=V[8]&191|128;for(var ie="",he=0;he<q;++he){var Ie=V[he];(he===4||he===6||he===8)&&(ie+="-"),Ie<16&&(ie+="0"),ie+=Ie.toString(16).toLowerCase()}return ie}}function rt(q){return q.__=void 0,delete q.__,q}})})(r||(r={})),ds}/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var vs;function Ke(){return vs||(vs=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.MessageAttributes=r.LinearCmd=r.VectorSubcommand=r.RotateCmd=r.RotateSubcommand=r.VibrateCmd=r.SpeedSubcommand=r.GenericMessageSubcommand=r.VorzeA10CycloneCmd=r.LovenseCmd=r.StopAllDevices=r.StopDeviceCmd=r.SingleMotorVibrateCmd=r.KiirooCmd=r.FleshlightLaunchFW12Cmd=r.ServerInfo=r.RequestServerInfo=r.Log=r.RequestLog=r.ScanningFinished=r.StopScanning=r.StartScanning=r.RequestDeviceList=r.DeviceRemoved=r.DeviceAdded=r.DeviceAddedVersion0=r.DeviceList=r.DeviceInfoWithSpecifications=r.DeviceListVersion0=r.DeviceInfo=r.Error=r.ErrorClass=r.Test=r.Ping=r.Ok=r.ButtplugSystemMessage=r.ButtplugDeviceMessage=r.ButtplugMessage=r.MESSAGE_SPEC_VERSION=r.MAX_ID=r.DEFAULT_MESSAGE_ID=r.SYSTEM_MESSAGE_ID=void 0;const e=tl(),i=Ne();Od(),r.SYSTEM_MESSAGE_ID=0,r.DEFAULT_MESSAGE_ID=1,r.MAX_ID=4294967295,r.MESSAGE_SPEC_VERSION=1;class h{constructor(M){this.Id=M}DowngradeMessage(){throw new i.ButtplugMessageException("Message version downgrade required, but not defined for this message type.",this.Id)}get Type(){return this.constructor}getType(){return this.Type}toJSON(){return JSON.stringify(this.toProtocolFormat())}toProtocolFormat(){const M={};return M[this.Type.name.replace("_","")]=e.classToPlain(this),M}}r.ButtplugMessage=h;class t extends h{constructor(M,$){super($),this.DeviceIndex=M,this.Id=$}}r.ButtplugDeviceMessage=t;class l extends h{constructor(M=r.SYSTEM_MESSAGE_ID){super(M),this.Id=M}}r.ButtplugSystemMessage=l;class p extends l{constructor(M=r.DEFAULT_MESSAGE_ID){super(M),this.Id=M}get SchemaVersion(){return 0}}r.Ok=p;class u extends h{constructor(M=r.DEFAULT_MESSAGE_ID){super(M),this.Id=M}get SchemaVersion(){return 0}}r.Ping=u;class f extends h{constructor(M,$=r.DEFAULT_MESSAGE_ID){super($),this.TestString=M,this.Id=$}get SchemaVersion(){return 0}}r.Test=f;var s;(function(te){te[te.ERROR_UNKNOWN=0]="ERROR_UNKNOWN",te[te.ERROR_INIT=1]="ERROR_INIT",te[te.ERROR_PING=2]="ERROR_PING",te[te.ERROR_MSG=3]="ERROR_MSG",te[te.ERROR_DEVICE=4]="ERROR_DEVICE"})(s=r.ErrorClass||(r.ErrorClass={}));class n extends l{constructor(M,$=s.ERROR_UNKNOWN,W=r.DEFAULT_MESSAGE_ID){super(W),this.ErrorMessage=M,this.ErrorCode=$,this.Id=W}get SchemaVersion(){return 0}}r.Error=n;class c{constructor(M,$,W){this.DeviceIndex=M,this.DeviceName=$,this.DeviceMessages=W}}r.DeviceInfo=c;class d extends l{constructor(M,$){super(),this.Devices=M,this.Id=$}get Type(){return a.constructor}get SchemaVersion(){return 0}}r.DeviceListVersion0=d;class o{constructor(M,$,W){this.DeviceIndex=M,this.DeviceName=$,this.DeviceMessages=W}}r.DeviceInfoWithSpecifications=o;class a extends l{constructor(M,$){super(),this.Devices=M,this.Id=$}DowngradeMessage(){const M=[];for(const $ of this.Devices)M.push(new c($.DeviceIndex,$.DeviceName,Object.keys($.DeviceMessages)));return new d(M,this.Id)}get SchemaVersion(){return 1}}r.DeviceList=a;class m extends l{constructor(M,$,W){super(),this.DeviceIndex=M,this.DeviceName=$,this.DeviceMessages=W}get Type(){return _.constructor}get SchemaVersion(){return 0}}r.DeviceAddedVersion0=m;class _ extends l{constructor(M,$,W){super(),this.DeviceIndex=M,this.DeviceName=$,this.DeviceMessages=W}get SchemaVersion(){return 1}DowngradeMessage(){return new m(this.DeviceIndex,this.DeviceName,Object.keys(this.DeviceMessages))}}r.DeviceAdded=_;class w extends l{constructor(M){super(),this.DeviceIndex=M}get SchemaVersion(){return 0}}r.DeviceRemoved=w;class S extends h{constructor(M=r.DEFAULT_MESSAGE_ID){super(M),this.Id=M}get SchemaVersion(){return 0}}r.RequestDeviceList=S;class C extends h{constructor(M=r.DEFAULT_MESSAGE_ID){super(M),this.Id=M}get SchemaVersion(){return 0}}r.StartScanning=C;class b extends h{constructor(M=r.DEFAULT_MESSAGE_ID){super(M),this.Id=M}get SchemaVersion(){return 0}}r.StopScanning=b;class E extends l{constructor(){super()}get SchemaVersion(){return 0}}r.ScanningFinished=E;class x extends h{constructor(M,$=r.DEFAULT_MESSAGE_ID){super($),this.LogLevel=M,this.Id=$}get SchemaVersion(){return 0}}r.RequestLog=x;class P extends l{constructor(M,$){super(),this.LogLevel=M,this.LogMessage=$}get SchemaVersion(){return 0}}r.Log=P;class R extends h{constructor(M,$=0,W=r.DEFAULT_MESSAGE_ID){super(W),this.ClientName=M,this.MessageVersion=$,this.Id=W}get SchemaVersion(){return 1}}r.RequestServerInfo=R;class F extends l{constructor(M,$,W,re,Q,X,ge=r.DEFAULT_MESSAGE_ID){super(),this.MajorVersion=M,this.MinorVersion=$,this.BuildVersion=W,this.MessageVersion=re,this.MaxPingTime=Q,this.ServerName=X,this.Id=ge}get SchemaVersion(){return 0}}r.ServerInfo=F;class O extends t{constructor(M,$,W=-1,re=r.DEFAULT_MESSAGE_ID){super(W,re),this.Speed=M,this.Position=$,this.DeviceIndex=W,this.Id=re}get SchemaVersion(){return 0}}r.FleshlightLaunchFW12Cmd=O;class T extends t{constructor(M=0,$=-1,W=r.DEFAULT_MESSAGE_ID){super($,W),this.DeviceIndex=$,this.Id=W,this.Command="0",this.Command=String(M)}set Position(M){M>=0&&M<=4?this.Command=String(Math.round(M)):this.Command="0"}get Position(){const M=Number(this.Command)?Number(this.Command):0;return M<0||M>4?0:Math.round(M)}get SchemaVersion(){return 0}}r.KiirooCmd=T;class j extends t{constructor(M,$=-1,W=r.DEFAULT_MESSAGE_ID){super($,W),this.Speed=M,this.DeviceIndex=$,this.Id=W}get SchemaVersion(){return 0}}r.SingleMotorVibrateCmd=j;class G extends t{constructor(M=-1,$=r.DEFAULT_MESSAGE_ID){super(M,$),this.DeviceIndex=M,this.Id=$}get SchemaVersion(){return 0}}r.StopDeviceCmd=G;class k extends h{constructor(M=r.DEFAULT_MESSAGE_ID){super(M),this.Id=M}get SchemaVersion(){return 0}}r.StopAllDevices=k;class Z extends t{constructor(M,$=-1,W=r.DEFAULT_MESSAGE_ID){super($,W),this.Command=M,this.DeviceIndex=$,this.Id=W}get SchemaVersion(){return 0}}r.LovenseCmd=Z;class ae extends t{constructor(M,$,W=-1,re=r.DEFAULT_MESSAGE_ID){super(W,re),this.Speed=M,this.Clockwise=$,this.DeviceIndex=W,this.Id=re}get SchemaVersion(){return 0}}r.VorzeA10CycloneCmd=ae;class ne{constructor(M){this.Index=M}}r.GenericMessageSubcommand=ne;class oe extends ne{constructor(M,$){super(M),this.Speed=$}}r.SpeedSubcommand=oe;class ue extends t{constructor(M,$=-1,W=r.DEFAULT_MESSAGE_ID){super($,W),this.Speeds=M,this.DeviceIndex=$,this.Id=W}get SchemaVersion(){return 1}static Create(M,$){const W=new Array;let re=0;for(const Q of $)W.push(new oe(re,Q)),++re;return new ue(W,M,r.DEFAULT_MESSAGE_ID)}}r.VibrateCmd=ue;class de extends ne{constructor(M,$,W){super(M),this.Speed=$,this.Clockwise=W}static Create(M,$){const W=new Array;let re=0;for(const Q of $)W.push(new oe(re,Q)),++re;return new ue(W,M)}}r.RotateSubcommand=de;class me extends t{constructor(M,$=-1,W=r.DEFAULT_MESSAGE_ID){super($,W),this.Rotations=M,this.DeviceIndex=$,this.Id=W}get SchemaVersion(){return 1}static Create(M,$){const W=new Array;let re=0;for(const Q of $)W.push(new de(re,Q[0],Q[1])),++re;return new me(W,M)}}r.RotateCmd=me;class ee extends ne{constructor(M,$,W){super(M),this.Position=$,this.Duration=W}}r.VectorSubcommand=ee;class _e extends t{constructor(M,$=-1,W=r.DEFAULT_MESSAGE_ID){super($,W),this.Vectors=M,this.DeviceIndex=$,this.Id=W}get SchemaVersion(){return 1}static Create(M,$){const W=new Array;let re=0;for(const Q of $)W.push(new ee(re,Q[0],Q[1])),++re;return new _e(W,M)}}r.LinearCmd=_e;class Fe{constructor(M){this.FeatureCount=M}}r.MessageAttributes=Fe})(Ji)),Ji}/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var ps;function nl(){if(ps)return xt;ps=1;var r=xt&&xt.__createBinding||(Object.create?(function(f,s,n,c){c===void 0&&(c=n),Object.defineProperty(f,c,{enumerable:!0,get:function(){return s[n]}})}):(function(f,s,n,c){c===void 0&&(c=n),f[c]=s[n]})),e=xt&&xt.__setModuleDefault||(Object.create?(function(f,s){Object.defineProperty(f,"default",{enumerable:!0,value:s})}):function(f,s){f.default=s}),i=xt&&xt.__importStar||function(f){if(f&&f.__esModule)return f;var s={};if(f!=null)for(var n in f)n!=="default"&&Object.prototype.hasOwnProperty.call(f,n)&&r(s,f,n);return e(s,f),s},h=xt&&xt.__awaiter||function(f,s,n,c){function d(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function m(S){try{w(c.next(S))}catch(C){a(C)}}function _(S){try{w(c.throw(S))}catch(C){a(C)}}function w(S){S.done?o(S.value):d(S.value).then(m,_)}w((c=c.apply(f,s||[])).next())})};Object.defineProperty(xt,"__esModule",{value:!0}),xt.ButtplugClientDevice=void 0;const t=i(Ke()),l=Ne(),p=St();let u=class rl extends p.EventEmitter{constructor(s,n,c,d){super(),this._index=s,this._name=n,this._sendClosure=d,this.allowedMsgs=new Map;for(const o of Object.keys(c))this.allowedMsgs.set(o,c[o])}get Name(){return this._name}get Index(){return this._index}get AllowedMessages(){return Array.from(this.allowedMsgs.keys())}get AllowedMessagesObject(){const s={};return this.allowedMsgs.forEach((n,c)=>{s[c]=n}),s}static fromMsg(s,n){return new rl(s.DeviceIndex,s.DeviceName,s.DeviceMessages,n)}CheckAllowedMessageType(s){if(this.AllowedMessages.indexOf(s)===-1)throw new l.ButtplugDeviceException(`Message ${s} does not exist on device ${this._name}`)}MessageAttributes(s){return this.CheckAllowedMessageType(s),this.allowedMsgs.get(s)}SendMessageAsync(s){return h(this,void 0,void 0,function*(){yield this._sendClosure(this,s)})}SendVibrateCmd(s){return h(this,void 0,void 0,function*(){this.CheckAllowedMessageType("VibrateCmd");let n;if(typeof s=="number"){const c=this.MessageAttributes("VibrateCmd").FeatureCount;n=t.VibrateCmd.Create(this._index,new Array(c).fill(s))}else if(Array.isArray(s))n=t.VibrateCmd.Create(this._index,s),this.CheckGenericSubcommandList("SpeedSubcommand",n.Speeds,this.MessageAttributes("VibrateCmd").FeatureCount);else throw new l.ButtplugDeviceException("SendVibrateCmd can only take numbers or arrays of numbers.");yield this.SendMessageAsync(n)})}SendRotateCmd(s,n){return h(this,void 0,void 0,function*(){this.CheckAllowedMessageType("RotateCmd");let c;if(typeof s=="number"){const d=this.MessageAttributes("RotateCmd").FeatureCount;c=t.RotateCmd.Create(this._index,new Array(d).fill([s,n]))}else if(Array.isArray(s))c=t.RotateCmd.Create(this._index,s),this.CheckGenericSubcommandList("SpeedSubcommand",c.Rotations,this.MessageAttributes("RotateCmd").FeatureCount);else throw new l.ButtplugDeviceException("SendRotateCmd can only take a number and boolean, or an array of number/boolean tuples");yield this.SendMessageAsync(c)})}SendLinearCmd(s,n){return h(this,void 0,void 0,function*(){this.CheckAllowedMessageType("LinearCmd");let c;if(typeof s=="number"){const d=this.MessageAttributes("LinearCmd").FeatureCount;c=t.LinearCmd.Create(this._index,new Array(d).fill([s,n]))}else if(Array.isArray(s))c=t.LinearCmd.Create(this._index,s),this.CheckGenericSubcommandList("SpeedSubcommand",c.Vectors,this.MessageAttributes("LinearCmd").FeatureCount);else throw new l.ButtplugDeviceException("SendLinearCmd can only take a number and number, or an array of number/number tuples");yield this.SendMessageAsync(c)})}SendFleshlightLaunchFW12Cmd(s,n){return h(this,void 0,void 0,function*(){this.CheckAllowedMessageType("FleshlightLaunchFW12Cmd"),yield this.SendMessageAsync(new t.FleshlightLaunchFW12Cmd(s,n,this._index))})}SendLovenseCmd(s){return h(this,void 0,void 0,function*(){this.CheckAllowedMessageType("LovenseCmd"),yield this.SendMessageAsync(new t.LovenseCmd(s,this._index))})}SendVorzeA10CycloneCmd(s,n){return h(this,void 0,void 0,function*(){this.CheckAllowedMessageType("VorzeA10CycloneCmd"),yield this.SendMessageAsync(new t.VorzeA10CycloneCmd(s,n,this._index))})}SendStopDeviceCmd(){return h(this,void 0,void 0,function*(){this.CheckAllowedMessageType("StopDeviceCmd"),yield this.SendMessageAsync(new t.StopDeviceCmd(this._index))})}SendKiirooCmd(s){return h(this,void 0,void 0,function*(){this.CheckAllowedMessageType("KiirooCmd"),yield this.SendMessageAsync(new t.KiirooCmd(s,this._index))})}EmitDisconnected(){this.emit("deviceremoved")}CheckGenericSubcommandList(s,n,c){if(n.length===0||n.length>c)throw c===1?new l.ButtplugDeviceException(`${s} requires 1 subcommand for this device, ${n.length} present.`):new l.ButtplugDeviceException(`${s} requires between 1 and ${c} subcommands for this device, ${n.length} present.`);for(const d of n)if(d.Index>=c)throw new l.ButtplugDeviceException(`Index ${d.Index} is out of bounds for ${s} for this device.`)}};return xt.ButtplugClientDevice=u,xt}var ct={},Un={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */var Rd=Un.exports,ms;function Ld(){return ms||(ms=1,(function(r,e){(function(i,h){h(e)})(Rd,(function(i){function h(){for(var B=arguments.length,I=Array(B),A=0;A<B;A++)I[A]=arguments[A];if(I.length>1){I[0]=I[0].slice(0,-1);for(var H=I.length-1,U=1;U<H;++U)I[U]=I[U].slice(1,-1);return I[H]=I[H].slice(1),I.join("")}else return I[0]}function t(B){return"(?:"+B+")"}function l(B){return B===void 0?"undefined":B===null?"null":Object.prototype.toString.call(B).split(" ").pop().split("]").shift().toLowerCase()}function p(B){return B.toUpperCase()}function u(B){return B!=null?B instanceof Array?B:typeof B.length!="number"||B.split||B.setInterval||B.call?[B]:Array.prototype.slice.call(B):[]}function f(B,I){var A=B;if(I)for(var H in I)A[H]=I[H];return A}function s(B){var I="[A-Za-z]",A="[0-9]",H=h(A,"[A-Fa-f]"),U=t(t("%[EFef]"+H+"%"+H+H+"%"+H+H)+"|"+t("%[89A-Fa-f]"+H+"%"+H+H)+"|"+t("%"+H+H)),ve="[\\:\\/\\?\\#\\[\\]\\@]",pe="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Oe=h(ve,pe),We=B?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",tt=B?"[\\uE000-\\uF8FF]":"[]",Re=h(I,A,"[\\-\\.\\_\\~]",We);t(I+h(I,A,"[\\+\\-\\.]")+"*"),t(t(U+"|"+h(Re,pe,"[\\:]"))+"*");var ke=t(t("25[0-5]")+"|"+t("2[0-4]"+A)+"|"+t("1"+A+A)+"|"+t("0?[1-9]"+A)+"|0?0?"+A),Ye=t(ke+"\\."+ke+"\\."+ke+"\\."+ke),Se=t(H+"{1,4}"),He=t(t(Se+"\\:"+Se)+"|"+Ye),Je=t(t(Se+"\\:")+"{6}"+He),Ue=t("\\:\\:"+t(Se+"\\:")+"{5}"+He),sr=t(t(Se)+"?\\:\\:"+t(Se+"\\:")+"{4}"+He),zt=t(t(t(Se+"\\:")+"{0,1}"+Se)+"?\\:\\:"+t(Se+"\\:")+"{3}"+He),Gt=t(t(t(Se+"\\:")+"{0,2}"+Se)+"?\\:\\:"+t(Se+"\\:")+"{2}"+He),Sr=t(t(t(Se+"\\:")+"{0,3}"+Se)+"?\\:\\:"+Se+"\\:"+He),ur=t(t(t(Se+"\\:")+"{0,4}"+Se)+"?\\:\\:"+He),ht=t(t(t(Se+"\\:")+"{0,5}"+Se)+"?\\:\\:"+Se),vt=t(t(t(Se+"\\:")+"{0,6}"+Se)+"?\\:\\:"),Jt=t([Je,Ue,sr,zt,Gt,Sr,ur,ht,vt].join("|")),Xt=t(t(Re+"|"+U)+"+");t("[vV]"+H+"+\\."+h(Re,pe,"[\\:]")+"+"),t(t(U+"|"+h(Re,pe))+"*");var Lr=t(U+"|"+h(Re,pe,"[\\:\\@]"));return t(t(U+"|"+h(Re,pe,"[\\@]"))+"+"),t(t(Lr+"|"+h("[\\/\\?]",tt))+"*"),{NOT_SCHEME:new RegExp(h("[^]",I,A,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(h("[^\\%\\:]",Re,pe),"g"),NOT_HOST:new RegExp(h("[^\\%\\[\\]\\:]",Re,pe),"g"),NOT_PATH:new RegExp(h("[^\\%\\/\\:\\@]",Re,pe),"g"),NOT_PATH_NOSCHEME:new RegExp(h("[^\\%\\/\\@]",Re,pe),"g"),NOT_QUERY:new RegExp(h("[^\\%]",Re,pe,"[\\:\\@\\/\\?]",tt),"g"),NOT_FRAGMENT:new RegExp(h("[^\\%]",Re,pe,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(h("[^]",Re,pe),"g"),UNRESERVED:new RegExp(Re,"g"),OTHER_CHARS:new RegExp(h("[^\\%]",Re,Oe),"g"),PCT_ENCODED:new RegExp(U,"g"),IPV4ADDRESS:new RegExp("^("+Ye+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Jt+")"+t(t("\\%25|\\%(?!"+H+"{2})")+"("+Xt+")")+"?\\]?$")}}var n=s(!1),c=s(!0),d=(function(){function B(I,A){var H=[],U=!0,ve=!1,pe=void 0;try{for(var Oe=I[Symbol.iterator](),We;!(U=(We=Oe.next()).done)&&(H.push(We.value),!(A&&H.length===A));U=!0);}catch(tt){ve=!0,pe=tt}finally{try{!U&&Oe.return&&Oe.return()}finally{if(ve)throw pe}}return H}return function(I,A){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return B(I,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=function(B){if(Array.isArray(B)){for(var I=0,A=Array(B.length);I<B.length;I++)A[I]=B[I];return A}else return Array.from(B)},a=2147483647,m=36,_=1,w=26,S=38,C=700,b=72,E=128,x="-",P=/^xn--/,R=/[^\0-\x7E]/,F=/[\x2E\u3002\uFF0E\uFF61]/g,O={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},T=m-_,j=Math.floor,G=String.fromCharCode;function k(B){throw new RangeError(O[B])}function Z(B,I){for(var A=[],H=B.length;H--;)A[H]=I(B[H]);return A}function ae(B,I){var A=B.split("@"),H="";A.length>1&&(H=A[0]+"@",B=A[1]),B=B.replace(F,".");var U=B.split("."),ve=Z(U,I).join(".");return H+ve}function ne(B){for(var I=[],A=0,H=B.length;A<H;){var U=B.charCodeAt(A++);if(U>=55296&&U<=56319&&A<H){var ve=B.charCodeAt(A++);(ve&64512)==56320?I.push(((U&1023)<<10)+(ve&1023)+65536):(I.push(U),A--)}else I.push(U)}return I}var oe=function(I){return String.fromCodePoint.apply(String,o(I))},ue=function(I){return I-48<10?I-22:I-65<26?I-65:I-97<26?I-97:m},de=function(I,A){return I+22+75*(I<26)-((A!=0)<<5)},me=function(I,A,H){var U=0;for(I=H?j(I/C):I>>1,I+=j(I/A);I>T*w>>1;U+=m)I=j(I/T);return j(U+(T+1)*I/(I+S))},ee=function(I){var A=[],H=I.length,U=0,ve=E,pe=b,Oe=I.lastIndexOf(x);Oe<0&&(Oe=0);for(var We=0;We<Oe;++We)I.charCodeAt(We)>=128&&k("not-basic"),A.push(I.charCodeAt(We));for(var tt=Oe>0?Oe+1:0;tt<H;){for(var Re=U,ke=1,Ye=m;;Ye+=m){tt>=H&&k("invalid-input");var Se=ue(I.charCodeAt(tt++));(Se>=m||Se>j((a-U)/ke))&&k("overflow"),U+=Se*ke;var He=Ye<=pe?_:Ye>=pe+w?w:Ye-pe;if(Se<He)break;var Je=m-He;ke>j(a/Je)&&k("overflow"),ke*=Je}var Ue=A.length+1;pe=me(U-Re,Ue,Re==0),j(U/Ue)>a-ve&&k("overflow"),ve+=j(U/Ue),U%=Ue,A.splice(U++,0,ve)}return String.fromCodePoint.apply(String,A)},_e=function(I){var A=[];I=ne(I);var H=I.length,U=E,ve=0,pe=b,Oe=!0,We=!1,tt=void 0;try{for(var Re=I[Symbol.iterator](),ke;!(Oe=(ke=Re.next()).done);Oe=!0){var Ye=ke.value;Ye<128&&A.push(G(Ye))}}catch(Cr){We=!0,tt=Cr}finally{try{!Oe&&Re.return&&Re.return()}finally{if(We)throw tt}}var Se=A.length,He=Se;for(Se&&A.push(x);He<H;){var Je=a,Ue=!0,sr=!1,zt=void 0;try{for(var Gt=I[Symbol.iterator](),Sr;!(Ue=(Sr=Gt.next()).done);Ue=!0){var ur=Sr.value;ur>=U&&ur<Je&&(Je=ur)}}catch(Cr){sr=!0,zt=Cr}finally{try{!Ue&&Gt.return&&Gt.return()}finally{if(sr)throw zt}}var ht=He+1;Je-U>j((a-ve)/ht)&&k("overflow"),ve+=(Je-U)*ht,U=Je;var vt=!0,Jt=!1,Xt=void 0;try{for(var Lr=I[Symbol.iterator](),ni;!(vt=(ni=Lr.next()).done);vt=!0){var ii=ni.value;if(ii<U&&++ve>a&&k("overflow"),ii==U){for(var Br=ve,Er=m;;Er+=m){var ln=Er<=pe?_:Er>=pe+w?w:Er-pe;if(Br<ln)break;var ai=Br-ln,oi=m-ln;A.push(G(de(ln+ai%oi,0))),Br=j(ai/oi)}A.push(G(de(Br,0))),pe=me(ve,ht,He==Se),ve=0,++He}}}catch(Cr){Jt=!0,Xt=Cr}finally{try{!vt&&Lr.return&&Lr.return()}finally{if(Jt)throw Xt}}++ve,++U}return A.join("")},Fe=function(I){return ae(I,function(A){return P.test(A)?ee(A.slice(4).toLowerCase()):A})},te=function(I){return ae(I,function(A){return R.test(A)?"xn--"+_e(A):A})},M={version:"2.1.0",ucs2:{decode:ne,encode:oe},decode:ee,encode:_e,toASCII:te,toUnicode:Fe},$={};function W(B){var I=B.charCodeAt(0),A=void 0;return I<16?A="%0"+I.toString(16).toUpperCase():I<128?A="%"+I.toString(16).toUpperCase():I<2048?A="%"+(I>>6|192).toString(16).toUpperCase()+"%"+(I&63|128).toString(16).toUpperCase():A="%"+(I>>12|224).toString(16).toUpperCase()+"%"+(I>>6&63|128).toString(16).toUpperCase()+"%"+(I&63|128).toString(16).toUpperCase(),A}function re(B){for(var I="",A=0,H=B.length;A<H;){var U=parseInt(B.substr(A+1,2),16);if(U<128)I+=String.fromCharCode(U),A+=3;else if(U>=194&&U<224){if(H-A>=6){var ve=parseInt(B.substr(A+4,2),16);I+=String.fromCharCode((U&31)<<6|ve&63)}else I+=B.substr(A,6);A+=6}else if(U>=224){if(H-A>=9){var pe=parseInt(B.substr(A+4,2),16),Oe=parseInt(B.substr(A+7,2),16);I+=String.fromCharCode((U&15)<<12|(pe&63)<<6|Oe&63)}else I+=B.substr(A,9);A+=9}else I+=B.substr(A,3),A+=3}return I}function Q(B,I){function A(H){var U=re(H);return U.match(I.UNRESERVED)?U:H}return B.scheme&&(B.scheme=String(B.scheme).replace(I.PCT_ENCODED,A).toLowerCase().replace(I.NOT_SCHEME,"")),B.userinfo!==void 0&&(B.userinfo=String(B.userinfo).replace(I.PCT_ENCODED,A).replace(I.NOT_USERINFO,W).replace(I.PCT_ENCODED,p)),B.host!==void 0&&(B.host=String(B.host).replace(I.PCT_ENCODED,A).toLowerCase().replace(I.NOT_HOST,W).replace(I.PCT_ENCODED,p)),B.path!==void 0&&(B.path=String(B.path).replace(I.PCT_ENCODED,A).replace(B.scheme?I.NOT_PATH:I.NOT_PATH_NOSCHEME,W).replace(I.PCT_ENCODED,p)),B.query!==void 0&&(B.query=String(B.query).replace(I.PCT_ENCODED,A).replace(I.NOT_QUERY,W).replace(I.PCT_ENCODED,p)),B.fragment!==void 0&&(B.fragment=String(B.fragment).replace(I.PCT_ENCODED,A).replace(I.NOT_FRAGMENT,W).replace(I.PCT_ENCODED,p)),B}function X(B){return B.replace(/^0*(.*)/,"$1")||"0"}function ge(B,I){var A=B.match(I.IPV4ADDRESS)||[],H=d(A,2),U=H[1];return U?U.split(".").map(X).join("."):B}function Ee(B,I){var A=B.match(I.IPV6ADDRESS)||[],H=d(A,3),U=H[1],ve=H[2];if(U){for(var pe=U.toLowerCase().split("::").reverse(),Oe=d(pe,2),We=Oe[0],tt=Oe[1],Re=tt?tt.split(":").map(X):[],ke=We.split(":").map(X),Ye=I.IPV4ADDRESS.test(ke[ke.length-1]),Se=Ye?7:8,He=ke.length-Se,Je=Array(Se),Ue=0;Ue<Se;++Ue)Je[Ue]=Re[Ue]||ke[He+Ue]||"";Ye&&(Je[Se-1]=ge(Je[Se-1],I));var sr=Je.reduce(function(ht,vt,Jt){if(!vt||vt==="0"){var Xt=ht[ht.length-1];Xt&&Xt.index+Xt.length===Jt?Xt.length++:ht.push({index:Jt,length:1})}return ht},[]),zt=sr.sort(function(ht,vt){return vt.length-ht.length})[0],Gt=void 0;if(zt&&zt.length>1){var Sr=Je.slice(0,zt.index),ur=Je.slice(zt.index+zt.length);Gt=Sr.join(":")+"::"+ur.join(":")}else Gt=Je.join(":");return ve&&(Gt+="%"+ve),Gt}else return B}var we=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Be="".match(/(){0}/)[1]===void 0;function xe(B){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},A={},H=I.iri!==!1?c:n;I.reference==="suffix"&&(B=(I.scheme?I.scheme+":":"")+"//"+B);var U=B.match(we);if(U){Be?(A.scheme=U[1],A.userinfo=U[3],A.host=U[4],A.port=parseInt(U[5],10),A.path=U[6]||"",A.query=U[7],A.fragment=U[8],isNaN(A.port)&&(A.port=U[5])):(A.scheme=U[1]||void 0,A.userinfo=B.indexOf("@")!==-1?U[3]:void 0,A.host=B.indexOf("//")!==-1?U[4]:void 0,A.port=parseInt(U[5],10),A.path=U[6]||"",A.query=B.indexOf("?")!==-1?U[7]:void 0,A.fragment=B.indexOf("#")!==-1?U[8]:void 0,isNaN(A.port)&&(A.port=B.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?U[4]:void 0)),A.host&&(A.host=Ee(ge(A.host,H),H)),A.scheme===void 0&&A.userinfo===void 0&&A.host===void 0&&A.port===void 0&&!A.path&&A.query===void 0?A.reference="same-document":A.scheme===void 0?A.reference="relative":A.fragment===void 0?A.reference="absolute":A.reference="uri",I.reference&&I.reference!=="suffix"&&I.reference!==A.reference&&(A.error=A.error||"URI is not a "+I.reference+" reference.");var ve=$[(I.scheme||A.scheme||"").toLowerCase()];if(!I.unicodeSupport&&(!ve||!ve.unicodeSupport)){if(A.host&&(I.domainHost||ve&&ve.domainHost))try{A.host=M.toASCII(A.host.replace(H.PCT_ENCODED,re).toLowerCase())}catch(pe){A.error=A.error||"Host's domain name can not be converted to ASCII via punycode: "+pe}Q(A,n)}else Q(A,H);ve&&ve.parse&&ve.parse(A,I)}else A.error=A.error||"URI can not be parsed.";return A}function De(B,I){var A=I.iri!==!1?c:n,H=[];return B.userinfo!==void 0&&(H.push(B.userinfo),H.push("@")),B.host!==void 0&&H.push(Ee(ge(String(B.host),A),A).replace(A.IPV6ADDRESS,function(U,ve,pe){return"["+ve+(pe?"%25"+pe:"")+"]"})),(typeof B.port=="number"||typeof B.port=="string")&&(H.push(":"),H.push(String(B.port))),H.length?H.join(""):void 0}var et=/^\.\.?\//,Ve=/^\/\.(\/|$)/,it=/^\/\.\.(\/|$)/,Qe=/^\/?(?:.|\n)*?(?=\/|$)/;function Le(B){for(var I=[];B.length;)if(B.match(et))B=B.replace(et,"");else if(B.match(Ve))B=B.replace(Ve,"/");else if(B.match(it))B=B.replace(it,"/"),I.pop();else if(B==="."||B==="..")B="";else{var A=B.match(Qe);if(A){var H=A[0];B=B.slice(H.length),I.push(H)}else throw new Error("Unexpected dot segment condition")}return I.join("")}function je(B){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},A=I.iri?c:n,H=[],U=$[(I.scheme||B.scheme||"").toLowerCase()];if(U&&U.serialize&&U.serialize(B,I),B.host&&!A.IPV6ADDRESS.test(B.host)){if(I.domainHost||U&&U.domainHost)try{B.host=I.iri?M.toUnicode(B.host):M.toASCII(B.host.replace(A.PCT_ENCODED,re).toLowerCase())}catch(Oe){B.error=B.error||"Host's domain name can not be converted to "+(I.iri?"Unicode":"ASCII")+" via punycode: "+Oe}}Q(B,A),I.reference!=="suffix"&&B.scheme&&(H.push(B.scheme),H.push(":"));var ve=De(B,I);if(ve!==void 0&&(I.reference!=="suffix"&&H.push("//"),H.push(ve),B.path&&B.path.charAt(0)!=="/"&&H.push("/")),B.path!==void 0){var pe=B.path;!I.absolutePath&&(!U||!U.absolutePath)&&(pe=Le(pe)),ve===void 0&&(pe=pe.replace(/^\/\//,"/%2F")),H.push(pe)}return B.query!==void 0&&(H.push("?"),H.push(B.query)),B.fragment!==void 0&&(H.push("#"),H.push(B.fragment)),H.join("")}function rt(B,I){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},H=arguments[3],U={};return H||(B=xe(je(B,A),A),I=xe(je(I,A),A)),A=A||{},!A.tolerant&&I.scheme?(U.scheme=I.scheme,U.userinfo=I.userinfo,U.host=I.host,U.port=I.port,U.path=Le(I.path||""),U.query=I.query):(I.userinfo!==void 0||I.host!==void 0||I.port!==void 0?(U.userinfo=I.userinfo,U.host=I.host,U.port=I.port,U.path=Le(I.path||""),U.query=I.query):(I.path?(I.path.charAt(0)==="/"?U.path=Le(I.path):((B.userinfo!==void 0||B.host!==void 0||B.port!==void 0)&&!B.path?U.path="/"+I.path:B.path?U.path=B.path.slice(0,B.path.lastIndexOf("/")+1)+I.path:U.path=I.path,U.path=Le(U.path)),U.query=I.query):(U.path=B.path,I.query!==void 0?U.query=I.query:U.query=B.query),U.userinfo=B.userinfo,U.host=B.host,U.port=B.port),U.scheme=B.scheme),U.fragment=I.fragment,U}function q(B,I,A){var H=f({scheme:"null"},A);return je(rt(xe(B,H),xe(I,H),H,!0),H)}function Y(B,I){return typeof B=="string"?B=je(xe(B,I),I):l(B)==="object"&&(B=xe(je(B,I),I)),B}function y(B,I,A){return typeof B=="string"?B=je(xe(B,A),A):l(B)==="object"&&(B=je(B,A)),typeof I=="string"?I=je(xe(I,A),A):l(I)==="object"&&(I=je(I,A)),B===I}function v(B,I){return B&&B.toString().replace(!I||!I.iri?n.ESCAPE:c.ESCAPE,W)}function g(B,I){return B&&B.toString().replace(!I||!I.iri?n.PCT_ENCODED:c.PCT_ENCODED,re)}var D={scheme:"http",domainHost:!0,parse:function(I,A){return I.host||(I.error=I.error||"HTTP URIs must have a host."),I},serialize:function(I,A){var H=String(I.scheme).toLowerCase()==="https";return(I.port===(H?443:80)||I.port==="")&&(I.port=void 0),I.path||(I.path="/"),I}},L={scheme:"https",domainHost:D.domainHost,parse:D.parse,serialize:D.serialize};function N(B){return typeof B.secure=="boolean"?B.secure:String(B.scheme).toLowerCase()==="wss"}var V={scheme:"ws",domainHost:!0,parse:function(I,A){var H=I;return H.secure=N(H),H.resourceName=(H.path||"/")+(H.query?"?"+H.query:""),H.path=void 0,H.query=void 0,H},serialize:function(I,A){if((I.port===(N(I)?443:80)||I.port==="")&&(I.port=void 0),typeof I.secure=="boolean"&&(I.scheme=I.secure?"wss":"ws",I.secure=void 0),I.resourceName){var H=I.resourceName.split("?"),U=d(H,2),ve=U[0],pe=U[1];I.path=ve&&ve!=="/"?ve:void 0,I.query=pe,I.resourceName=void 0}return I.fragment=void 0,I}},ie={scheme:"wss",domainHost:V.domainHost,parse:V.parse,serialize:V.serialize},he={},Ie="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Pe="[0-9A-Fa-f]",$e=t(t("%[EFef]"+Pe+"%"+Pe+Pe+"%"+Pe+Pe)+"|"+t("%[89A-Fa-f]"+Pe+"%"+Pe+Pe)+"|"+t("%"+Pe+Pe)),Ti="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",$i="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Ni=h($i,'[\\"\\\\]'),ti="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Vi=new RegExp(Ie,"g"),or=new RegExp($e,"g"),wr=new RegExp(h("[^]",Ti,"[\\.]",'[\\"]',Ni),"g"),ri=new RegExp(h("[^]",Ie,ti),"g"),Cn=ri;function xn(B){var I=re(B);return I.match(Vi)?I:B}var cn={scheme:"mailto",parse:function(I,A){var H=I,U=H.to=H.path?H.path.split(","):[];if(H.path=void 0,H.query){for(var ve=!1,pe={},Oe=H.query.split("&"),We=0,tt=Oe.length;We<tt;++We){var Re=Oe[We].split("=");switch(Re[0]){case"to":for(var ke=Re[1].split(","),Ye=0,Se=ke.length;Ye<Se;++Ye)U.push(ke[Ye]);break;case"subject":H.subject=g(Re[1],A);break;case"body":H.body=g(Re[1],A);break;default:ve=!0,pe[g(Re[0],A)]=g(Re[1],A);break}}ve&&(H.headers=pe)}H.query=void 0;for(var He=0,Je=U.length;He<Je;++He){var Ue=U[He].split("@");if(Ue[0]=g(Ue[0]),A.unicodeSupport)Ue[1]=g(Ue[1],A).toLowerCase();else try{Ue[1]=M.toASCII(g(Ue[1],A).toLowerCase())}catch(sr){H.error=H.error||"Email address's domain name can not be converted to ASCII via punycode: "+sr}U[He]=Ue.join("@")}return H},serialize:function(I,A){var H=I,U=u(I.to);if(U){for(var ve=0,pe=U.length;ve<pe;++ve){var Oe=String(U[ve]),We=Oe.lastIndexOf("@"),tt=Oe.slice(0,We).replace(or,xn).replace(or,p).replace(wr,W),Re=Oe.slice(We+1);try{Re=A.iri?M.toUnicode(Re):M.toASCII(g(Re,A).toLowerCase())}catch(He){H.error=H.error||"Email address's domain name can not be converted to "+(A.iri?"Unicode":"ASCII")+" via punycode: "+He}U[ve]=tt+"@"+Re}H.path=U.join(",")}var ke=I.headers=I.headers||{};I.subject&&(ke.subject=I.subject),I.body&&(ke.body=I.body);var Ye=[];for(var Se in ke)ke[Se]!==he[Se]&&Ye.push(Se.replace(or,xn).replace(or,p).replace(ri,W)+"="+ke[Se].replace(or,xn).replace(or,p).replace(Cn,W));return Ye.length&&(H.query=Ye.join("&")),H}},ji=/^([^\:]+)\:(.*)/,Rr={scheme:"urn",parse:function(I,A){var H=I.path&&I.path.match(ji),U=I;if(H){var ve=A.scheme||U.scheme||"urn",pe=H[1].toLowerCase(),Oe=H[2],We=ve+":"+(A.nid||pe),tt=$[We];U.nid=pe,U.nss=Oe,U.path=void 0,tt&&(U=tt.parse(U,A))}else U.error=U.error||"URN can not be parsed.";return U},serialize:function(I,A){var H=A.scheme||I.scheme||"urn",U=I.nid,ve=H+":"+(A.nid||U),pe=$[ve];pe&&(I=pe.serialize(I,A));var Oe=I,We=I.nss;return Oe.path=(U||A.nid)+":"+We,Oe}},qi=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Dn={scheme:"urn:uuid",parse:function(I,A){var H=I;return H.uuid=H.nss,H.nss=void 0,!A.tolerant&&(!H.uuid||!H.uuid.match(qi))&&(H.error=H.error||"UUID is not valid."),H},serialize:function(I,A){var H=I;return H.nss=(I.uuid||"").toLowerCase(),H}};$[D.scheme]=D,$[L.scheme]=L,$[V.scheme]=V,$[ie.scheme]=ie,$[cn.scheme]=cn,$[Rr.scheme]=Rr,$[Dn.scheme]=Dn,i.SCHEMES=$,i.pctEncChar=W,i.pctDecChars=re,i.parse=xe,i.removeDotSegments=Le,i.serialize=je,i.resolveComponents=rt,i.resolve=q,i.normalize=Y,i.equal=y,i.escapeComponent=v,i.unescapeComponent=g,Object.defineProperty(i,"__esModule",{value:!0})}))})(Un,Un.exports)),Un.exports}var ea,gs;function Co(){return gs||(gs=1,ea=function r(e,i){if(e===i)return!0;if(e&&i&&typeof e=="object"&&typeof i=="object"){if(e.constructor!==i.constructor)return!1;var h,t,l;if(Array.isArray(e)){if(h=e.length,h!=i.length)return!1;for(t=h;t--!==0;)if(!r(e[t],i[t]))return!1;return!0}if(e.constructor===RegExp)return e.source===i.source&&e.flags===i.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===i.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===i.toString();if(l=Object.keys(e),h=l.length,h!==Object.keys(i).length)return!1;for(t=h;t--!==0;)if(!Object.prototype.hasOwnProperty.call(i,l[t]))return!1;for(t=h;t--!==0;){var p=l[t];if(!r(e[p],i[p]))return!1}return!0}return e!==e&&i!==i}),ea}var ta,_s;function Bd(){return _s||(_s=1,ta=function(e){for(var i=0,h=e.length,t=0,l;t<h;)i++,l=e.charCodeAt(t++),l>=55296&&l<=56319&&t<h&&(l=e.charCodeAt(t),(l&64512)==56320&&t++);return i}),ta}var ra,ys;function En(){if(ys)return ra;ys=1,ra={copy:r,checkDataType:e,checkDataTypes:i,coerceToTypes:t,toHash:l,getProperty:f,escapeQuotes:s,equal:Co(),ucs2length:Bd(),varOccurences:n,varReplace:c,schemaHasRules:d,schemaHasRulesExcept:o,schemaUnknownRules:a,toQuotedString:m,getPathExpr:_,getPath:w,getData:b,unescapeFragment:x,unescapeJsonPointer:F,escapeFragment:P,escapeJsonPointer:R};function r(O,T){T=T||{};for(var j in O)T[j]=O[j];return T}function e(O,T,j,G){var k=G?" !== ":" === ",Z=G?" || ":" && ",ae=G?"!":"",ne=G?"":"!";switch(O){case"null":return T+k+"null";case"array":return ae+"Array.isArray("+T+")";case"object":return"("+ae+T+Z+"typeof "+T+k+'"object"'+Z+ne+"Array.isArray("+T+"))";case"integer":return"(typeof "+T+k+'"number"'+Z+ne+"("+T+" % 1)"+Z+T+k+T+(j?Z+ae+"isFinite("+T+")":"")+")";case"number":return"(typeof "+T+k+'"'+O+'"'+(j?Z+ae+"isFinite("+T+")":"")+")";default:return"typeof "+T+k+'"'+O+'"'}}function i(O,T,j){switch(O.length){case 1:return e(O[0],T,j,!0);default:var G="",k=l(O);k.array&&k.object&&(G=k.null?"(":"(!"+T+" || ",G+="typeof "+T+' !== "object")',delete k.null,delete k.array,delete k.object),k.number&&delete k.integer;for(var Z in k)G+=(G?" && ":"")+e(Z,T,j,!0);return G}}var h=l(["string","number","integer","boolean","null"]);function t(O,T){if(Array.isArray(T)){for(var j=[],G=0;G<T.length;G++){var k=T[G];(h[k]||O==="array"&&k==="array")&&(j[j.length]=k)}if(j.length)return j}else{if(h[T])return[T];if(O==="array"&&T==="array")return["array"]}}function l(O){for(var T={},j=0;j<O.length;j++)T[O[j]]=!0;return T}var p=/^[a-z$_][a-z$_0-9]*$/i,u=/'|\\/g;function f(O){return typeof O=="number"?"["+O+"]":p.test(O)?"."+O:"['"+s(O)+"']"}function s(O){return O.replace(u,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function n(O,T){T+="[^0-9]";var j=O.match(new RegExp(T,"g"));return j?j.length:0}function c(O,T,j){return T+="([^0-9])",j=j.replace(/\$/g,"$$$$"),O.replace(new RegExp(T,"g"),j+"$1")}function d(O,T){if(typeof O=="boolean")return!O;for(var j in O)if(T[j])return!0}function o(O,T,j){if(typeof O=="boolean")return!O&&j!="not";for(var G in O)if(G!=j&&T[G])return!0}function a(O,T){if(typeof O!="boolean"){for(var j in O)if(!T[j])return j}}function m(O){return"'"+s(O)+"'"}function _(O,T,j,G){var k=j?"'/' + "+T+(G?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):G?"'[' + "+T+" + ']'":"'[\\'' + "+T+" + '\\']'";return E(O,k)}function w(O,T,j){var G=m(j?"/"+R(T):f(T));return E(O,G)}var S=/^\/(?:[^~]|~0|~1)*$/,C=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function b(O,T,j){var G,k,Z,ae;if(O==="")return"rootData";if(O[0]=="/"){if(!S.test(O))throw new Error("Invalid JSON-pointer: "+O);k=O,Z="rootData"}else{if(ae=O.match(C),!ae)throw new Error("Invalid JSON-pointer: "+O);if(G=+ae[1],k=ae[2],k=="#"){if(G>=T)throw new Error("Cannot access property/index "+G+" levels up, current level is "+T);return j[T-G]}if(G>T)throw new Error("Cannot access data "+G+" levels up, current level is "+T);if(Z="data"+(T-G||""),!k)return Z}for(var ne=Z,oe=k.split("/"),ue=0;ue<oe.length;ue++){var de=oe[ue];de&&(Z+=f(F(de)),ne+=" && "+Z)}return ne}function E(O,T){return O=='""'?T:(O+" + "+T).replace(/([^\\])' \+ '/g,"$1")}function x(O){return F(decodeURIComponent(O))}function P(O){return encodeURIComponent(R(O))}function R(O){return O.replace(/~/g,"~0").replace(/\//g,"~1")}function F(O){return O.replace(/~1/g,"/").replace(/~0/g,"~")}return ra}var na,bs;function il(){if(bs)return na;bs=1;var r=En();na=e;function e(i){r.copy(i,this)}return na}var ia={exports:{}},ws;function Ad(){if(ws)return ia.exports;ws=1;var r=ia.exports=function(h,t,l){typeof t=="function"&&(l=t,t={}),l=t.cb||l;var p=typeof l=="function"?l:l.pre||function(){},u=l.post||function(){};e(t,p,u,h,"",h)};r.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},r.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},r.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},r.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function e(h,t,l,p,u,f,s,n,c,d){if(p&&typeof p=="object"&&!Array.isArray(p)){t(p,u,f,s,n,c,d);for(var o in p){var a=p[o];if(Array.isArray(a)){if(o in r.arrayKeywords)for(var m=0;m<a.length;m++)e(h,t,l,a[m],u+"/"+o+"/"+m,f,u,o,p,m)}else if(o in r.propsKeywords){if(a&&typeof a=="object")for(var _ in a)e(h,t,l,a[_],u+"/"+o+"/"+i(_),f,u,o,p,_)}else(o in r.keywords||h.allKeys&&!(o in r.skipKeywords))&&e(h,t,l,a,u+"/"+o,f,u,o,p)}l(p,u,f,s,n,c,d)}}function i(h){return h.replace(/~/g,"~0").replace(/\//g,"~1")}return ia.exports}var aa,Ss;function xo(){if(Ss)return aa;Ss=1;var r=Ld(),e=Co(),i=En(),h=il(),t=Ad();aa=l,l.normalizeId=w,l.fullPath=a,l.url=S,l.ids=C,l.inlineRef=c,l.schema=p;function l(b,E,x){var P=this._refs[x];if(typeof P=="string")if(this._refs[P])P=this._refs[P];else return l.call(this,b,E,P);if(P=P||this._schemas[x],P instanceof h)return c(P.schema,this._opts.inlineRefs)?P.schema:P.validate||this._compile(P);var R=p.call(this,E,x),F,O,T;return R&&(F=R.schema,E=R.root,T=R.baseId),F instanceof h?O=F.validate||b.call(this,F.schema,E,void 0,T):F!==void 0&&(O=c(F,this._opts.inlineRefs)?F:b.call(this,F,E,void 0,T)),O}function p(b,E){var x=r.parse(E),P=m(x),R=a(this._getId(b.schema));if(Object.keys(b.schema).length===0||P!==R){var F=w(P),O=this._refs[F];if(typeof O=="string")return u.call(this,b,O,x);if(O instanceof h)O.validate||this._compile(O),b=O;else if(O=this._schemas[F],O instanceof h){if(O.validate||this._compile(O),F==w(E))return{schema:O,root:b,baseId:R};b=O}else return;if(!b.schema)return;R=a(this._getId(b.schema))}return s.call(this,x,R,b.schema,b)}function u(b,E,x){var P=p.call(this,b,E);if(P){var R=P.schema,F=P.baseId;b=P.root;var O=this._getId(R);return O&&(F=S(F,O)),s.call(this,x,F,R,b)}}var f=i.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function s(b,E,x,P){if(b.fragment=b.fragment||"",b.fragment.slice(0,1)=="/"){for(var R=b.fragment.split("/"),F=1;F<R.length;F++){var O=R[F];if(O){if(O=i.unescapeFragment(O),x=x[O],x===void 0)break;var T;if(!f[O]&&(T=this._getId(x),T&&(E=S(E,T)),x.$ref)){var j=S(E,x.$ref),G=p.call(this,P,j);G&&(x=G.schema,P=G.root,E=G.baseId)}}}if(x!==void 0&&x!==P.schema)return{schema:x,root:P,baseId:E}}}var n=i.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function c(b,E){if(E===!1)return!1;if(E===void 0||E===!0)return d(b);if(E)return o(b)<=E}function d(b){var E;if(Array.isArray(b)){for(var x=0;x<b.length;x++)if(E=b[x],typeof E=="object"&&!d(E))return!1}else for(var P in b)if(P=="$ref"||(E=b[P],typeof E=="object"&&!d(E)))return!1;return!0}function o(b){var E=0,x;if(Array.isArray(b)){for(var P=0;P<b.length;P++)if(x=b[P],typeof x=="object"&&(E+=o(x)),E==1/0)return 1/0}else for(var R in b){if(R=="$ref")return 1/0;if(n[R])E++;else if(x=b[R],typeof x=="object"&&(E+=o(x)+1),E==1/0)return 1/0}return E}function a(b,E){E!==!1&&(b=w(b));var x=r.parse(b);return m(x)}function m(b){return r.serialize(b).split("#")[0]+"#"}var _=/#\/?$/;function w(b){return b?b.replace(_,""):""}function S(b,E){return E=w(E),r.resolve(b,E)}function C(b){var E=w(this._getId(b)),x={"":E},P={"":a(E,!1)},R={},F=this;return t(b,{allKeys:!0},function(O,T,j,G,k,Z,ae){if(T!==""){var ne=F._getId(O),oe=x[G],ue=P[G]+"/"+k;if(ae!==void 0&&(ue+="/"+(typeof ae=="number"?ae:i.escapeFragment(ae))),typeof ne=="string"){ne=oe=w(oe?r.resolve(oe,ne):ne);var de=F._refs[ne];if(typeof de=="string"&&(de=F._refs[de]),de&&de.schema){if(!e(O,de.schema))throw new Error('id "'+ne+'" resolves to more than one schema')}else if(ne!=w(ue))if(ne[0]=="#"){if(R[ne]&&!e(O,R[ne]))throw new Error('id "'+ne+'" resolves to more than one schema');R[ne]=O}else F._refs[ne]=ue}x[T]=oe,P[T]=ue}}),R}return aa}var oa,Es;function Do(){if(Es)return oa;Es=1;var r=xo();oa={Validation:h(e),MissingRef:h(i)};function e(t){this.message="validation failed",this.errors=t,this.ajv=this.validation=!0}i.message=function(t,l){return"can't resolve reference "+l+" from id "+t};function i(t,l,p){this.message=p||i.message(t,l),this.missingRef=r.url(t,l),this.missingSchema=r.normalizeId(r.fullPath(this.missingRef))}function h(t){return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}return oa}var sa,Cs;function al(){return Cs||(Cs=1,sa=function(r,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var i=typeof e.cycles=="boolean"?e.cycles:!1,h=e.cmp&&(function(l){return function(p){return function(u,f){var s={key:u,value:p[u]},n={key:f,value:p[f]};return l(s,n)}}})(e.cmp),t=[];return(function l(p){if(p&&p.toJSON&&typeof p.toJSON=="function"&&(p=p.toJSON()),p!==void 0){if(typeof p=="number")return isFinite(p)?""+p:"null";if(typeof p!="object")return JSON.stringify(p);var u,f;if(Array.isArray(p)){for(f="[",u=0;u<p.length;u++)u&&(f+=","),f+=l(p[u])||"null";return f+"]"}if(p===null)return"null";if(t.indexOf(p)!==-1){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=t.push(p)-1,n=Object.keys(p).sort(h&&h(p));for(f="",u=0;u<n.length;u++){var c=n[u],d=l(p[c]);d&&(f&&(f+=","),f+=JSON.stringify(c)+":"+d)}return t.splice(s,1),"{"+f+"}"}})(r)}),sa}var ua,xs;function ol(){return xs||(xs=1,ua=function(e,i,h){var t="",l=e.schema.$async===!0,p=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),u=e.self._getId(e.schema);if(e.opts.strictKeywords){var f=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(f){var s="unknown keyword: "+f;if(e.opts.strictKeywords==="log")e.logger.warn(s);else throw new Error(s)}}if(e.isTop&&(t+=" var validate = ",l&&(e.async=!0,t+="async "),t+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",u&&(e.opts.sourceCode||e.opts.processCode)&&(t+=" "+("/*# sourceURL="+u+" */")+" ")),typeof e.schema=="boolean"||!(p||e.schema.$ref)){var i="false schema",n=e.level,c=e.dataLevel,d=e.schema[i],o=e.schemaPath+e.util.getProperty(i),a=e.errSchemaPath+"/"+i,E=!e.opts.allErrors,R,m="data"+(c||""),b="valid"+n;if(e.schema===!1){e.isTop?E=!0:t+=" var "+b+" = false; ";var _=_||[];_.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(R||"false schema")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(a)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'boolean schema is false' "),e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var w=t;t=_.pop(),!e.compositeRule&&E?e.async?t+=" throw new ValidationError(["+w+"]); ":t+=" validate.errors = ["+w+"]; return false; ":t+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?l?t+=" return data; ":t+=" validate.errors = null; return true; ":t+=" var "+b+" = true; ";return e.isTop&&(t+=" }; return validate; "),t}if(e.isTop){var S=e.isTop,n=e.level=0,c=e.dataLevel=0,m="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[""],e.schema.default!==void 0&&e.opts.useDefaults&&e.opts.strictDefaults){var C="default is ignored in the schema root";if(e.opts.strictDefaults==="log")e.logger.warn(C);else throw new Error(C)}t+=" var vErrors = null; ",t+=" var errors = 0;     ",t+=" if (rootData === undefined) rootData = data; "}else{var n=e.level,c=e.dataLevel,m="data"+(c||"");if(u&&(e.baseId=e.resolve.url(e.baseId,u)),l&&!e.async)throw new Error("async schema in sync schema");t+=" var errs_"+n+" = errors;"}var b="valid"+n,E=!e.opts.allErrors,x="",P="",R,F=e.schema.type,O=Array.isArray(F);if(F&&e.opts.nullable&&e.schema.nullable===!0&&(O?F.indexOf("null")==-1&&(F=F.concat("null")):F!="null"&&(F=[F,"null"],O=!0)),O&&F.length==1&&(F=F[0],O=!1),e.schema.$ref&&p){if(e.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');e.opts.extendRefs!==!0&&(p=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(t+=" "+e.RULES.all.$comment.code(e,"$comment")),F){if(e.opts.coerceTypes)var T=e.util.coerceToTypes(e.opts.coerceTypes,F);var j=e.RULES.types[F];if(T||O||j===!0||j&&!Ve(j)){var o=e.schemaPath+".type",a=e.errSchemaPath+"/type",o=e.schemaPath+".type",a=e.errSchemaPath+"/type",G=O?"checkDataTypes":"checkDataType";if(t+=" if ("+e.util[G](F,m,e.opts.strictNumbers,!0)+") { ",T){var k="dataType"+n,Z="coerced"+n;t+=" var "+k+" = typeof "+m+"; var "+Z+" = undefined; ",e.opts.coerceTypes=="array"&&(t+=" if ("+k+" == 'object' && Array.isArray("+m+") && "+m+".length == 1) { "+m+" = "+m+"[0]; "+k+" = typeof "+m+"; if ("+e.util.checkDataType(e.schema.type,m,e.opts.strictNumbers)+") "+Z+" = "+m+"; } "),t+=" if ("+Z+" !== undefined) ; ";var ae=T;if(ae)for(var ne,oe=-1,ue=ae.length-1;oe<ue;)ne=ae[oe+=1],ne=="string"?t+=" else if ("+k+" == 'number' || "+k+" == 'boolean') "+Z+" = '' + "+m+"; else if ("+m+" === null) "+Z+" = ''; ":ne=="number"||ne=="integer"?(t+=" else if ("+k+" == 'boolean' || "+m+" === null || ("+k+" == 'string' && "+m+" && "+m+" == +"+m+" ",ne=="integer"&&(t+=" && !("+m+" % 1)"),t+=")) "+Z+" = +"+m+"; "):ne=="boolean"?t+=" else if ("+m+" === 'false' || "+m+" === 0 || "+m+" === null) "+Z+" = false; else if ("+m+" === 'true' || "+m+" === 1) "+Z+" = true; ":ne=="null"?t+=" else if ("+m+" === '' || "+m+" === 0 || "+m+" === false) "+Z+" = null; ":e.opts.coerceTypes=="array"&&ne=="array"&&(t+=" else if ("+k+" == 'string' || "+k+" == 'number' || "+k+" == 'boolean' || "+m+" == null) "+Z+" = ["+m+"]; ");t+=" else {   ";var _=_||[];_.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(R||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(a)+" , params: { type: '",O?t+=""+F.join(","):t+=""+F,t+="' } ",e.opts.messages!==!1&&(t+=" , message: 'should be ",O?t+=""+F.join(","):t+=""+F,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var w=t;t=_.pop(),!e.compositeRule&&E?e.async?t+=" throw new ValidationError(["+w+"]); ":t+=" validate.errors = ["+w+"]; return false; ":t+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } if ("+Z+" !== undefined) {  ";var de=c?"data"+(c-1||""):"parentData",me=c?e.dataPathArr[c]:"parentDataProperty";t+=" "+m+" = "+Z+"; ",c||(t+="if ("+de+" !== undefined)"),t+=" "+de+"["+me+"] = "+Z+"; } "}else{var _=_||[];_.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(R||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(a)+" , params: { type: '",O?t+=""+F.join(","):t+=""+F,t+="' } ",e.opts.messages!==!1&&(t+=" , message: 'should be ",O?t+=""+F.join(","):t+=""+F,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var w=t;t=_.pop(),!e.compositeRule&&E?e.async?t+=" throw new ValidationError(["+w+"]); ":t+=" validate.errors = ["+w+"]; return false; ":t+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}t+=" } "}}if(e.schema.$ref&&!p)t+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",E&&(t+=" } if (errors === ",S?t+="0":t+="errs_"+n,t+=") { ",P+="}");else{var ee=e.RULES;if(ee){for(var j,_e=-1,Fe=ee.length-1;_e<Fe;)if(j=ee[_e+=1],Ve(j)){if(j.type&&(t+=" if ("+e.util.checkDataType(j.type,m,e.opts.strictNumbers)+") { "),e.opts.useDefaults){if(j.type=="object"&&e.schema.properties){var d=e.schema.properties,te=Object.keys(d),M=te;if(M)for(var $,W=-1,re=M.length-1;W<re;){$=M[W+=1];var Q=d[$];if(Q.default!==void 0){var X=m+e.util.getProperty($);if(e.compositeRule){if(e.opts.strictDefaults){var C="default is ignored for: "+X;if(e.opts.strictDefaults==="log")e.logger.warn(C);else throw new Error(C)}}else t+=" if ("+X+" === undefined ",e.opts.useDefaults=="empty"&&(t+=" || "+X+" === null || "+X+" === '' "),t+=" ) "+X+" = ",e.opts.useDefaults=="shared"?t+=" "+e.useDefault(Q.default)+" ":t+=" "+JSON.stringify(Q.default)+" ",t+="; "}}}else if(j.type=="array"&&Array.isArray(e.schema.items)){var ge=e.schema.items;if(ge){for(var Q,oe=-1,Ee=ge.length-1;oe<Ee;)if(Q=ge[oe+=1],Q.default!==void 0){var X=m+"["+oe+"]";if(e.compositeRule){if(e.opts.strictDefaults){var C="default is ignored for: "+X;if(e.opts.strictDefaults==="log")e.logger.warn(C);else throw new Error(C)}}else t+=" if ("+X+" === undefined ",e.opts.useDefaults=="empty"&&(t+=" || "+X+" === null || "+X+" === '' "),t+=" ) "+X+" = ",e.opts.useDefaults=="shared"?t+=" "+e.useDefault(Q.default)+" ":t+=" "+JSON.stringify(Q.default)+" ",t+="; "}}}}var we=j.rules;if(we){for(var Be,xe=-1,De=we.length-1;xe<De;)if(Be=we[xe+=1],it(Be)){var et=Be.code(e,Be.keyword,j.type);et&&(t+=" "+et+" ",E&&(x+="}"))}}if(E&&(t+=" "+x+" ",x=""),j.type&&(t+=" } ",F&&F===j.type&&!T)){t+=" else { ";var o=e.schemaPath+".type",a=e.errSchemaPath+"/type",_=_||[];_.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(R||"type")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(a)+" , params: { type: '",O?t+=""+F.join(","):t+=""+F,t+="' } ",e.opts.messages!==!1&&(t+=" , message: 'should be ",O?t+=""+F.join(","):t+=""+F,t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),t+=" } "):t+=" {} ";var w=t;t=_.pop(),!e.compositeRule&&E?e.async?t+=" throw new ValidationError(["+w+"]); ":t+=" validate.errors = ["+w+"]; return false; ":t+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } "}E&&(t+=" if (errors === ",S?t+="0":t+="errs_"+n,t+=") { ",P+="}")}}}E&&(t+=" "+P+" "),S?(l?(t+=" if (errors === 0) return data;           ",t+=" else throw new ValidationError(vErrors); "):(t+=" validate.errors = vErrors; ",t+=" return errors === 0;       "),t+=" }; return validate;"):t+=" var "+b+" = errors === errs_"+n+";";function Ve(Le){for(var je=Le.rules,rt=0;rt<je.length;rt++)if(it(je[rt]))return!0}function it(Le){return e.schema[Le.keyword]!==void 0||Le.implements&&Qe(Le)}function Qe(Le){for(var je=Le.implements,rt=0;rt<je.length;rt++)if(e.schema[je[rt]]!==void 0)return!0}return t}),ua}var ca,Ds;function Fd(){if(Ds)return ca;Ds=1;var r=xo(),e=En(),i=Do(),h=al(),t=ol(),l=e.ucs2length,p=Co(),u=i.Validation;ca=f;function f(w,S,C,b){var E=this,x=this._opts,P=[void 0],R={},F=[],O={},T=[],j={},G=[];S=S||{schema:w,refVal:P,refs:R};var k=s.call(this,w,S,b),Z=this._compilations[k.index];if(k.compiling)return Z.callValidate=de;var ae=this._formats,ne=this.RULES;try{var oe=me(w,S,C,b);Z.validate=oe;var ue=Z.callValidate;return ue&&(ue.schema=oe.schema,ue.errors=null,ue.refs=oe.refs,ue.refVal=oe.refVal,ue.root=oe.root,ue.$async=oe.$async,x.sourceCode&&(ue.source=oe.source)),oe}finally{n.call(this,w,S,b)}function de(){var Q=Z.validate,X=Q.apply(this,arguments);return de.errors=Q.errors,X}function me(Q,X,ge,Ee){var we=!X||X&&X.schema==Q;if(X.schema!=S.schema)return f.call(E,Q,X,ge,Ee);var Be=Q.$async===!0,xe=t({isTop:!0,schema:Q,isRoot:we,baseId:Ee,root:X,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:i.MissingRef,RULES:ne,validate:t,util:e,resolve:r,resolveRef:ee,usePattern:$,useDefault:W,useCustomRule:re,opts:x,formats:ae,logger:E.logger,self:E});xe=_(P,a)+_(F,d)+_(T,o)+_(G,m)+xe,x.processCode&&(xe=x.processCode(xe,Q));var De;try{var et=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",xe);De=et(E,ne,ae,S,P,T,G,p,l,u),P[0]=De}catch(Ve){throw E.logger.error("Error compiling schema, function code:",xe),Ve}return De.schema=Q,De.errors=null,De.refs=R,De.refVal=P,De.root=we?De:X,Be&&(De.$async=!0),x.sourceCode===!0&&(De.source={code:xe,patterns:F,defaults:T}),De}function ee(Q,X,ge){X=r.url(Q,X);var Ee=R[X],we,Be;if(Ee!==void 0)return we=P[Ee],Be="refVal["+Ee+"]",M(we,Be);if(!ge&&S.refs){var xe=S.refs[X];if(xe!==void 0)return we=S.refVal[xe],Be=_e(X,we),M(we,Be)}Be=_e(X);var De=r.call(E,me,S,X);if(De===void 0){var et=C&&C[X];et&&(De=r.inlineRef(et,x.inlineRefs)?et:f.call(E,et,S,C,Q))}if(De===void 0)Fe(X);else return te(X,De),M(De,Be)}function _e(Q,X){var ge=P.length;return P[ge]=X,R[Q]=ge,"refVal"+ge}function Fe(Q){delete R[Q]}function te(Q,X){var ge=R[Q];P[ge]=X}function M(Q,X){return typeof Q=="object"||typeof Q=="boolean"?{code:X,schema:Q,inline:!0}:{code:X,$async:Q&&!!Q.$async}}function $(Q){var X=O[Q];return X===void 0&&(X=O[Q]=F.length,F[X]=Q),"pattern"+X}function W(Q){switch(typeof Q){case"boolean":case"number":return""+Q;case"string":return e.toQuotedString(Q);case"object":if(Q===null)return"null";var X=h(Q),ge=j[X];return ge===void 0&&(ge=j[X]=T.length,T[ge]=Q),"default"+ge}}function re(Q,X,ge,Ee){if(E._opts.validateSchema!==!1){var we=Q.definition.dependencies;if(we&&!we.every(function(je){return Object.prototype.hasOwnProperty.call(ge,je)}))throw new Error("parent schema must have all required keywords: "+we.join(","));var Be=Q.definition.validateSchema;if(Be){var xe=Be(X);if(!xe){var De="keyword schema is invalid: "+E.errorsText(Be.errors);if(E._opts.validateSchema=="log")E.logger.error(De);else throw new Error(De)}}}var et=Q.definition.compile,Ve=Q.definition.inline,it=Q.definition.macro,Qe;if(et)Qe=et.call(E,X,ge,Ee);else if(it)Qe=it.call(E,X,ge,Ee),x.validateSchema!==!1&&E.validateSchema(Qe,!0);else if(Ve)Qe=Ve.call(E,Ee,Q.keyword,X,ge);else if(Qe=Q.definition.validate,!Qe)return;if(Qe===void 0)throw new Error('custom keyword "'+Q.keyword+'"failed to compile');var Le=G.length;return G[Le]=Qe,{code:"customRule"+Le,validate:Qe}}}function s(w,S,C){var b=c.call(this,w,S,C);return b>=0?{index:b,compiling:!0}:(b=this._compilations.length,this._compilations[b]={schema:w,root:S,baseId:C},{index:b,compiling:!1})}function n(w,S,C){var b=c.call(this,w,S,C);b>=0&&this._compilations.splice(b,1)}function c(w,S,C){for(var b=0;b<this._compilations.length;b++){var E=this._compilations[b];if(E.schema==w&&E.root==S&&E.baseId==C)return b}return-1}function d(w,S){return"var pattern"+w+" = new RegExp("+e.toQuotedString(S[w])+");"}function o(w){return"var default"+w+" = defaults["+w+"];"}function a(w,S){return S[w]===void 0?"":"var refVal"+w+" = refVal["+w+"];"}function m(w){return"var customRule"+w+" = customRules["+w+"];"}function _(w,S){if(!w.length)return"";for(var C="",b=0;b<w.length;b++)C+=S(b,w);return C}return ca}var la={exports:{}},Ps;function Td(){if(Ps)return la.exports;Ps=1;var r=la.exports=function(){this._cache={}};return r.prototype.put=function(i,h){this._cache[i]=h},r.prototype.get=function(i){return this._cache[i]},r.prototype.del=function(i){delete this._cache[i]},r.prototype.clear=function(){this._cache={}},la.exports}var fa,Ms;function $d(){if(Ms)return fa;Ms=1;var r=En(),e=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,i=[0,31,28,31,30,31,30,31,31,30,31,30,31],h=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,t=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,l=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,p=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,u=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,f=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,s=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,n=/^(?:\/(?:[^~/]|~0|~1)*)*$/,c=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,d=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;fa=o;function o(P){return P=P=="full"?"full":"fast",r.copy(o[P])}o.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":u,url:f,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:t,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:x,uuid:s,"json-pointer":n,"json-pointer-uri-fragment":c,"relative-json-pointer":d},o.full={date:m,time:_,"date-time":S,uri:b,"uri-reference":p,"uri-template":u,url:f,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:t,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:x,uuid:s,"json-pointer":n,"json-pointer-uri-fragment":c,"relative-json-pointer":d};function a(P){return P%4===0&&(P%100!==0||P%400===0)}function m(P){var R=P.match(e);if(!R)return!1;var F=+R[1],O=+R[2],T=+R[3];return O>=1&&O<=12&&T>=1&&T<=(O==2&&a(F)?29:i[O])}function _(P,R){var F=P.match(h);if(!F)return!1;var O=F[1],T=F[2],j=F[3],G=F[5];return(O<=23&&T<=59&&j<=59||O==23&&T==59&&j==60)&&(!R||G)}var w=/t|\s/i;function S(P){var R=P.split(w);return R.length==2&&m(R[0])&&_(R[1],!0)}var C=/\/|:/;function b(P){return C.test(P)&&l.test(P)}var E=/[^\\]\\Z/;function x(P){if(E.test(P))return!1;try{return new RegExp(P),!0}catch{return!1}}return fa}var da,Is;function Nd(){return Is||(Is=1,da=function(e,i,h){var t=" ",l=e.level,p=e.dataLevel,u=e.schema[i],f=e.errSchemaPath+"/"+i,s=!e.opts.allErrors,n="data"+(p||""),c="valid"+l,d,o;if(u=="#"||u=="#/")e.isRoot?(d=e.async,o="validate"):(d=e.root.schema.$async===!0,o="root.refVal[0]");else{var a=e.resolveRef(e.baseId,u,e.isRoot);if(a===void 0){var m=e.MissingRefError.message(e.baseId,u);if(e.opts.missingRefs=="fail"){e.logger.error(m);var _=_||[];_.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(f)+" , params: { ref: '"+e.util.escapeQuotes(u)+"' } ",e.opts.messages!==!1&&(t+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(u)+"' "),e.opts.verbose&&(t+=" , schema: "+e.util.toQuotedString(u)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+n+" "),t+=" } "):t+=" {} ";var w=t;t=_.pop(),!e.compositeRule&&s?e.async?t+=" throw new ValidationError(["+w+"]); ":t+=" validate.errors = ["+w+"]; return false; ":t+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s&&(t+=" if (false) { ")}else if(e.opts.missingRefs=="ignore")e.logger.warn(m),s&&(t+=" if (true) { ");else throw new e.MissingRefError(e.baseId,u,m)}else if(a.inline){var S=e.util.copy(e);S.level++;var C="valid"+S.level;S.schema=a.schema,S.schemaPath="",S.errSchemaPath=u;var b=e.validate(S).replace(/validate\.schema/g,a.code);t+=" "+b+" ",s&&(t+=" if ("+C+") { ")}else d=a.$async===!0||e.async&&a.$async!==!1,o=a.code}if(o){var _=_||[];_.push(t),t="",e.opts.passContext?t+=" "+o+".call(this, ":t+=" "+o+"( ",t+=" "+n+", (dataPath || '')",e.errorPath!='""'&&(t+=" + "+e.errorPath);var E=p?"data"+(p-1||""):"parentData",x=p?e.dataPathArr[p]:"parentDataProperty";t+=" , "+E+" , "+x+", rootData)  ";var P=t;if(t=_.pop(),d){if(!e.async)throw new Error("async schema referenced by sync schema");s&&(t+=" var "+c+"; "),t+=" try { await "+P+"; ",s&&(t+=" "+c+" = true; "),t+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",s&&(t+=" "+c+" = false; "),t+=" } ",s&&(t+=" if ("+c+") { ")}else t+=" if (!"+P+") { if (vErrors === null) vErrors = "+o+".errors; else vErrors = vErrors.concat("+o+".errors); errors = vErrors.length; } ",s&&(t+=" else { ")}return t}),da}var ha,Os;function Vd(){return Os||(Os=1,ha=function(e,i,h){var t=" ",l=e.schema[i],p=e.schemaPath+e.util.getProperty(i),u=e.errSchemaPath+"/"+i,f=!e.opts.allErrors,s=e.util.copy(e),n="";s.level++;var c="valid"+s.level,d=s.baseId,o=!0,a=l;if(a)for(var m,_=-1,w=a.length-1;_<w;)m=a[_+=1],(e.opts.strictKeywords?typeof m=="object"&&Object.keys(m).length>0||m===!1:e.util.schemaHasRules(m,e.RULES.all))&&(o=!1,s.schema=m,s.schemaPath=p+"["+_+"]",s.errSchemaPath=u+"/"+_,t+="  "+e.validate(s)+" ",s.baseId=d,f&&(t+=" if ("+c+") { ",n+="}"));return f&&(o?t+=" if (true) { ":t+=" "+n.slice(0,-1)+" "),t}),ha}var va,Rs;function jd(){return Rs||(Rs=1,va=function(e,i,h){var t=" ",l=e.level,p=e.dataLevel,u=e.schema[i],f=e.schemaPath+e.util.getProperty(i),s=e.errSchemaPath+"/"+i,n=!e.opts.allErrors,c="data"+(p||""),d="valid"+l,o="errs__"+l,a=e.util.copy(e),m="";a.level++;var _="valid"+a.level,w=u.every(function(R){return e.opts.strictKeywords?typeof R=="object"&&Object.keys(R).length>0||R===!1:e.util.schemaHasRules(R,e.RULES.all)});if(w){var S=a.baseId;t+=" var "+o+" = errors; var "+d+" = false;  ";var C=e.compositeRule;e.compositeRule=a.compositeRule=!0;var b=u;if(b)for(var E,x=-1,P=b.length-1;x<P;)E=b[x+=1],a.schema=E,a.schemaPath=f+"["+x+"]",a.errSchemaPath=s+"/"+x,t+="  "+e.validate(a)+" ",a.baseId=S,t+=" "+d+" = "+d+" || "+_+"; if (!"+d+") { ",m+="}";e.compositeRule=a.compositeRule=C,t+=" "+m+" if (!"+d+") {   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(s)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&n&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),t+=" } else {  errors = "+o+"; if (vErrors !== null) { if ("+o+") vErrors.length = "+o+"; else vErrors = null; } ",e.opts.allErrors&&(t+=" } ")}else n&&(t+=" if (true) { ");return t}),va}var pa,Ls;function qd(){return Ls||(Ls=1,pa=function(e,i,h){var t=" ",l=e.schema[i],p=e.errSchemaPath+"/"+i;e.opts.allErrors;var u=e.util.toQuotedString(l);return e.opts.$comment===!0?t+=" console.log("+u+");":typeof e.opts.$comment=="function"&&(t+=" self._opts.$comment("+u+", "+e.util.toQuotedString(p)+", validate.root.schema);"),t}),pa}var ma,Bs;function kd(){return Bs||(Bs=1,ma=function(e,i,h){var t=" ",l=e.level,p=e.dataLevel,u=e.schema[i],f=e.schemaPath+e.util.getProperty(i),s=e.errSchemaPath+"/"+i,n=!e.opts.allErrors,c="data"+(p||""),d="valid"+l,o=e.opts.$data&&u&&u.$data;o&&(t+=" var schema"+l+" = "+e.util.getData(u.$data,p,e.dataPathArr)+"; "),o||(t+=" var schema"+l+" = validate.schema"+f+";"),t+="var "+d+" = equal("+c+", schema"+l+"); if (!"+d+") {   ";var a=a||[];a.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(s)+" , params: { allowedValue: schema"+l+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be equal to constant' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),t+=" } "):t+=" {} ";var m=t;return t=a.pop(),!e.compositeRule&&n?e.async?t+=" throw new ValidationError(["+m+"]); ":t+=" validate.errors = ["+m+"]; return false; ":t+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" }",n&&(t+=" else { "),t}),ma}var ga,As;function Ud(){return As||(As=1,ga=function(e,i,h){var t=" ",l=e.level,p=e.dataLevel,u=e.schema[i],f=e.schemaPath+e.util.getProperty(i),s=e.errSchemaPath+"/"+i,n=!e.opts.allErrors,c="data"+(p||""),d="valid"+l,o="errs__"+l,a=e.util.copy(e),m="";a.level++;var _="valid"+a.level,w="i"+l,S=a.dataLevel=e.dataLevel+1,C="data"+S,b=e.baseId,E=e.opts.strictKeywords?typeof u=="object"&&Object.keys(u).length>0||u===!1:e.util.schemaHasRules(u,e.RULES.all);if(t+="var "+o+" = errors;var "+d+";",E){var x=e.compositeRule;e.compositeRule=a.compositeRule=!0,a.schema=u,a.schemaPath=f,a.errSchemaPath=s,t+=" var "+_+" = false; for (var "+w+" = 0; "+w+" < "+c+".length; "+w+"++) { ",a.errorPath=e.util.getPathExpr(e.errorPath,w,e.opts.jsonPointers,!0);var P=c+"["+w+"]";a.dataPathArr[S]=w;var R=e.validate(a);a.baseId=b,e.util.varOccurences(R,C)<2?t+=" "+e.util.varReplace(R,C,P)+" ":t+=" var "+C+" = "+P+"; "+R+" ",t+=" if ("+_+") break; }  ",e.compositeRule=a.compositeRule=x,t+=" "+m+" if (!"+_+") {"}else t+=" if ("+c+".length == 0) {";var F=F||[];F.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(s)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should contain a valid item' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),t+=" } "):t+=" {} ";var O=t;return t=F.pop(),!e.compositeRule&&n?e.async?t+=" throw new ValidationError(["+O+"]); ":t+=" validate.errors = ["+O+"]; return false; ":t+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { ",E&&(t+="  errors = "+o+"; if (vErrors !== null) { if ("+o+") vErrors.length = "+o+"; else vErrors = null; } "),e.opts.allErrors&&(t+=" } "),t}),ga}var _a,Fs;function Wd(){return Fs||(Fs=1,_a=function(e,i,h){var t=" ",l=e.level,p=e.dataLevel,u=e.schema[i],f=e.schemaPath+e.util.getProperty(i),s=e.errSchemaPath+"/"+i,n=!e.opts.allErrors,c="data"+(p||""),d="errs__"+l,o=e.util.copy(e),a="";o.level++;var m="valid"+o.level,_={},w={},S=e.opts.ownProperties;for(x in u)if(x!="__proto__"){var C=u[x],b=Array.isArray(C)?w:_;b[x]=C}t+="var "+d+" = errors;";var E=e.errorPath;t+="var missing"+l+";";for(var x in w)if(b=w[x],b.length){if(t+=" if ( "+c+e.util.getProperty(x)+" !== undefined ",S&&(t+=" && Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(x)+"') "),n){t+=" && ( ";var P=b;if(P)for(var R,F=-1,O=P.length-1;F<O;){R=P[F+=1],F&&(t+=" || ");var T=e.util.getProperty(R),j=c+T;t+=" ( ( "+j+" === undefined ",S&&(t+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(R)+"') "),t+=") && (missing"+l+" = "+e.util.toQuotedString(e.opts.jsonPointers?R:T)+") ) "}t+=")) {  ";var G="missing"+l,k="' + "+G+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(E,G,!0):E+" + "+G);var Z=Z||[];Z.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(s)+" , params: { property: '"+e.util.escapeQuotes(x)+"', missingProperty: '"+k+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(b.length==1?b[0]:b.join(", "))+"' } ",e.opts.messages!==!1&&(t+=" , message: 'should have ",b.length==1?t+="property "+e.util.escapeQuotes(b[0]):t+="properties "+e.util.escapeQuotes(b.join(", ")),t+=" when property "+e.util.escapeQuotes(x)+" is present' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),t+=" } "):t+=" {} ";var ae=t;t=Z.pop(),!e.compositeRule&&n?e.async?t+=" throw new ValidationError(["+ae+"]); ":t+=" validate.errors = ["+ae+"]; return false; ":t+=" var err = "+ae+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{t+=" ) { ";var ne=b;if(ne)for(var R,oe=-1,ue=ne.length-1;oe<ue;){R=ne[oe+=1];var T=e.util.getProperty(R),k=e.util.escapeQuotes(R),j=c+T;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(E,R,e.opts.jsonPointers)),t+=" if ( "+j+" === undefined ",S&&(t+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(R)+"') "),t+=") {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(s)+" , params: { property: '"+e.util.escapeQuotes(x)+"', missingProperty: '"+k+"', depsCount: "+b.length+", deps: '"+e.util.escapeQuotes(b.length==1?b[0]:b.join(", "))+"' } ",e.opts.messages!==!1&&(t+=" , message: 'should have ",b.length==1?t+="property "+e.util.escapeQuotes(b[0]):t+="properties "+e.util.escapeQuotes(b.join(", ")),t+=" when property "+e.util.escapeQuotes(x)+" is present' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}t+=" }   ",n&&(a+="}",t+=" else { ")}e.errorPath=E;var de=o.baseId;for(var x in _){var C=_[x];(e.opts.strictKeywords?typeof C=="object"&&Object.keys(C).length>0||C===!1:e.util.schemaHasRules(C,e.RULES.all))&&(t+=" "+m+" = true; if ( "+c+e.util.getProperty(x)+" !== undefined ",S&&(t+=" && Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(x)+"') "),t+=") { ",o.schema=C,o.schemaPath=f+e.util.getProperty(x),o.errSchemaPath=s+"/"+e.util.escapeFragment(x),t+="  "+e.validate(o)+" ",o.baseId=de,t+=" }  ",n&&(t+=" if ("+m+") { ",a+="}"))}return n&&(t+="   "+a+" if ("+d+" == errors) {"),t}),_a}var ya,Ts;function Hd(){return Ts||(Ts=1,ya=function(e,i,h){var t=" ",l=e.level,p=e.dataLevel,u=e.schema[i],f=e.schemaPath+e.util.getProperty(i),s=e.errSchemaPath+"/"+i,n=!e.opts.allErrors,c="data"+(p||""),d="valid"+l,o=e.opts.$data&&u&&u.$data;o&&(t+=" var schema"+l+" = "+e.util.getData(u.$data,p,e.dataPathArr)+"; ");var a="i"+l,m="schema"+l;o||(t+=" var "+m+" = validate.schema"+f+";"),t+="var "+d+";",o&&(t+=" if (schema"+l+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+l+")) "+d+" = false; else {"),t+=""+d+" = false;for (var "+a+"=0; "+a+"<"+m+".length; "+a+"++) if (equal("+c+", "+m+"["+a+"])) { "+d+" = true; break; }",o&&(t+="  }  "),t+=" if (!"+d+") {   ";var _=_||[];_.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(s)+" , params: { allowedValues: schema"+l+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),t+=" } "):t+=" {} ";var w=t;return t=_.pop(),!e.compositeRule&&n?e.async?t+=" throw new ValidationError(["+w+"]); ":t+=" validate.errors = ["+w+"]; return false; ":t+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" }",n&&(t+=" else { "),t}),ya}var ba,$s;function zd(){return $s||($s=1,ba=function(e,i,h){var t=" ",l=e.level,p=e.dataLevel,u=e.schema[i],f=e.schemaPath+e.util.getProperty(i),s=e.errSchemaPath+"/"+i,n=!e.opts.allErrors,c="data"+(p||"");if(e.opts.format===!1)return n&&(t+=" if (true) { "),t;var d=e.opts.$data&&u&&u.$data,o;d?(t+=" var schema"+l+" = "+e.util.getData(u.$data,p,e.dataPathArr)+"; ",o="schema"+l):o=u;var a=e.opts.unknownFormats,m=Array.isArray(a);if(d){var _="format"+l,w="isObject"+l,S="formatType"+l;t+=" var "+_+" = formats["+o+"]; var "+w+" = typeof "+_+" == 'object' && !("+_+" instanceof RegExp) && "+_+".validate; var "+S+" = "+w+" && "+_+".type || 'string'; if ("+w+") { ",e.async&&(t+=" var async"+l+" = "+_+".async; "),t+=" "+_+" = "+_+".validate; } if (  ",d&&(t+=" ("+o+" !== undefined && typeof "+o+" != 'string') || "),t+=" (",a!="ignore"&&(t+=" ("+o+" && !"+_+" ",m&&(t+=" && self._opts.unknownFormats.indexOf("+o+") == -1 "),t+=") || "),t+=" ("+_+" && "+S+" == '"+h+"' && !(typeof "+_+" == 'function' ? ",e.async?t+=" (async"+l+" ? await "+_+"("+c+") : "+_+"("+c+")) ":t+=" "+_+"("+c+") ",t+=" : "+_+".test("+c+"))))) {"}else{var _=e.formats[u];if(!_){if(a=="ignore")return e.logger.warn('unknown format "'+u+'" ignored in schema at path "'+e.errSchemaPath+'"'),n&&(t+=" if (true) { "),t;if(m&&a.indexOf(u)>=0)return n&&(t+=" if (true) { "),t;throw new Error('unknown format "'+u+'" is used in schema at path "'+e.errSchemaPath+'"')}var w=typeof _=="object"&&!(_ instanceof RegExp)&&_.validate,S=w&&_.type||"string";if(w){var C=_.async===!0;_=_.validate}if(S!=h)return n&&(t+=" if (true) { "),t;if(C){if(!e.async)throw new Error("async format in sync schema");var b="formats"+e.util.getProperty(u)+".validate";t+=" if (!(await "+b+"("+c+"))) { "}else{t+=" if (! ";var b="formats"+e.util.getProperty(u);w&&(b+=".validate"),typeof _=="function"?t+=" "+b+"("+c+") ":t+=" "+b+".test("+c+") ",t+=") { "}}var E=E||[];E.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(s)+" , params: { format:  ",d?t+=""+o:t+=""+e.util.toQuotedString(u),t+="  } ",e.opts.messages!==!1&&(t+=` , message: 'should match format "`,d?t+="' + "+o+" + '":t+=""+e.util.escapeQuotes(u),t+=`"' `),e.opts.verbose&&(t+=" , schema:  ",d?t+="validate.schema"+f:t+=""+e.util.toQuotedString(u),t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),t+=" } "):t+=" {} ";var x=t;return t=E.pop(),!e.compositeRule&&n?e.async?t+=" throw new ValidationError(["+x+"]); ":t+=" validate.errors = ["+x+"]; return false; ":t+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",n&&(t+=" else { "),t}),ba}var wa,Ns;function Gd(){return Ns||(Ns=1,wa=function(e,i,h){var t=" ",l=e.level,p=e.dataLevel,u=e.schema[i],f=e.schemaPath+e.util.getProperty(i),s=e.errSchemaPath+"/"+i,n=!e.opts.allErrors,c="data"+(p||""),d="valid"+l,o="errs__"+l,a=e.util.copy(e);a.level++;var m="valid"+a.level,_=e.schema.then,w=e.schema.else,S=_!==void 0&&(e.opts.strictKeywords?typeof _=="object"&&Object.keys(_).length>0||_===!1:e.util.schemaHasRules(_,e.RULES.all)),C=w!==void 0&&(e.opts.strictKeywords?typeof w=="object"&&Object.keys(w).length>0||w===!1:e.util.schemaHasRules(w,e.RULES.all)),b=a.baseId;if(S||C){var E;a.createErrors=!1,a.schema=u,a.schemaPath=f,a.errSchemaPath=s,t+=" var "+o+" = errors; var "+d+" = true;  ";var x=e.compositeRule;e.compositeRule=a.compositeRule=!0,t+="  "+e.validate(a)+" ",a.baseId=b,a.createErrors=!0,t+="  errors = "+o+"; if (vErrors !== null) { if ("+o+") vErrors.length = "+o+"; else vErrors = null; }  ",e.compositeRule=a.compositeRule=x,S?(t+=" if ("+m+") {  ",a.schema=e.schema.then,a.schemaPath=e.schemaPath+".then",a.errSchemaPath=e.errSchemaPath+"/then",t+="  "+e.validate(a)+" ",a.baseId=b,t+=" "+d+" = "+m+"; ",S&&C?(E="ifClause"+l,t+=" var "+E+" = 'then'; "):E="'then'",t+=" } ",C&&(t+=" else { ")):t+=" if (!"+m+") { ",C&&(a.schema=e.schema.else,a.schemaPath=e.schemaPath+".else",a.errSchemaPath=e.errSchemaPath+"/else",t+="  "+e.validate(a)+" ",a.baseId=b,t+=" "+d+" = "+m+"; ",S&&C?(E="ifClause"+l,t+=" var "+E+" = 'else'; "):E="'else'",t+=" } "),t+=" if (!"+d+") {   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(s)+" , params: { failingKeyword: "+E+" } ",e.opts.messages!==!1&&(t+=` , message: 'should match "' + `+E+` + '" schema' `),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&n&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),t+=" }   ",n&&(t+=" else { ")}else n&&(t+=" if (true) { ");return t}),wa}var Sa,Vs;function Kd(){return Vs||(Vs=1,Sa=function(e,i,h){var t=" ",l=e.level,p=e.dataLevel,u=e.schema[i],f=e.schemaPath+e.util.getProperty(i),s=e.errSchemaPath+"/"+i,n=!e.opts.allErrors,c="data"+(p||""),d="valid"+l,o="errs__"+l,a=e.util.copy(e),m="";a.level++;var _="valid"+a.level,w="i"+l,S=a.dataLevel=e.dataLevel+1,C="data"+S,b=e.baseId;if(t+="var "+o+" = errors;var "+d+";",Array.isArray(u)){var E=e.schema.additionalItems;if(E===!1){t+=" "+d+" = "+c+".length <= "+u.length+"; ";var x=s;s=e.errSchemaPath+"/additionalItems",t+="  if (!"+d+") {   ";var P=P||[];P.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(s)+" , params: { limit: "+u.length+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have more than "+u.length+" items' "),e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),t+=" } "):t+=" {} ";var R=t;t=P.pop(),!e.compositeRule&&n?e.async?t+=" throw new ValidationError(["+R+"]); ":t+=" validate.errors = ["+R+"]; return false; ":t+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",s=x,n&&(m+="}",t+=" else { ")}var F=u;if(F){for(var O,T=-1,j=F.length-1;T<j;)if(O=F[T+=1],e.opts.strictKeywords?typeof O=="object"&&Object.keys(O).length>0||O===!1:e.util.schemaHasRules(O,e.RULES.all)){t+=" "+_+" = true; if ("+c+".length > "+T+") { ";var G=c+"["+T+"]";a.schema=O,a.schemaPath=f+"["+T+"]",a.errSchemaPath=s+"/"+T,a.errorPath=e.util.getPathExpr(e.errorPath,T,e.opts.jsonPointers,!0),a.dataPathArr[S]=T;var k=e.validate(a);a.baseId=b,e.util.varOccurences(k,C)<2?t+=" "+e.util.varReplace(k,C,G)+" ":t+=" var "+C+" = "+G+"; "+k+" ",t+=" }  ",n&&(t+=" if ("+_+") { ",m+="}")}}if(typeof E=="object"&&(e.opts.strictKeywords?typeof E=="object"&&Object.keys(E).length>0||E===!1:e.util.schemaHasRules(E,e.RULES.all))){a.schema=E,a.schemaPath=e.schemaPath+".additionalItems",a.errSchemaPath=e.errSchemaPath+"/additionalItems",t+=" "+_+" = true; if ("+c+".length > "+u.length+") {  for (var "+w+" = "+u.length+"; "+w+" < "+c+".length; "+w+"++) { ",a.errorPath=e.util.getPathExpr(e.errorPath,w,e.opts.jsonPointers,!0);var G=c+"["+w+"]";a.dataPathArr[S]=w;var k=e.validate(a);a.baseId=b,e.util.varOccurences(k,C)<2?t+=" "+e.util.varReplace(k,C,G)+" ":t+=" var "+C+" = "+G+"; "+k+" ",n&&(t+=" if (!"+_+") break; "),t+=" } }  ",n&&(t+=" if ("+_+") { ",m+="}")}}else if(e.opts.strictKeywords?typeof u=="object"&&Object.keys(u).length>0||u===!1:e.util.schemaHasRules(u,e.RULES.all)){a.schema=u,a.schemaPath=f,a.errSchemaPath=s,t+="  for (var "+w+" = 0; "+w+" < "+c+".length; "+w+"++) { ",a.errorPath=e.util.getPathExpr(e.errorPath,w,e.opts.jsonPointers,!0);var G=c+"["+w+"]";a.dataPathArr[S]=w;var k=e.validate(a);a.baseId=b,e.util.varOccurences(k,C)<2?t+=" "+e.util.varReplace(k,C,G)+" ":t+=" var "+C+" = "+G+"; "+k+" ",n&&(t+=" if (!"+_+") break; "),t+=" }"}return n&&(t+=" "+m+" if ("+o+" == errors) {"),t}),Sa}var Ea,js;function qs(){return js||(js=1,Ea=function(e,i,h){var t=" ",l=e.level,p=e.dataLevel,u=e.schema[i],f=e.schemaPath+e.util.getProperty(i),s=e.errSchemaPath+"/"+i,n=!e.opts.allErrors,b,c="data"+(p||""),d=e.opts.$data&&u&&u.$data,o;d?(t+=" var schema"+l+" = "+e.util.getData(u.$data,p,e.dataPathArr)+"; ",o="schema"+l):o=u;var a=i=="maximum",m=a?"exclusiveMaximum":"exclusiveMinimum",_=e.schema[m],w=e.opts.$data&&_&&_.$data,S=a?"<":">",C=a?">":"<",b=void 0;if(!(d||typeof u=="number"||u===void 0))throw new Error(i+" must be number");if(!(w||_===void 0||typeof _=="number"||typeof _=="boolean"))throw new Error(m+" must be number or boolean");if(w){var E=e.util.getData(_.$data,p,e.dataPathArr),x="exclusive"+l,P="exclType"+l,R="exclIsNumber"+l,F="op"+l,O="' + "+F+" + '";t+=" var schemaExcl"+l+" = "+E+"; ",E="schemaExcl"+l,t+=" var "+x+"; var "+P+" = typeof "+E+"; if ("+P+" != 'boolean' && "+P+" != 'undefined' && "+P+" != 'number') { ";var b=m,T=T||[];T.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(b||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(s)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: '"+m+" should be boolean' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),t+=" } "):t+=" {} ";var j=t;t=T.pop(),!e.compositeRule&&n?e.async?t+=" throw new ValidationError(["+j+"]); ":t+=" validate.errors = ["+j+"]; return false; ":t+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else if ( ",d&&(t+=" ("+o+" !== undefined && typeof "+o+" != 'number') || "),t+=" "+P+" == 'number' ? ( ("+x+" = "+o+" === undefined || "+E+" "+S+"= "+o+") ? "+c+" "+C+"= "+E+" : "+c+" "+C+" "+o+" ) : ( ("+x+" = "+E+" === true) ? "+c+" "+C+"= "+o+" : "+c+" "+C+" "+o+" ) || "+c+" !== "+c+") { var op"+l+" = "+x+" ? '"+S+"' : '"+S+"='; ",u===void 0&&(b=m,s=e.errSchemaPath+"/"+m,o=E,d=w)}else{var R=typeof _=="number",O=S;if(R&&d){var F="'"+O+"'";t+=" if ( ",d&&(t+=" ("+o+" !== undefined && typeof "+o+" != 'number') || "),t+=" ( "+o+" === undefined || "+_+" "+S+"= "+o+" ? "+c+" "+C+"= "+_+" : "+c+" "+C+" "+o+" ) || "+c+" !== "+c+") { "}else{R&&u===void 0?(x=!0,b=m,s=e.errSchemaPath+"/"+m,o=_,C+="="):(R&&(o=Math[a?"min":"max"](_,u)),_===(R?o:!0)?(x=!0,b=m,s=e.errSchemaPath+"/"+m,C+="="):(x=!1,O+="="));var F="'"+O+"'";t+=" if ( ",d&&(t+=" ("+o+" !== undefined && typeof "+o+" != 'number') || "),t+=" "+c+" "+C+" "+o+" || "+c+" !== "+c+") { "}}b=b||i;var T=T||[];T.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(b||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(s)+" , params: { comparison: "+F+", limit: "+o+", exclusive: "+x+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be "+O+" ",d?t+="' + "+o:t+=""+o+"'"),e.opts.verbose&&(t+=" , schema:  ",d?t+="validate.schema"+f:t+=""+u,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),t+=" } "):t+=" {} ";var j=t;return t=T.pop(),!e.compositeRule&&n?e.async?t+=" throw new ValidationError(["+j+"]); ":t+=" validate.errors = ["+j+"]; return false; ":t+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",n&&(t+=" else { "),t}),Ea}var Ca,ks;function Us(){return ks||(ks=1,Ca=function(e,i,h){var t=" ",l=e.level,p=e.dataLevel,u=e.schema[i],f=e.schemaPath+e.util.getProperty(i),s=e.errSchemaPath+"/"+i,n=!e.opts.allErrors,m,c="data"+(p||""),d=e.opts.$data&&u&&u.$data,o;if(d?(t+=" var schema"+l+" = "+e.util.getData(u.$data,p,e.dataPathArr)+"; ",o="schema"+l):o=u,!(d||typeof u=="number"))throw new Error(i+" must be number");var a=i=="maxItems"?">":"<";t+="if ( ",d&&(t+=" ("+o+" !== undefined && typeof "+o+" != 'number') || "),t+=" "+c+".length "+a+" "+o+") { ";var m=i,_=_||[];_.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(m||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(s)+" , params: { limit: "+o+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have ",i=="maxItems"?t+="more":t+="fewer",t+=" than ",d?t+="' + "+o+" + '":t+=""+u,t+=" items' "),e.opts.verbose&&(t+=" , schema:  ",d?t+="validate.schema"+f:t+=""+u,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),t+=" } "):t+=" {} ";var w=t;return t=_.pop(),!e.compositeRule&&n?e.async?t+=" throw new ValidationError(["+w+"]); ":t+=" validate.errors = ["+w+"]; return false; ":t+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",n&&(t+=" else { "),t}),Ca}var xa,Ws;function Hs(){return Ws||(Ws=1,xa=function(e,i,h){var t=" ",l=e.level,p=e.dataLevel,u=e.schema[i],f=e.schemaPath+e.util.getProperty(i),s=e.errSchemaPath+"/"+i,n=!e.opts.allErrors,m,c="data"+(p||""),d=e.opts.$data&&u&&u.$data,o;if(d?(t+=" var schema"+l+" = "+e.util.getData(u.$data,p,e.dataPathArr)+"; ",o="schema"+l):o=u,!(d||typeof u=="number"))throw new Error(i+" must be number");var a=i=="maxLength"?">":"<";t+="if ( ",d&&(t+=" ("+o+" !== undefined && typeof "+o+" != 'number') || "),e.opts.unicode===!1?t+=" "+c+".length ":t+=" ucs2length("+c+") ",t+=" "+a+" "+o+") { ";var m=i,_=_||[];_.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(m||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(s)+" , params: { limit: "+o+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT be ",i=="maxLength"?t+="longer":t+="shorter",t+=" than ",d?t+="' + "+o+" + '":t+=""+u,t+=" characters' "),e.opts.verbose&&(t+=" , schema:  ",d?t+="validate.schema"+f:t+=""+u,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),t+=" } "):t+=" {} ";var w=t;return t=_.pop(),!e.compositeRule&&n?e.async?t+=" throw new ValidationError(["+w+"]); ":t+=" validate.errors = ["+w+"]; return false; ":t+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",n&&(t+=" else { "),t}),xa}var Da,zs;function Gs(){return zs||(zs=1,Da=function(e,i,h){var t=" ",l=e.level,p=e.dataLevel,u=e.schema[i],f=e.schemaPath+e.util.getProperty(i),s=e.errSchemaPath+"/"+i,n=!e.opts.allErrors,m,c="data"+(p||""),d=e.opts.$data&&u&&u.$data,o;if(d?(t+=" var schema"+l+" = "+e.util.getData(u.$data,p,e.dataPathArr)+"; ",o="schema"+l):o=u,!(d||typeof u=="number"))throw new Error(i+" must be number");var a=i=="maxProperties"?">":"<";t+="if ( ",d&&(t+=" ("+o+" !== undefined && typeof "+o+" != 'number') || "),t+=" Object.keys("+c+").length "+a+" "+o+") { ";var m=i,_=_||[];_.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(m||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(s)+" , params: { limit: "+o+" } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have ",i=="maxProperties"?t+="more":t+="fewer",t+=" than ",d?t+="' + "+o+" + '":t+=""+u,t+=" properties' "),e.opts.verbose&&(t+=" , schema:  ",d?t+="validate.schema"+f:t+=""+u,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),t+=" } "):t+=" {} ";var w=t;return t=_.pop(),!e.compositeRule&&n?e.async?t+=" throw new ValidationError(["+w+"]); ":t+=" validate.errors = ["+w+"]; return false; ":t+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",n&&(t+=" else { "),t}),Da}var Pa,Ks;function Qd(){return Ks||(Ks=1,Pa=function(e,i,h){var t=" ",l=e.level,p=e.dataLevel,u=e.schema[i],f=e.schemaPath+e.util.getProperty(i),s=e.errSchemaPath+"/"+i,n=!e.opts.allErrors,c="data"+(p||""),d=e.opts.$data&&u&&u.$data,o;if(d?(t+=" var schema"+l+" = "+e.util.getData(u.$data,p,e.dataPathArr)+"; ",o="schema"+l):o=u,!(d||typeof u=="number"))throw new Error(i+" must be number");t+="var division"+l+";if (",d&&(t+=" "+o+" !== undefined && ( typeof "+o+" != 'number' || "),t+=" (division"+l+" = "+c+" / "+o+", ",e.opts.multipleOfPrecision?t+=" Math.abs(Math.round(division"+l+") - division"+l+") > 1e-"+e.opts.multipleOfPrecision+" ":t+=" division"+l+" !== parseInt(division"+l+") ",t+=" ) ",d&&(t+="  )  "),t+=" ) {   ";var a=a||[];a.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(s)+" , params: { multipleOf: "+o+" } ",e.opts.messages!==!1&&(t+=" , message: 'should be multiple of ",d?t+="' + "+o:t+=""+o+"'"),e.opts.verbose&&(t+=" , schema:  ",d?t+="validate.schema"+f:t+=""+u,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),t+=" } "):t+=" {} ";var m=t;return t=a.pop(),!e.compositeRule&&n?e.async?t+=" throw new ValidationError(["+m+"]); ":t+=" validate.errors = ["+m+"]; return false; ":t+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",n&&(t+=" else { "),t}),Pa}var Ma,Qs;function Yd(){return Qs||(Qs=1,Ma=function(e,i,h){var t=" ",l=e.level,p=e.dataLevel,u=e.schema[i],f=e.schemaPath+e.util.getProperty(i),s=e.errSchemaPath+"/"+i,n=!e.opts.allErrors,c="data"+(p||""),d="errs__"+l,o=e.util.copy(e);o.level++;var a="valid"+o.level;if(e.opts.strictKeywords?typeof u=="object"&&Object.keys(u).length>0||u===!1:e.util.schemaHasRules(u,e.RULES.all)){o.schema=u,o.schemaPath=f,o.errSchemaPath=s,t+=" var "+d+" = errors;  ";var m=e.compositeRule;e.compositeRule=o.compositeRule=!0,o.createErrors=!1;var _;o.opts.allErrors&&(_=o.opts.allErrors,o.opts.allErrors=!1),t+=" "+e.validate(o)+" ",o.createErrors=!0,_&&(o.opts.allErrors=_),e.compositeRule=o.compositeRule=m,t+=" if ("+a+") {   ";var w=w||[];w.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(s)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should NOT be valid' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),t+=" } "):t+=" {} ";var S=t;t=w.pop(),!e.compositeRule&&n?e.async?t+=" throw new ValidationError(["+S+"]); ":t+=" validate.errors = ["+S+"]; return false; ":t+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(t+=" } ")}else t+="  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(s)+" , params: {} ",e.opts.messages!==!1&&(t+=" , message: 'should NOT be valid' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n&&(t+=" if (false) { ");return t}),Ma}var Ia,Ys;function Jd(){return Ys||(Ys=1,Ia=function(e,i,h){var t=" ",l=e.level,p=e.dataLevel,u=e.schema[i],f=e.schemaPath+e.util.getProperty(i),s=e.errSchemaPath+"/"+i,n=!e.opts.allErrors,c="data"+(p||""),d="valid"+l,o="errs__"+l,a=e.util.copy(e),m="";a.level++;var _="valid"+a.level,w=a.baseId,S="prevValid"+l,C="passingSchemas"+l;t+="var "+o+" = errors , "+S+" = false , "+d+" = false , "+C+" = null; ";var b=e.compositeRule;e.compositeRule=a.compositeRule=!0;var E=u;if(E)for(var x,P=-1,R=E.length-1;P<R;)x=E[P+=1],(e.opts.strictKeywords?typeof x=="object"&&Object.keys(x).length>0||x===!1:e.util.schemaHasRules(x,e.RULES.all))?(a.schema=x,a.schemaPath=f+"["+P+"]",a.errSchemaPath=s+"/"+P,t+="  "+e.validate(a)+" ",a.baseId=w):t+=" var "+_+" = true; ",P&&(t+=" if ("+_+" && "+S+") { "+d+" = false; "+C+" = ["+C+", "+P+"]; } else { ",m+="}"),t+=" if ("+_+") { "+d+" = "+S+" = true; "+C+" = "+P+"; }";return e.compositeRule=a.compositeRule=b,t+=""+m+"if (!"+d+") {   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(s)+" , params: { passingSchemas: "+C+" } ",e.opts.messages!==!1&&(t+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&n&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),t+="} else {  errors = "+o+"; if (vErrors !== null) { if ("+o+") vErrors.length = "+o+"; else vErrors = null; }",e.opts.allErrors&&(t+=" } "),t}),Ia}var Oa,Js;function Xd(){return Js||(Js=1,Oa=function(e,i,h){var t=" ",l=e.level,p=e.dataLevel,u=e.schema[i],f=e.schemaPath+e.util.getProperty(i),s=e.errSchemaPath+"/"+i,n=!e.opts.allErrors,c="data"+(p||""),d=e.opts.$data&&u&&u.$data,o;d?(t+=" var schema"+l+" = "+e.util.getData(u.$data,p,e.dataPathArr)+"; ",o="schema"+l):o=u;var a=d?"(new RegExp("+o+"))":e.usePattern(u);t+="if ( ",d&&(t+=" ("+o+" !== undefined && typeof "+o+" != 'string') || "),t+=" !"+a+".test("+c+") ) {   ";var m=m||[];m.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(s)+" , params: { pattern:  ",d?t+=""+o:t+=""+e.util.toQuotedString(u),t+="  } ",e.opts.messages!==!1&&(t+=` , message: 'should match pattern "`,d?t+="' + "+o+" + '":t+=""+e.util.escapeQuotes(u),t+=`"' `),e.opts.verbose&&(t+=" , schema:  ",d?t+="validate.schema"+f:t+=""+e.util.toQuotedString(u),t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),t+=" } "):t+=" {} ";var _=t;return t=m.pop(),!e.compositeRule&&n?e.async?t+=" throw new ValidationError(["+_+"]); ":t+=" validate.errors = ["+_+"]; return false; ":t+=" var err = "+_+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+="} ",n&&(t+=" else { "),t}),Oa}var Ra,Xs;function Zd(){return Xs||(Xs=1,Ra=function(e,i,h){var t=" ",l=e.level,p=e.dataLevel,u=e.schema[i],f=e.schemaPath+e.util.getProperty(i),s=e.errSchemaPath+"/"+i,n=!e.opts.allErrors,c="data"+(p||""),d="errs__"+l,o=e.util.copy(e),a="";o.level++;var m="valid"+o.level,_="key"+l,w="idx"+l,S=o.dataLevel=e.dataLevel+1,C="data"+S,b="dataProperties"+l,E=Object.keys(u||{}).filter(oe),x=e.schema.patternProperties||{},P=Object.keys(x).filter(oe),R=e.schema.additionalProperties,F=E.length||P.length,O=R===!1,T=typeof R=="object"&&Object.keys(R).length,j=e.opts.removeAdditional,G=O||T||j,k=e.opts.ownProperties,Z=e.baseId,ae=e.schema.required;if(ae&&!(e.opts.$data&&ae.$data)&&ae.length<e.opts.loopRequired)var ne=e.util.toHash(ae);function oe(y){return y!=="__proto__"}if(t+="var "+d+" = errors;var "+m+" = true;",k&&(t+=" var "+b+" = undefined;"),G){if(k?t+=" "+b+" = "+b+" || Object.keys("+c+"); for (var "+w+"=0; "+w+"<"+b+".length; "+w+"++) { var "+_+" = "+b+"["+w+"]; ":t+=" for (var "+_+" in "+c+") { ",F){if(t+=" var isAdditional"+l+" = !(false ",E.length)if(E.length>8)t+=" || validate.schema"+f+".hasOwnProperty("+_+") ";else{var ue=E;if(ue)for(var de,me=-1,ee=ue.length-1;me<ee;)de=ue[me+=1],t+=" || "+_+" == "+e.util.toQuotedString(de)+" "}if(P.length){var _e=P;if(_e)for(var Fe,te=-1,M=_e.length-1;te<M;)Fe=_e[te+=1],t+=" || "+e.usePattern(Fe)+".test("+_+") "}t+=" ); if (isAdditional"+l+") { "}if(j=="all")t+=" delete "+c+"["+_+"]; ";else{var $=e.errorPath,W="' + "+_+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,_,e.opts.jsonPointers)),O)if(j)t+=" delete "+c+"["+_+"]; ";else{t+=" "+m+" = false; ";var re=s;s=e.errSchemaPath+"/additionalProperties";var Q=Q||[];Q.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(s)+" , params: { additionalProperty: '"+W+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is an invalid additional property":t+="should NOT have additional properties",t+="' "),e.opts.verbose&&(t+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),t+=" } "):t+=" {} ";var X=t;t=Q.pop(),!e.compositeRule&&n?e.async?t+=" throw new ValidationError(["+X+"]); ":t+=" validate.errors = ["+X+"]; return false; ":t+=" var err = "+X+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s=re,n&&(t+=" break; ")}else if(T)if(j=="failing"){t+=" var "+d+" = errors;  ";var ge=e.compositeRule;e.compositeRule=o.compositeRule=!0,o.schema=R,o.schemaPath=e.schemaPath+".additionalProperties",o.errSchemaPath=e.errSchemaPath+"/additionalProperties",o.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,_,e.opts.jsonPointers);var Ee=c+"["+_+"]";o.dataPathArr[S]=_;var we=e.validate(o);o.baseId=Z,e.util.varOccurences(we,C)<2?t+=" "+e.util.varReplace(we,C,Ee)+" ":t+=" var "+C+" = "+Ee+"; "+we+" ",t+=" if (!"+m+") { errors = "+d+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+c+"["+_+"]; }  ",e.compositeRule=o.compositeRule=ge}else{o.schema=R,o.schemaPath=e.schemaPath+".additionalProperties",o.errSchemaPath=e.errSchemaPath+"/additionalProperties",o.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,_,e.opts.jsonPointers);var Ee=c+"["+_+"]";o.dataPathArr[S]=_;var we=e.validate(o);o.baseId=Z,e.util.varOccurences(we,C)<2?t+=" "+e.util.varReplace(we,C,Ee)+" ":t+=" var "+C+" = "+Ee+"; "+we+" ",n&&(t+=" if (!"+m+") break; ")}e.errorPath=$}F&&(t+=" } "),t+=" }  ",n&&(t+=" if ("+m+") { ",a+="}")}var Be=e.opts.useDefaults&&!e.compositeRule;if(E.length){var xe=E;if(xe)for(var de,De=-1,et=xe.length-1;De<et;){de=xe[De+=1];var Ve=u[de];if(e.opts.strictKeywords?typeof Ve=="object"&&Object.keys(Ve).length>0||Ve===!1:e.util.schemaHasRules(Ve,e.RULES.all)){var it=e.util.getProperty(de),Ee=c+it,Qe=Be&&Ve.default!==void 0;o.schema=Ve,o.schemaPath=f+it,o.errSchemaPath=s+"/"+e.util.escapeFragment(de),o.errorPath=e.util.getPath(e.errorPath,de,e.opts.jsonPointers),o.dataPathArr[S]=e.util.toQuotedString(de);var we=e.validate(o);if(o.baseId=Z,e.util.varOccurences(we,C)<2){we=e.util.varReplace(we,C,Ee);var Le=Ee}else{var Le=C;t+=" var "+C+" = "+Ee+"; "}if(Qe)t+=" "+we+" ";else{if(ne&&ne[de]){t+=" if ( "+Le+" === undefined ",k&&(t+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(de)+"') "),t+=") { "+m+" = false; ";var $=e.errorPath,re=s,je=e.util.escapeQuotes(de);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath($,de,e.opts.jsonPointers)),s=e.errSchemaPath+"/required";var Q=Q||[];Q.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(s)+" , params: { missingProperty: '"+je+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+je+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),t+=" } "):t+=" {} ";var X=t;t=Q.pop(),!e.compositeRule&&n?e.async?t+=" throw new ValidationError(["+X+"]); ":t+=" validate.errors = ["+X+"]; return false; ":t+=" var err = "+X+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",s=re,e.errorPath=$,t+=" } else { "}else n?(t+=" if ( "+Le+" === undefined ",k&&(t+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(de)+"') "),t+=") { "+m+" = true; } else { "):(t+=" if ("+Le+" !== undefined ",k&&(t+=" &&   Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(de)+"') "),t+=" ) { ");t+=" "+we+" } "}}n&&(t+=" if ("+m+") { ",a+="}")}}if(P.length){var rt=P;if(rt)for(var Fe,q=-1,Y=rt.length-1;q<Y;){Fe=rt[q+=1];var Ve=x[Fe];if(e.opts.strictKeywords?typeof Ve=="object"&&Object.keys(Ve).length>0||Ve===!1:e.util.schemaHasRules(Ve,e.RULES.all)){o.schema=Ve,o.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(Fe),o.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(Fe),k?t+=" "+b+" = "+b+" || Object.keys("+c+"); for (var "+w+"=0; "+w+"<"+b+".length; "+w+"++) { var "+_+" = "+b+"["+w+"]; ":t+=" for (var "+_+" in "+c+") { ",t+=" if ("+e.usePattern(Fe)+".test("+_+")) { ",o.errorPath=e.util.getPathExpr(e.errorPath,_,e.opts.jsonPointers);var Ee=c+"["+_+"]";o.dataPathArr[S]=_;var we=e.validate(o);o.baseId=Z,e.util.varOccurences(we,C)<2?t+=" "+e.util.varReplace(we,C,Ee)+" ":t+=" var "+C+" = "+Ee+"; "+we+" ",n&&(t+=" if (!"+m+") break; "),t+=" } ",n&&(t+=" else "+m+" = true; "),t+=" }  ",n&&(t+=" if ("+m+") { ",a+="}")}}}return n&&(t+=" "+a+" if ("+d+" == errors) {"),t}),Ra}var La,Zs;function eh(){return Zs||(Zs=1,La=function(e,i,h){var t=" ",l=e.level,p=e.dataLevel,u=e.schema[i],f=e.schemaPath+e.util.getProperty(i),s=e.errSchemaPath+"/"+i,n=!e.opts.allErrors,c="data"+(p||""),d="errs__"+l,o=e.util.copy(e),a="";o.level++;var m="valid"+o.level;if(t+="var "+d+" = errors;",e.opts.strictKeywords?typeof u=="object"&&Object.keys(u).length>0||u===!1:e.util.schemaHasRules(u,e.RULES.all)){o.schema=u,o.schemaPath=f,o.errSchemaPath=s;var _="key"+l,w="idx"+l,S="i"+l,C="' + "+_+" + '",b=o.dataLevel=e.dataLevel+1,E="data"+b,x="dataProperties"+l,P=e.opts.ownProperties,R=e.baseId;P&&(t+=" var "+x+" = undefined; "),P?t+=" "+x+" = "+x+" || Object.keys("+c+"); for (var "+w+"=0; "+w+"<"+x+".length; "+w+"++) { var "+_+" = "+x+"["+w+"]; ":t+=" for (var "+_+" in "+c+") { ",t+=" var startErrs"+l+" = errors; ";var F=_,O=e.compositeRule;e.compositeRule=o.compositeRule=!0;var T=e.validate(o);o.baseId=R,e.util.varOccurences(T,E)<2?t+=" "+e.util.varReplace(T,E,F)+" ":t+=" var "+E+" = "+F+"; "+T+" ",e.compositeRule=o.compositeRule=O,t+=" if (!"+m+") { for (var "+S+"=startErrs"+l+"; "+S+"<errors; "+S+"++) { vErrors["+S+"].propertyName = "+_+"; }   var err =   ",e.createErrors!==!1?(t+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(s)+" , params: { propertyName: '"+C+"' } ",e.opts.messages!==!1&&(t+=" , message: 'property name \\'"+C+"\\' is invalid' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&n&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; "),n&&(t+=" break; "),t+=" } }"}return n&&(t+=" "+a+" if ("+d+" == errors) {"),t}),La}var Ba,eu;function th(){return eu||(eu=1,Ba=function(e,i,h){var t=" ",l=e.level,p=e.dataLevel,u=e.schema[i],f=e.schemaPath+e.util.getProperty(i),s=e.errSchemaPath+"/"+i,n=!e.opts.allErrors,c="data"+(p||""),d="valid"+l,o=e.opts.$data&&u&&u.$data;o&&(t+=" var schema"+l+" = "+e.util.getData(u.$data,p,e.dataPathArr)+"; ");var a="schema"+l;if(!o)if(u.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var m=[],_=u;if(_)for(var w,S=-1,C=_.length-1;S<C;){w=_[S+=1];var b=e.schema.properties[w];b&&(e.opts.strictKeywords?typeof b=="object"&&Object.keys(b).length>0||b===!1:e.util.schemaHasRules(b,e.RULES.all))||(m[m.length]=w)}}else var m=u;if(o||m.length){var E=e.errorPath,x=o||m.length>=e.opts.loopRequired,P=e.opts.ownProperties;if(n)if(t+=" var missing"+l+"; ",x){o||(t+=" var "+a+" = validate.schema"+f+"; ");var R="i"+l,F="schema"+l+"["+R+"]",O="' + "+F+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(E,F,e.opts.jsonPointers)),t+=" var "+d+" = true; ",o&&(t+=" if (schema"+l+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+l+")) "+d+" = false; else {"),t+=" for (var "+R+" = 0; "+R+" < "+a+".length; "+R+"++) { "+d+" = "+c+"["+a+"["+R+"]] !== undefined ",P&&(t+=" &&   Object.prototype.hasOwnProperty.call("+c+", "+a+"["+R+"]) "),t+="; if (!"+d+") break; } ",o&&(t+="  }  "),t+="  if (!"+d+") {   ";var T=T||[];T.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(s)+" , params: { missingProperty: '"+O+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+O+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),t+=" } "):t+=" {} ";var j=t;t=T.pop(),!e.compositeRule&&n?e.async?t+=" throw new ValidationError(["+j+"]); ":t+=" validate.errors = ["+j+"]; return false; ":t+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { "}else{t+=" if ( ";var G=m;if(G)for(var k,R=-1,Z=G.length-1;R<Z;){k=G[R+=1],R&&(t+=" || ");var ae=e.util.getProperty(k),ne=c+ae;t+=" ( ( "+ne+" === undefined ",P&&(t+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(k)+"') "),t+=") && (missing"+l+" = "+e.util.toQuotedString(e.opts.jsonPointers?k:ae)+") ) "}t+=") {  ";var F="missing"+l,O="' + "+F+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(E,F,!0):E+" + "+F);var T=T||[];T.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(s)+" , params: { missingProperty: '"+O+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+O+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),t+=" } "):t+=" {} ";var j=t;t=T.pop(),!e.compositeRule&&n?e.async?t+=" throw new ValidationError(["+j+"]); ":t+=" validate.errors = ["+j+"]; return false; ":t+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } else { "}else if(x){o||(t+=" var "+a+" = validate.schema"+f+"; ");var R="i"+l,F="schema"+l+"["+R+"]",O="' + "+F+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(E,F,e.opts.jsonPointers)),o&&(t+=" if ("+a+" && !Array.isArray("+a+")) {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(s)+" , params: { missingProperty: '"+O+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+O+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+a+" !== undefined) { "),t+=" for (var "+R+" = 0; "+R+" < "+a+".length; "+R+"++) { if ("+c+"["+a+"["+R+"]] === undefined ",P&&(t+=" || ! Object.prototype.hasOwnProperty.call("+c+", "+a+"["+R+"]) "),t+=") {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(s)+" , params: { missingProperty: '"+O+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+O+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",o&&(t+="  }  ")}else{var oe=m;if(oe)for(var k,ue=-1,de=oe.length-1;ue<de;){k=oe[ue+=1];var ae=e.util.getProperty(k),O=e.util.escapeQuotes(k),ne=c+ae;e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(E,k,e.opts.jsonPointers)),t+=" if ( "+ne+" === undefined ",P&&(t+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+e.util.escapeQuotes(k)+"') "),t+=") {  var err =   ",e.createErrors!==!1?(t+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(s)+" , params: { missingProperty: '"+O+"' } ",e.opts.messages!==!1&&(t+=" , message: '",e.opts._errorDataPathProperty?t+="is a required property":t+="should have required property \\'"+O+"\\'",t+="' "),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=E}else n&&(t+=" if (true) {");return t}),Ba}var Aa,tu;function rh(){return tu||(tu=1,Aa=function(e,i,h){var t=" ",l=e.level,p=e.dataLevel,u=e.schema[i],f=e.schemaPath+e.util.getProperty(i),s=e.errSchemaPath+"/"+i,n=!e.opts.allErrors,c="data"+(p||""),d="valid"+l,o=e.opts.$data&&u&&u.$data,a;if(o?(t+=" var schema"+l+" = "+e.util.getData(u.$data,p,e.dataPathArr)+"; ",a="schema"+l):a=u,(u||o)&&e.opts.uniqueItems!==!1){o&&(t+=" var "+d+"; if ("+a+" === false || "+a+" === undefined) "+d+" = true; else if (typeof "+a+" != 'boolean') "+d+" = false; else { "),t+=" var i = "+c+".length , "+d+" = true , j; if (i > 1) { ";var m=e.schema.items&&e.schema.items.type,_=Array.isArray(m);if(!m||m=="object"||m=="array"||_&&(m.indexOf("object")>=0||m.indexOf("array")>=0))t+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+c+"[i], "+c+"[j])) { "+d+" = false; break outer; } } } ";else{t+=" var itemIndices = {}, item; for (;i--;) { var item = "+c+"[i]; ";var w="checkDataType"+(_?"s":"");t+=" if ("+e.util[w](m,"item",e.opts.strictNumbers,!0)+") continue; ",_&&(t+=` if (typeof item == 'string') item = '"' + item; `),t+=" if (typeof itemIndices[item] == 'number') { "+d+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}t+=" } ",o&&(t+="  }  "),t+=" if (!"+d+") {   ";var S=S||[];S.push(t),t="",e.createErrors!==!1?(t+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(s)+" , params: { i: i, j: j } ",e.opts.messages!==!1&&(t+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(t+=" , schema:  ",o?t+="validate.schema"+f:t+=""+u,t+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+c+" "),t+=" } "):t+=" {} ";var C=t;t=S.pop(),!e.compositeRule&&n?e.async?t+=" throw new ValidationError(["+C+"]); ":t+=" validate.errors = ["+C+"]; return false; ":t+=" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",t+=" } ",n&&(t+=" else { ")}else n&&(t+=" if (true) { ");return t}),Aa}var Fa,ru;function nh(){return ru||(ru=1,Fa={$ref:Nd(),allOf:Vd(),anyOf:jd(),$comment:qd(),const:kd(),contains:Ud(),dependencies:Wd(),enum:Hd(),format:zd(),if:Gd(),items:Kd(),maximum:qs(),minimum:qs(),maxItems:Us(),minItems:Us(),maxLength:Hs(),minLength:Hs(),maxProperties:Gs(),minProperties:Gs(),multipleOf:Qd(),not:Yd(),oneOf:Jd(),pattern:Xd(),properties:Zd(),propertyNames:eh(),required:th(),uniqueItems:rh(),validate:ol()}),Fa}var Ta,nu;function ih(){if(nu)return Ta;nu=1;var r=nh(),e=En().toHash;return Ta=function(){var h=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"],l=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],p=["number","integer","string","array","object","boolean","null"];return h.all=e(t),h.types=e(p),h.forEach(function(u){u.rules=u.rules.map(function(f){var s;if(typeof f=="object"){var n=Object.keys(f)[0];s=f[n],f=n,s.forEach(function(d){t.push(d),h.all[d]=!0})}t.push(f);var c=h.all[f]={keyword:f,code:r[f],implements:s};return c}),h.all.$comment={keyword:"$comment",code:r.$comment},u.type&&(h.types[u.type]=u)}),h.keywords=e(t.concat(l)),h.custom={},h},Ta}var $a,iu;function ah(){if(iu)return $a;iu=1;var r=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];return $a=function(e,i){for(var h=0;h<i.length;h++){e=JSON.parse(JSON.stringify(e));var t=i[h].split("/"),l=e,p;for(p=1;p<t.length;p++)l=l[t[p]];for(p=0;p<r.length;p++){var u=r[p],f=l[u];f&&(l[u]={anyOf:[f,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return e},$a}var Na,au;function oh(){if(au)return Na;au=1;var r=Do().MissingRef;Na=e;function e(i,h,t){var l=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof h=="function"&&(t=h,h=void 0);var p=u(i).then(function(){var s=l._addSchema(i,void 0,h);return s.validate||f(s)});return t&&p.then(function(s){t(null,s)},t),p;function u(s){var n=s.$schema;return n&&!l.getSchema(n)?e.call(l,{$ref:n},!0):Promise.resolve()}function f(s){try{return l._compile(s)}catch(c){if(c instanceof r)return n(c);throw c}function n(c){var d=c.missingSchema;if(m(d))throw new Error("Schema "+d+" is loaded but "+c.missingRef+" cannot be resolved");var o=l._loadingSchemas[d];return o||(o=l._loadingSchemas[d]=l._opts.loadSchema(d),o.then(a,a)),o.then(function(_){if(!m(d))return u(_).then(function(){m(d)||l.addSchema(_,d,void 0,h)})}).then(function(){return f(s)});function a(){delete l._loadingSchemas[d]}function m(_){return l._refs[_]||l._schemas[_]}}}}return Na}var Va,ou;function sh(){return ou||(ou=1,Va=function(e,i,h){var t=" ",l=e.level,p=e.dataLevel,u=e.schema[i],f=e.schemaPath+e.util.getProperty(i),s=e.errSchemaPath+"/"+i,n=!e.opts.allErrors,c,d="data"+(p||""),o="valid"+l,a="errs__"+l,m=e.opts.$data&&u&&u.$data,_;m?(t+=" var schema"+l+" = "+e.util.getData(u.$data,p,e.dataPathArr)+"; ",_="schema"+l):_=u;var w=this,S="definition"+l,C=w.definition,b="",E,x,P,R,F;if(m&&C.$data){F="keywordValidate"+l;var O=C.validateSchema;t+=" var "+S+" = RULES.custom['"+i+"'].definition; var "+F+" = "+S+".validate;"}else{if(R=e.useCustomRule(w,u,e.schema,e),!R)return;_="validate.schema"+f,F=R.code,E=C.compile,x=C.inline,P=C.macro}var T=F+".errors",j="i"+l,G="ruleErr"+l,k=C.async;if(k&&!e.async)throw new Error("async keyword in sync schema");if(x||P||(t+=""+T+" = null;"),t+="var "+a+" = errors;var "+o+";",m&&C.$data&&(b+="}",t+=" if ("+_+" === undefined) { "+o+" = true; } else { ",O&&(b+="}",t+=" "+o+" = "+S+".validateSchema("+_+"); if ("+o+") { ")),x)C.statements?t+=" "+R.validate+" ":t+=" "+o+" = "+R.validate+"; ";else if(P){var Z=e.util.copy(e),b="";Z.level++;var ae="valid"+Z.level;Z.schema=R.validate,Z.schemaPath="";var ne=e.compositeRule;e.compositeRule=Z.compositeRule=!0;var oe=e.validate(Z).replace(/validate\.schema/g,F);e.compositeRule=Z.compositeRule=ne,t+=" "+oe}else{var ue=ue||[];ue.push(t),t="",t+="  "+F+".call( ",e.opts.passContext?t+="this":t+="self",E||C.schema===!1?t+=" , "+d+" ":t+=" , "+_+" , "+d+" , validate.schema"+e.schemaPath+" ",t+=" , (dataPath || '')",e.errorPath!='""'&&(t+=" + "+e.errorPath);var de=p?"data"+(p-1||""):"parentData",me=p?e.dataPathArr[p]:"parentDataProperty";t+=" , "+de+" , "+me+" , rootData )  ";var ee=t;t=ue.pop(),C.errors===!1?(t+=" "+o+" = ",k&&(t+="await "),t+=""+ee+"; "):k?(T="customErrors"+l,t+=" var "+T+" = null; try { "+o+" = await "+ee+"; } catch (e) { "+o+" = false; if (e instanceof ValidationError) "+T+" = e.errors; else throw e; } "):t+=" "+T+" = null; "+o+" = "+ee+"; "}if(C.modifying&&(t+=" if ("+de+") "+d+" = "+de+"["+me+"];"),t+=""+b,C.valid)n&&(t+=" if (true) { ");else{t+=" if ( ",C.valid===void 0?(t+=" !",P?t+=""+ae:t+=""+o):t+=" "+!C.valid+" ",t+=") { ",c=w.keyword;var ue=ue||[];ue.push(t),t="";var ue=ue||[];ue.push(t),t="",e.createErrors!==!1?(t+=" { keyword: '"+(c||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(s)+" , params: { keyword: '"+w.keyword+"' } ",e.opts.messages!==!1&&(t+=` , message: 'should pass "`+w.keyword+`" keyword validation' `),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ";var _e=t;t=ue.pop(),!e.compositeRule&&n?e.async?t+=" throw new ValidationError(["+_e+"]); ":t+=" validate.errors = ["+_e+"]; return false; ":t+=" var err = "+_e+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var Fe=t;t=ue.pop(),x?C.errors?C.errors!="full"&&(t+="  for (var "+j+"="+a+"; "+j+"<errors; "+j+"++) { var "+G+" = vErrors["+j+"]; if ("+G+".dataPath === undefined) "+G+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+G+".schemaPath === undefined) { "+G+'.schemaPath = "'+s+'"; } ',e.opts.verbose&&(t+=" "+G+".schema = "+_+"; "+G+".data = "+d+"; "),t+=" } "):C.errors===!1?t+=" "+Fe+" ":(t+=" if ("+a+" == errors) { "+Fe+" } else {  for (var "+j+"="+a+"; "+j+"<errors; "+j+"++) { var "+G+" = vErrors["+j+"]; if ("+G+".dataPath === undefined) "+G+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+G+".schemaPath === undefined) { "+G+'.schemaPath = "'+s+'"; } ',e.opts.verbose&&(t+=" "+G+".schema = "+_+"; "+G+".data = "+d+"; "),t+=" } } "):P?(t+="   var err =   ",e.createErrors!==!1?(t+=" { keyword: '"+(c||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(s)+" , params: { keyword: '"+w.keyword+"' } ",e.opts.messages!==!1&&(t+=` , message: 'should pass "`+w.keyword+`" keyword validation' `),e.opts.verbose&&(t+=" , schema: validate.schema"+f+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),t+=" } "):t+=" {} ",t+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&n&&(e.async?t+=" throw new ValidationError(vErrors); ":t+=" validate.errors = vErrors; return false; ")):C.errors===!1?t+=" "+Fe+" ":(t+=" if (Array.isArray("+T+")) { if (vErrors === null) vErrors = "+T+"; else vErrors = vErrors.concat("+T+"); errors = vErrors.length;  for (var "+j+"="+a+"; "+j+"<errors; "+j+"++) { var "+G+" = vErrors["+j+"]; if ("+G+".dataPath === undefined) "+G+".dataPath = (dataPath || '') + "+e.errorPath+";  "+G+'.schemaPath = "'+s+'";  ',e.opts.verbose&&(t+=" "+G+".schema = "+_+"; "+G+".data = "+d+"; "),t+=" } } else { "+Fe+" } "),t+=" } ",n&&(t+=" else { ")}return t}),Va}const uh="http://json-schema.org/draft-07/schema#",ch="http://json-schema.org/draft-07/schema#",lh="Core schema meta-schema",fh={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},dh=["object","boolean"],hh={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},sl={$schema:uh,$id:ch,title:lh,definitions:fh,type:dh,properties:hh,default:!0};var ja,su;function vh(){if(su)return ja;su=1;var r=sl;return ja={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:r.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:r.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}},ja}var qa,uu;function ph(){if(uu)return qa;uu=1;var r=/^[a-z_$][a-z0-9_$-]*$/i,e=sh(),i=vh();qa={add:h,get:t,remove:l,validate:p};function h(u,f){var s=this.RULES;if(s.keywords[u])throw new Error("Keyword "+u+" is already defined");if(!r.test(u))throw new Error("Keyword "+u+" is not a valid identifier");if(f){this.validateKeyword(f,!0);var n=f.type;if(Array.isArray(n))for(var c=0;c<n.length;c++)o(u,n[c],f);else o(u,n,f);var d=f.metaSchema;d&&(f.$data&&this._opts.$data&&(d={anyOf:[d,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),f.validateSchema=this.compile(d,!0))}s.keywords[u]=s.all[u]=!0;function o(a,m,_){for(var w,S=0;S<s.length;S++){var C=s[S];if(C.type==m){w=C;break}}w||(w={type:m,rules:[]},s.push(w));var b={keyword:a,definition:_,custom:!0,code:e,implements:_.implements};w.rules.push(b),s.custom[a]=b}return this}function t(u){var f=this.RULES.custom[u];return f?f.definition:this.RULES.keywords[u]||!1}function l(u){var f=this.RULES;delete f.keywords[u],delete f.all[u],delete f.custom[u];for(var s=0;s<f.length;s++)for(var n=f[s].rules,c=0;c<n.length;c++)if(n[c].keyword==u){n.splice(c,1);break}return this}function p(u,f){p.errors=null;var s=this._validateKeyword=this._validateKeyword||this.compile(i,!0);if(s(u))return!0;if(p.errors=s.errors,f)throw new Error("custom keyword definition is invalid: "+this.errorsText(s.errors));return!1}return qa}const mh="http://json-schema.org/draft-07/schema#",gh="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",_h="Meta-schema for $data reference (JSON Schema extension proposal)",yh="object",bh=["$data"],wh={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Sh=!1,Eh={$schema:mh,$id:gh,description:_h,type:yh,required:bh,properties:wh,additionalProperties:Sh};var ka,cu;function Ch(){if(cu)return ka;cu=1;var r=Fd(),e=xo(),i=Td(),h=il(),t=al(),l=$d(),p=ih(),u=ah(),f=En();ka=a,a.prototype.validate=m,a.prototype.compile=_,a.prototype.addSchema=w,a.prototype.addMetaSchema=S,a.prototype.validateSchema=C,a.prototype.getSchema=E,a.prototype.removeSchema=R,a.prototype.addFormat=ne,a.prototype.errorsText=ae,a.prototype._addSchema=O,a.prototype._compile=T,a.prototype.compileAsync=oh();var s=ph();a.prototype.addKeyword=s.add,a.prototype.getKeyword=s.get,a.prototype.removeKeyword=s.remove,a.prototype.validateKeyword=s.validate;var n=Do();a.ValidationError=n.Validation,a.MissingRefError=n.MissingRef,a.$dataMetaSchema=u;var c="http://json-schema.org/draft-07/schema",d=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],o=["/properties"];function a(M){if(!(this instanceof a))return new a(M);M=this._opts=f.copy(M)||{},Fe(this),this._schemas={},this._refs={},this._fragments={},this._formats=l(M.format),this._cache=M.cache||new i,this._loadingSchemas={},this._compilations=[],this.RULES=p(),this._getId=j(M),M.loopRequired=M.loopRequired||1/0,M.errorDataPath=="property"&&(M._errorDataPathProperty=!0),M.serialize===void 0&&(M.serialize=t),this._metaOpts=_e(this),M.formats&&de(this),M.keywords&&me(this),oe(this),typeof M.meta=="object"&&this.addMetaSchema(M.meta),M.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),ue(this)}function m(M,$){var W;if(typeof M=="string"){if(W=this.getSchema(M),!W)throw new Error('no schema with key or ref "'+M+'"')}else{var re=this._addSchema(M);W=re.validate||this._compile(re)}var Q=W($);return W.$async!==!0&&(this.errors=W.errors),Q}function _(M,$){var W=this._addSchema(M,void 0,$);return W.validate||this._compile(W)}function w(M,$,W,re){if(Array.isArray(M)){for(var Q=0;Q<M.length;Q++)this.addSchema(M[Q],void 0,W,re);return this}var X=this._getId(M);if(X!==void 0&&typeof X!="string")throw new Error("schema id must be string");return $=e.normalizeId($||X),ee(this,$),this._schemas[$]=this._addSchema(M,W,re,!0),this}function S(M,$,W){return this.addSchema(M,$,W,!0),this}function C(M,$){var W=M.$schema;if(W!==void 0&&typeof W!="string")throw new Error("$schema must be a string");if(W=W||this._opts.defaultMeta||b(this),!W)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var re=this.validate(W,M);if(!re&&$){var Q="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(Q);else throw new Error(Q)}return re}function b(M){var $=M._opts.meta;return M._opts.defaultMeta=typeof $=="object"?M._getId($)||$:M.getSchema(c)?c:void 0,M._opts.defaultMeta}function E(M){var $=P(this,M);switch(typeof $){case"object":return $.validate||this._compile($);case"string":return this.getSchema($);case"undefined":return x(this,M)}}function x(M,$){var W=e.schema.call(M,{schema:{}},$);if(W){var re=W.schema,Q=W.root,X=W.baseId,ge=r.call(M,re,Q,void 0,X);return M._fragments[$]=new h({ref:$,fragment:!0,schema:re,root:Q,baseId:X,validate:ge}),ge}}function P(M,$){return $=e.normalizeId($),M._schemas[$]||M._refs[$]||M._fragments[$]}function R(M){if(M instanceof RegExp)return F(this,this._schemas,M),F(this,this._refs,M),this;switch(typeof M){case"undefined":return F(this,this._schemas),F(this,this._refs),this._cache.clear(),this;case"string":var $=P(this,M);return $&&this._cache.del($.cacheKey),delete this._schemas[M],delete this._refs[M],this;case"object":var W=this._opts.serialize,re=W?W(M):M;this._cache.del(re);var Q=this._getId(M);Q&&(Q=e.normalizeId(Q),delete this._schemas[Q],delete this._refs[Q])}return this}function F(M,$,W){for(var re in $){var Q=$[re];!Q.meta&&(!W||W.test(re))&&(M._cache.del(Q.cacheKey),delete $[re])}}function O(M,$,W,re){if(typeof M!="object"&&typeof M!="boolean")throw new Error("schema should be object or boolean");var Q=this._opts.serialize,X=Q?Q(M):M,ge=this._cache.get(X);if(ge)return ge;re=re||this._opts.addUsedSchema!==!1;var Ee=e.normalizeId(this._getId(M));Ee&&re&&ee(this,Ee);var we=this._opts.validateSchema!==!1&&!$,Be;we&&!(Be=Ee&&Ee==e.normalizeId(M.$schema))&&this.validateSchema(M,!0);var xe=e.ids.call(this,M),De=new h({id:Ee,schema:M,localRefs:xe,cacheKey:X,meta:W});return Ee[0]!="#"&&re&&(this._refs[Ee]=De),this._cache.put(X,De),we&&Be&&this.validateSchema(M,!0),De}function T(M,$){if(M.compiling)return M.validate=Q,Q.schema=M.schema,Q.errors=null,Q.root=$||Q,M.schema.$async===!0&&(Q.$async=!0),Q;M.compiling=!0;var W;M.meta&&(W=this._opts,this._opts=this._metaOpts);var re;try{re=r.call(this,M.schema,$,M.localRefs)}catch(X){throw delete M.validate,X}finally{M.compiling=!1,M.meta&&(this._opts=W)}return M.validate=re,M.refs=re.refs,M.refVal=re.refVal,M.root=re.root,re;function Q(){var X=M.validate,ge=X.apply(this,arguments);return Q.errors=X.errors,ge}}function j(M){switch(M.schemaId){case"auto":return Z;case"id":return G;default:return k}}function G(M){return M.$id&&this.logger.warn("schema $id ignored",M.$id),M.id}function k(M){return M.id&&this.logger.warn("schema id ignored",M.id),M.$id}function Z(M){if(M.$id&&M.id&&M.$id!=M.id)throw new Error("schema $id is different from id");return M.$id||M.id}function ae(M,$){if(M=M||this.errors,!M)return"No errors";$=$||{};for(var W=$.separator===void 0?", ":$.separator,re=$.dataVar===void 0?"data":$.dataVar,Q="",X=0;X<M.length;X++){var ge=M[X];ge&&(Q+=re+ge.dataPath+" "+ge.message+W)}return Q.slice(0,-W.length)}function ne(M,$){return typeof $=="string"&&($=new RegExp($)),this._formats[M]=$,this}function oe(M){var $;if(M._opts.$data&&($=Eh,M.addMetaSchema($,$.$id,!0)),M._opts.meta!==!1){var W=sl;M._opts.$data&&(W=u(W,o)),M.addMetaSchema(W,c,!0),M._refs["http://json-schema.org/schema"]=c}}function ue(M){var $=M._opts.schemas;if($)if(Array.isArray($))M.addSchema($);else for(var W in $)M.addSchema($[W],W)}function de(M){for(var $ in M._opts.formats){var W=M._opts.formats[$];M.addFormat($,W)}}function me(M){for(var $ in M._opts.keywords){var W=M._opts.keywords[$];M.addKeyword($,W)}}function ee(M,$){if(M._schemas[$]||M._refs[$])throw new Error('schema with key or id "'+$+'" already exists')}function _e(M){for(var $=f.copy(M._opts),W=0;W<d.length;W++)delete $[d[W]];return $}function Fe(M){var $=M._opts.logger;if($===!1)M.logger={log:te,warn:te,error:te};else{if($===void 0&&($=console),!(typeof $=="object"&&$.log&&$.warn&&$.error))throw new Error("logger must implement log, warn and error methods");M.logger=$}}function te(){}return ka}const xh="http://json-schema.org/draft-06/schema#",Dh="Buttplug Message Schema",Ph=1,Mh="The JSON Protocol format for the Buttplug Protocol.",Ih={Id:{description:"User-set id for the message. 0 denotes system message and is reserved.",type:"integer",minimum:0,maximum:4294967295},SystemId:{description:"Used for non-direct-reply messages that can only be sent from server to client, using the reserved system message Id of 0.",type:"integer",minimum:0,maximum:0},DeviceName:{description:"Name of the device",type:"string"},DeviceIndex:{description:"Index used for referencing the device in device messages.",type:"integer",minimum:0},IdMessage:{properties:{Id:{$ref:"#/components/Id"}},additionalProperties:!1,minProperties:1,maxProperties:1,required:["Id"]},DeviceMessages:{description:"A list of the messages a device will accept on this server implementation.",type:"array",items:{type:"string",minItems:1}},DeviceMessagesEx:{description:"A list of the messages a device will accept on this server implementation.",type:"object",items:{description:"A list of the messages attributes.",type:"object",properties:{FeatureCount:{$ref:"#/components/FeatureCount"}},additionalProperties:!0,minItems:1}},SystemIdMessage:{description:"Message sent by the server that is not in direct reply to a message send from the client, and always uses system Id.",properties:{Id:{$ref:"#/components/SystemId"}},additionalProperties:!1,minProperties:1,maxProperties:1,required:["Id"]},DeviceIndexMessage:{properties:{Id:{$ref:"#/components/Id"},DeviceIndex:{$ref:"#/components/DeviceIndex"}},additionalProperties:!1,minProperties:2,maxProperties:2,required:["Id","DeviceIndex"]},FeatureCount:{description:"Number of features on device.",type:"integer",minimum:0}},Oh=JSON.parse(`{"Ok":{"type":"object","description":"Signifies successful processing of the message indicated by the id.","anyOf":[{"$ref":"#/components/IdMessage"}]},"Ping":{"type":"object","description":"Connection keep-alive message.","anyOf":[{"$ref":"#/components/IdMessage"}]},"Error":{"type":"object","description":"Signifies the server encountered an error while processing the message indicated by the id.","properties":{"Id":{"$ref":"#/components/Id"},"ErrorMessage":{"type":"string"},"ErrorCode":{"type":"number","minimum":0,"maximum":4}},"additionalProperties":false,"minProperties":3,"maxProperties":3,"required":["Id","ErrorMessage","ErrorCode"]},"Test":{"type":"object","description":"Used for connection/application testing. Causes server to echo back the string sent. Sending string of 'Error' will result in a server error. ","properties":{"Id":{"$ref":"#/components/Id"},"TestString":{"description":"String to be echo'd back from server. Setting this to 'Error' will cause an error to be thrown.","type":"string"}},"minProperties":2,"maxProperties":2,"additionalProperties":false,"required":["Id","TestString"]},"DeviceList":{"type":"object","description":"List of all available devices known to the system.","properties":{"Id":{"$ref":"#/components/Id"},"Devices":{"description":"Array of device ids and names.","type":"array","items":{"type":"object","properties":{"DeviceName":{"$ref":"#/components/DeviceName"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"DeviceMessages":{"oneOf":[{"$ref":"#/components/DeviceMessages"},{"$ref":"#/components/DeviceMessagesEx"}]}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["DeviceName","DeviceIndex","DeviceMessages"]},"minItems":0}},"minProperties":2,"maxProperties":2,"additionalProperties":false,"required":["Id","Devices"]},"DeviceAdded":{"type":"object","description":"Notifies client that a device of a certain type has been added to the server.","properties":{"Id":{"$ref":"#/components/SystemId"},"DeviceName":{"$ref":"#/components/DeviceName"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"DeviceMessages":{"oneOf":[{"$ref":"#/components/DeviceMessages"},{"$ref":"#/components/DeviceMessagesEx"}]}},"minProperties":4,"maxProperties":4,"additionalProperties":false,"required":["Id","DeviceName","DeviceIndex","DeviceMessages"]},"DeviceRemoved":{"type":"object","description":"Notifies client that a device of a certain type has been removed from the server.","anyOf":[{"$ref":"#/components/DeviceIndexMessage"}]},"RequestDeviceList":{"type":"object","description":"Request for the server to send a list of devices to the client.","anyOf":[{"$ref":"#/components/IdMessage"}]},"StartScanning":{"type":"object","description":"Request for the server to start scanning for new devices.","anyOf":[{"$ref":"#/components/IdMessage"}]},"StopScanning":{"type":"object","description":"Request for the server to stop scanning for new devices.","anyOf":[{"$ref":"#/components/IdMessage"}]},"ScanningFinished":{"type":"object","description":"Server notification to client that scanning has ended.","anyOf":[{"$ref":"#/components/SystemIdMessage"}]},"RequestLog":{"type":"object","description":"Request for server to stream log messages of a certain level to client.","properties":{"Id":{"$ref":"#/components/Id"},"LogLevel":{"description":"Maximum level of log message to receive.","enum":["Off","Fatal","Error","Warn","Info","Debug","Trace"]}},"minProperties":2,"maxProperties":2,"additionalProperties":false,"required":["Id","LogLevel"]},"Log":{"type":"object","description":"Log message from the server.","properties":{"Id":{"$ref":"#/components/SystemId"},"LogLevel":{"description":"Log level of message.","enum":["Off","Fatal","Error","Warn","Info","Debug","Trace"]},"LogMessage":{"description":"Log message from server.","type":"string"}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Id","LogLevel","LogMessage"]},"RequestServerInfo":{"type":"object","description":"Request server version, and relay client name.","properties":{"Id":{"$ref":"#/components/Id"},"ClientName":{"description":"Name of the client software.","type":"string"},"MessageVersion":{"description":"Message template version of the client software.","type":"integer","minimum":0}},"minProperties":2,"maxProperties":3,"additionalProperties":false,"required":["Id","ClientName"]},"ServerInfo":{"type":"object","description":"Server version information, in Major.Minor.Build format.","properties":{"Id":{"$ref":"#/components/Id"},"ServerName":{"description":"Name of the server. Can be 0-length.","type":"string"},"MessageVersion":{"description":"Message template version of the server software.","type":"integer","minimum":0},"MajorVersion":{"description":"Major version of server.","type":"integer","minimum":0},"MinorVersion":{"description":"Minor version of server.","type":"integer","minimum":0},"BuildVersion":{"description":"Build version of server.","type":"integer","minimum":0},"MaxPingTime":{"description":"Maximum time (in milliseconds) the server will wait between ping messages from client before shutting down.","type":"integer","minimum":0}},"minProperties":7,"maxProperties":7,"additionalProperties":false,"required":["Id","MajorVersion","MinorVersion","BuildVersion","MessageVersion","MaxPingTime","ServerName"]},"FleshlightLaunchFW12Cmd":{"type":"object","description":"Sends speed and position command to the Fleshlight Launch Device denoted by the device index.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Speed":{"description":"Speed at which to move to designated position.","type":"integer","minimum":0,"maximum":99},"Position":{"description":"Position to which to move Fleshlight.","type":"integer","minimum":0,"maximum":99}},"minProperties":4,"maxProperties":4,"additionalProperties":false,"required":["Id","DeviceIndex","Speed","Position"]},"LovenseCmd":{"type":"object","description":"Sends a command string to a Lovense device. Command string will be verified by sender.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Command":{"description":"Command to send to Lovense device.","type":"string"}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Id","DeviceIndex","Command"]},"SingleMotorVibrateCmd":{"type":"object","description":"Sends a vibrate command to a device that supports vibration.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Speed":{"description":"Device vibration speed (floating point, 0 < x < 1), stepping will be device specific.","type":"number","minimum":0,"maximum":1}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Id","DeviceIndex","Speed"]},"RawCmd":{"type":"object","description":"Sends a raw byte array to a device. Should only be used for testing/development.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Command":{"description":"Raw byte string to send to device.","type":"array","items":{"type":"integer","minimum":0,"maximum":255,"minItems":1}}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Id","DeviceIndex","Command"]},"KiirooCmd":{"type":"object","description":"Sends a raw byte string to a Kiiroo Onyx/Pearl device.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Command":{"description":"Command to send to Kiiroo device.","type":"string"}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Id","DeviceIndex","Command"]},"VorzeA10CycloneCmd":{"type":"object","description":"Sends a raw byte string to a Kiiroo Onyx/Pearl device.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Speed":{"description":"Rotation speed command for the Cyclone.","type":"integer","minimum":0,"maximum":100},"Clockwise":{"description":"True for clockwise rotation (in relation to device facing user), false for Counter-clockwise","type":"boolean"}},"minProperties":4,"maxProperties":4,"additionalProperties":false,"required":["Id","DeviceIndex","Speed","Clockwise"]},"StopDeviceCmd":{"type":"object","description":"Stops the all actions currently being taken by a device.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"}},"minProperties":2,"maxProperties":2,"additionalProperties":false,"required":["Id","DeviceIndex"]},"StopAllDevices":{"type":"object","description":"Stops all actions currently being taken by all connected devices.","anyOf":[{"$ref":"#/components/IdMessage"}]},"VibrateCmd":{"type":"object","description":"Sends a vibrate command to a device that supports vibration.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Speeds":{"description":"Device vibration speeds (floating point, 0 < x < 1) keyed on vibrator number, stepping will be device specific.","type":"array","items":{"type":"object","properties":{"Index":{"description":"Vibrator number.","type":"integer","minimum":0},"Speed":{"description":"Vibration speed (floating point, 0 < x < 1), stepping will be device specific.","type":"number","minimum":0,"maximum":1}},"minProperties":2,"maxProperties":2,"additionalProperties":false,"required":["Index","Speed"]},"minItems":1}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Id","DeviceIndex","Speeds"]},"RotateCmd":{"type":"object","description":"Sends a rotate command to a device that supports rotation.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Rotations":{"description":"Device rotation speeds (floating point, 0 < x < 1) keyed on rotator number, stepping will be device specific.","type":"array","items":{"type":"object","properties":{"Index":{"description":"Rotator number.","type":"integer","minimum":0},"Speed":{"description":"Rotation speed (floating point, 0 < x < 1), stepping will be device specific.","type":"number","minimum":0,"maximum":1},"Clockwise":{"description":"Rotation direction (boolean). Not all devices have a concept of actual clockwise.","type":"boolean"}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Index","Speed","Clockwise"]},"minItems":1}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Id","DeviceIndex","Rotations"]},"LinearCmd":{"type":"object","description":"Sends a linear movement command to a device that supports linear movements.","properties":{"Id":{"$ref":"#/components/Id"},"DeviceIndex":{"$ref":"#/components/DeviceIndex"},"Vectors":{"description":"Device linear movement times (milliseconds) and positions (floating point, 0 < x < 1) keyed on linear actuator number, stepping will be device specific.","type":"array","items":{"type":"object","properties":{"Index":{"description":"Linear actuator number.","type":"integer","minimum":0},"Duration":{"description":"Linear movement time in milliseconds.","type":"number","minimum":0},"Position":{"description":"Linear movement position (floating point, 0 < x < 1), stepping will be device specific.","type":"number","minimum":0,"maximum":1}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Index","Duration","Position"]}}},"minProperties":3,"maxProperties":3,"additionalProperties":false,"required":["Id","DeviceIndex","Vectors"]}}`),Rh="array",Lh={title:"Messages",description:"One or more messages validated by the Buttplug Message schema list.",properties:{Ok:{$ref:"#/messages/Ok"},Error:{$ref:"#/messages/Error"},Ping:{$ref:"#/messages/Ping"},Test:{$ref:"#/messages/Test"},DeviceList:{$ref:"#/messages/DeviceList"},DeviceAdded:{$ref:"#/messages/DeviceAdded"},DeviceRemoved:{$ref:"#/messages/DeviceRemoved"},RequestDeviceList:{$ref:"#/messages/RequestDeviceList"},StopDeviceCmd:{$ref:"#/messages/StopDeviceCmd"},StopAllDevices:{$ref:"#/messages/StopAllDevices"},StartScanning:{$ref:"#/messages/StartScanning"},StopScanning:{$ref:"#/messages/StopScanning"},ScanningFinished:{$ref:"#/messages/ScanningFinished"},RequestLog:{$ref:"#/messages/RequestLog"},Log:{$ref:"#/messages/Log"},RequestServerInfo:{$ref:"#/messages/RequestServerInfo"},ServerInfo:{$ref:"#/messages/ServerInfo"},FleshlightLaunchFW12Cmd:{$ref:"#/messages/FleshlightLaunchFW12Cmd"},LovenseCmd:{$ref:"#/messages/LovenseCmd"},SingleMotorVibrateCmd:{$ref:"#/messages/SingleMotorVibrateCmd"},KiirooCmd:{$ref:"#/messages/KiirooCmd"},RawCmd:{$ref:"#/messages/RawCmd"},VorzeA10CycloneCmd:{$ref:"#/messages/VorzeA10CycloneCmd"},VibrateCmd:{$ref:"#/messages/VibrateCmd"},RotateCmd:{$ref:"#/messages/RotateCmd"},LinearCmd:{$ref:"#/messages/LinearCmd"}},additionalProperties:!1,minProperties:1,maxProperties:1},Bh=1,Ah=!1,Fh={$schema:xh,title:Dh,version:Ph,description:Mh,components:Ih,messages:Oh,type:Rh,items:Lh,minItems:Bh,additionalProperties:Ah},Th="http://json-schema.org/draft-06/schema#",$h="http://json-schema.org/draft-06/schema#",Nh="Core schema meta-schema",Vh={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},jh=["object","boolean"],qh={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},title:{type:"string"},description:{type:"string"},default:{},examples:{type:"array",items:{}},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:{}},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:{},enum:{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},kh={$schema:Th,$id:$h,title:Nh,definitions:Vh,type:jh,properties:qh,default:{}};/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var lu;function Xn(){if(lu)return ct;lu=1;var r=ct&&ct.__createBinding||(Object.create?(function(a,m,_,w){w===void 0&&(w=_),Object.defineProperty(a,w,{enumerable:!0,get:function(){return m[_]}})}):(function(a,m,_,w){w===void 0&&(w=_),a[w]=m[_]})),e=ct&&ct.__setModuleDefault||(Object.create?(function(a,m){Object.defineProperty(a,"default",{enumerable:!0,value:m})}):function(a,m){a.default=m}),i=ct&&ct.__importStar||function(a){if(a&&a.__esModule)return a;var m={};if(a!=null)for(var _ in a)_!=="default"&&Object.prototype.hasOwnProperty.call(a,_)&&r(m,a,_);return e(m,a),m},h=ct&&ct.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(ct,"__esModule",{value:!0}),ct.GetSchemaVersion=ct.FromJSON=ct.CheckMessage=void 0;const t=tl(),l=h(Ch()),p=i(Ke()),u=Ne(),f=i(Fh),s=new l.default;s.addMetaSchema(kh);const n=s.compile(f);function c(a){if(n([a.toProtocolFormat()]))return;const m=n.errors.map(_=>_.message).join("; ");throw new u.ButtplugMessageException(m)}ct.CheckMessage=c;function d(a){const m=JSON.parse(a);if(!n(m)){const w=n.errors.map(S=>S.message).join("; ");throw new u.ButtplugMessageException(w)}const _=[];for(const w of Array.from(m)){const S=t.plainToClass(p[Object.getOwnPropertyNames(w)[0]],w[Object.getOwnPropertyNames(w)[0]]);_.push(S)}return _}ct.FromJSON=d;function o(){return parseInt(f.version,10)}return ct.GetSchemaVersion=o,ct}var Zt={},fu;function Po(){if(fu)return Zt;fu=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var r=Zt&&Zt.__createBinding||(Object.create?(function(p,u,f,s){s===void 0&&(s=f),Object.defineProperty(p,s,{enumerable:!0,get:function(){return u[f]}})}):(function(p,u,f,s){s===void 0&&(s=f),p[s]=u[f]})),e=Zt&&Zt.__setModuleDefault||(Object.create?(function(p,u){Object.defineProperty(p,"default",{enumerable:!0,value:u})}):function(p,u){p.default=u}),i=Zt&&Zt.__importStar||function(p){if(p&&p.__esModule)return p;var u={};if(p!=null)for(var f in p)f!=="default"&&Object.prototype.hasOwnProperty.call(p,f)&&r(u,p,f);return e(u,p),u};Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.ButtplugClientConnectorException=void 0;const h=Ne(),t=i(Ke());let l=class extends h.ButtplugException{constructor(u){super(u,t.ErrorClass.ERROR_UNKNOWN)}};return Zt.ButtplugClientConnectorException=l,Zt}/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var du;function Uh(){if(du)return Ct;du=1;var r=Ct&&Ct.__createBinding||(Object.create?(function(d,o,a,m){m===void 0&&(m=a),Object.defineProperty(d,m,{enumerable:!0,get:function(){return o[a]}})}):(function(d,o,a,m){m===void 0&&(m=a),d[m]=o[a]})),e=Ct&&Ct.__setModuleDefault||(Object.create?(function(d,o){Object.defineProperty(d,"default",{enumerable:!0,value:o})}):function(d,o){d.default=o}),i=Ct&&Ct.__importStar||function(d){if(d&&d.__esModule)return d;var o={};if(d!=null)for(var a in d)a!=="default"&&Object.prototype.hasOwnProperty.call(d,a)&&r(o,d,a);return e(o,d),o},h=Ct&&Ct.__awaiter||function(d,o,a,m){function _(w){return w instanceof a?w:new a(function(S){S(w)})}return new(a||(a=Promise))(function(w,S){function C(x){try{E(m.next(x))}catch(P){S(P)}}function b(x){try{E(m.throw(x))}catch(P){S(P)}}function E(x){x.done?w(x.value):_(x.value).then(C,b)}E((m=m.apply(d,o||[])).next())})};Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.ButtplugClient=void 0;const t=br(),l=St(),p=nl(),u=i(Ke()),f=Xn(),s=Ne(),n=Po();class c extends l.EventEmitter{constructor(o="Generic Buttplug Client"){super(),this._pingTimer=null,this._connector=null,this._devices=new Map,this._logger=t.ButtplugLogger.Logger,this._isScanning=!1,this._messageVersion=1,this.Connect=a=>h(this,void 0,void 0,function*(){this._logger.Info(`ButtplugClient: Connecting using ${a.constructor.name}`),yield a.Connect(),this._connector=a,this._connector.addListener("message",this.ParseMessages),this._connector.addListener("disconnect",this.DisconnectHandler),yield this.InitializeConnection()}),this.Disconnect=()=>h(this,void 0,void 0,function*(){this._logger.Debug("ButtplugClient: Disconnect called"),this.CheckConnector(),yield this.ShutdownConnection(),yield this._connector.Disconnect()}),this.StartScanning=()=>h(this,void 0,void 0,function*(){this._logger.Debug("ButtplugClient: StartScanning called"),this._isScanning=!0,yield this.SendMsgExpectOk(new u.StartScanning)}),this.StopScanning=()=>h(this,void 0,void 0,function*(){this._logger.Debug("ButtplugClient: StopScanning called"),this._isScanning=!1,yield this.SendMsgExpectOk(new u.StopScanning)}),this.RequestLog=a=>h(this,void 0,void 0,function*(){this._logger.Debug(`ButtplugClient: RequestLog called with level ${a}`),yield this.SendMsgExpectOk(new u.RequestLog(a))}),this.StopAllDevices=()=>h(this,void 0,void 0,function*(){this._logger.Debug("ButtplugClient: StopAllDevices"),yield this.SendMsgExpectOk(new u.StopAllDevices)}),this.ParseMessages=a=>{this.ParseMessagesInternal(a)},this.DisconnectHandler=()=>{this._logger.Info("ButtplugClient: Disconnect event receieved."),this.emit("disconnect")},this.InitializeConnection=()=>h(this,void 0,void 0,function*(){this.CheckConnector();const a=yield this.SendMessage(new u.RequestServerInfo(this._clientName,u.MESSAGE_SPEC_VERSION));switch(a.constructor){case u.ServerInfo:{const m=a;this._logger.Info(`ButtplugClient: Connected to Server ${m.ServerName}`);const _=m.MaxPingTime;if(m.MessageVersion<this._messageVersion)throw yield this._connector.Disconnect(),s.ButtplugException.LogAndError(s.ButtplugInitException,this._logger,"Server protocol version is older than client protocol version. Please update server.");return _>0&&(this._pingTimer=setInterval(()=>h(this,void 0,void 0,function*(){if(!this.Connected){yield this.ShutdownConnection();return}yield this.SendMessage(new u.Ping)}),Math.round(_/2))),yield this.RequestDeviceList(),!0}case u.Error:{yield this._connector.Disconnect();const m=a;throw s.ButtplugException.LogAndError(s.ButtplugInitException,this._logger,`Cannot connect to server. ${m.ErrorMessage}`)}}return!1}),this.RequestDeviceList=()=>h(this,void 0,void 0,function*(){this.CheckConnector(),this._logger.Debug("ButtplugClient: ReceiveDeviceList called"),(yield this.SendMessage(new u.RequestDeviceList)).Devices.forEach(m=>{if(this._devices.has(m.DeviceIndex))this._logger.Debug(`ButtplugClient: Device already added: ${m}`);else{const _=p.ButtplugClientDevice.fromMsg(m,this.SendDeviceMessageClosure);this._logger.Debug(`ButtplugClient: Adding Device: ${_}`),this._devices.set(m.DeviceIndex,_),this.emit("deviceadded",_)}})}),this.ShutdownConnection=()=>h(this,void 0,void 0,function*(){yield this.StopAllDevices(),this._pingTimer!==null&&(clearInterval(this._pingTimer),this._pingTimer=null)}),this.SendMsgExpectOk=a=>h(this,void 0,void 0,function*(){const m=yield this.SendMessage(a);switch(m.constructor){case u.Ok:return;case u.Error:throw s.ButtplugException.FromError(m);default:throw s.ButtplugException.LogAndError(s.ButtplugMessageException,this._logger,`Message type ${m.constructor} not handled bySendMsgExpectOk`)}}),this.SendDeviceMessageClosure=(a,m)=>h(this,void 0,void 0,function*(){yield this.SendDeviceMessage(a,m)}),this._clientName=o,this._logger.Debug(`ButtplugClient: Client ${o} created.`)}get Connector(){return this._connector}get Connected(){return this._connector!==null&&this._connector.Connected}get Devices(){this.CheckConnector();const o=[];return this._devices.forEach((a,m)=>{o.push(a)}),o}get IsScanning(){return this._isScanning}SendDeviceMessage(o,a){return h(this,void 0,void 0,function*(){this.CheckConnector();const m=this._devices.get(o.Index);if(m===void 0)throw s.ButtplugException.LogAndError(s.ButtplugDeviceException,this._logger,`Device ${o.Index} not available.`);if(m.AllowedMessages.indexOf(a.Type.name.replace("_",""))===-1)throw s.ButtplugException.LogAndError(s.ButtplugDeviceException,this._logger,`Device ${o.Name} does not accept message type ${a.Type}.`);a.DeviceIndex=o.Index,yield this.SendMsgExpectOk(a)})}ParseMessagesInternal(o){for(const a of o)switch(a.constructor){case u.Log:this.emit("log",a);break;case u.DeviceAdded:const m=a,_=p.ButtplugClientDevice.fromMsg(m,this.SendDeviceMessageClosure);this._devices.set(m.DeviceIndex,_),this.emit("deviceadded",_);break;case u.DeviceRemoved:const w=a;if(this._devices.has(w.DeviceIndex)){const S=this._devices.get(w.DeviceIndex);S?.EmitDisconnected(),this._devices.delete(w.DeviceIndex),this.emit("deviceremoved",S)}break;case u.ScanningFinished:this._isScanning=!1,this.emit("scanningfinished",a);break}}SendMessage(o){return h(this,void 0,void 0,function*(){return this.CheckConnector(),f.CheckMessage(o),yield this._connector.Send(o)})}CheckConnector(){if(!this.Connected)throw new n.ButtplugClientConnectorException("ButtplugClient not connected")}}return Ct.ButtplugClient=c,Ct}var Tr={},er={},hu;function Mo(){if(hu)return er;hu=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var r=er&&er.__createBinding||(Object.create?(function(p,u,f,s){s===void 0&&(s=f),Object.defineProperty(p,s,{enumerable:!0,get:function(){return u[f]}})}):(function(p,u,f,s){s===void 0&&(s=f),p[s]=u[f]})),e=er&&er.__setModuleDefault||(Object.create?(function(p,u){Object.defineProperty(p,"default",{enumerable:!0,value:u})}):function(p,u){p.default=u}),i=er&&er.__importStar||function(p){if(p&&p.__esModule)return p;var u={};if(p!=null)for(var f in p)f!=="default"&&Object.prototype.hasOwnProperty.call(p,f)&&r(u,p,f);return e(u,p),u};Object.defineProperty(er,"__esModule",{value:!0}),er.ButtplugMessageSorter=void 0;const h=i(Ke()),t=Ne();let l=class{constructor(u){this._useCounter=u,this._counter=1,this._waitingMsgs=new Map}PrepareOutgoingMessage(u){this._useCounter&&(u.Id=this._counter,this._counter+=1);let f,s;const n=new Promise((c,d)=>{f=c,s=d});return this._waitingMsgs.set(u.Id,[f,s]),n}ParseIncomingMessages(u){const f=[];for(const s of u)if(s.Id!==h.SYSTEM_MESSAGE_ID&&this._waitingMsgs.has(s.Id)){const[n,c]=this._waitingMsgs.get(s.Id);if(s.Type===h.Error){c(t.ButtplugException.FromError(s));continue}n(s);continue}else f.push(s);return f}};return er.ButtplugMessageSorter=l,er}var $r={};/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var vu;function ul(){if(vu)return $r;vu=1;var r=$r&&$r.__awaiter||function(t,l,p,u){function f(s){return s instanceof p?s:new p(function(n){n(s)})}return new(p||(p=Promise))(function(s,n){function c(a){try{o(u.next(a))}catch(m){n(m)}}function d(a){try{o(u.throw(a))}catch(m){n(m)}}function o(a){a.done?s(a.value):f(a.value).then(c,d)}o((u=u.apply(t,l||[])).next())})};Object.defineProperty($r,"__esModule",{value:!0}),$r.ButtplugBrowserWebsocketConnector=void 0;const e=St(),i=Xn();let h=class extends e.EventEmitter{constructor(l){super(),this._url=l,this.Connect=()=>r(this,void 0,void 0,function*(){const p=new WebSocket(this._url);let u,f;const s=new Promise((c,d)=>{u=c,f=d}),n=c=>f();return p.addEventListener("open",c=>r(this,void 0,void 0,function*(){this._ws=p;try{yield this.Initialize(),this._ws.addEventListener("message",d=>{this.ParseIncomingMessage(d)}),this._ws.removeEventListener("close",n),this._ws.addEventListener("close",this.Disconnect),u()}catch(d){console.log(d),f()}})),p.addEventListener("close",n),s}),this.Disconnect=()=>r(this,void 0,void 0,function*(){this.Connected&&(this._ws.close(),this._ws=void 0,this.emit("disconnect"))}),this.Initialize=()=>r(this,void 0,void 0,function*(){return Promise.resolve()})}get Connected(){return this._ws!==void 0}SendMessage(l){if(!this.Connected)throw new Error("ButtplugBrowserWebsocketConnector not connected");this._ws.send("["+l.toJSON()+"]")}ParseIncomingMessage(l){if(console.log("Calling parent parse incoming"),typeof l.data=="string"){const p=i.FromJSON(l.data);this.emit("message",p)}else if(l.data instanceof Blob){const p=new FileReader;p.addEventListener("load",u=>{this.OnReaderLoad(u)}),p.readAsText(l.data)}}OnReaderLoad(l){const p=i.FromJSON(l.target.result);this.emit("message",p)}};return $r.ButtplugBrowserWebsocketConnector=h,$r}/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var pu;function Wh(){if(pu)return Tr;pu=1;var r=Tr&&Tr.__awaiter||function(l,p,u,f){function s(n){return n instanceof u?n:new u(function(c){c(n)})}return new(u||(u=Promise))(function(n,c){function d(m){try{a(f.next(m))}catch(_){c(_)}}function o(m){try{a(f.throw(m))}catch(_){c(_)}}function a(m){m.done?n(m.value):s(m.value).then(d,o)}a((f=f.apply(l,p||[])).next())})};Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.ButtplugBrowserWebsocketClientConnector=void 0;const e=Xn(),i=Mo(),h=ul();let t=class extends h.ButtplugBrowserWebsocketConnector{constructor(p){super(p),this._sorter=new i.ButtplugMessageSorter(!0),this.Send=u=>r(this,void 0,void 0,function*(){if(!this.Connected)throw new Error("ButtplugClient not connected");const f=this._sorter.PrepareOutgoingMessage(u);return this.SendMessage(u),yield f}),this.ParseIncomingMessage=u=>{if(typeof u.data=="string"){const f=e.FromJSON(u.data),s=this._sorter.ParseIncomingMessages(f);this.emit("message",s)}else if(u.data instanceof Blob){const f=new FileReader;f.addEventListener("load",s=>{this.OnReaderLoad(s)}),f.readAsText(u.data)}}}get Connected(){return this._ws!==void 0}OnReaderLoad(p){const u=e.FromJSON(p.target.result),f=this._sorter.ParseIncomingMessages(u);this.emit("message",f)}};return Tr.ButtplugBrowserWebsocketClientConnector=t,Tr}var Nr={},Dt={},Pt={},Vr={},Mt={},Ln={},Ua={},mu;function Or(){return mu||(mu=1,(function(r){/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */Object.defineProperty(r,"__esModule",{value:!0}),r.GetEndpoint=r.Endpoints=void 0;function e(p){const u={};return Object.keys(p).forEach(f=>u[p[f]]=f),u}function i(p){return Object.assign(e(p),p)}var h;(function(p){p.Tx="tx",p.Rx="rx",p.Command="command",p.Firmware="firmware",p.TxMode="txmode",p.TxVibrate="txvibrate",p.TxShock="txshock",p.TxVendorControl="txvendorcontrol",p.RxTouch="rxtouch",p.RxAccel="rxaccel",p.Whitelist="whitelist"})(h=r.Endpoints||(r.Endpoints={}));const t=i(h);function l(p){try{return t[p]}catch{return null}}r.GetEndpoint=l})(Ua)),Ua}var gu;function Io(){if(gu)return Ln;gu=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.BluetoothLEProtocolConfiguration=void 0;const r=Or(),e=Ne();let i=class oo{constructor(t,l){this._names=[],this._services=new Map,this._names=t,this._services=l||new Map}get Names(){return this._names}get Services(){return this._services}static ConstructFromObject(t){if(Object.getOwnPropertyNames(t).indexOf("names")===-1)throw new e.ButtplugDeviceException("Need a names property to load bluetooth device from.");if(Object.getOwnPropertyNames(t).indexOf("services")===-1)throw new e.ButtplugDeviceException("Need a services property to load bluetooth device from.");const l=t.names,p=new Map;for(const f of Object.keys(t.services)){const s=new Map;if(Object.getOwnPropertyNames(t.services).indexOf(f)!==-1&&t.services[f]!==null)for(const n of Object.keys(t.services[f])){const c=r.GetEndpoint(n);if(c==null)throw new e.ButtplugDeviceException(`Device with names ${l} lists invalid endpoint ${n}.`);s.set(c,t.services[f][n])}p.set(f,s)}return new oo(l,p)}Matches(t){if(!(t instanceof oo))return!1;const l=t;if(l.Names.length!==1)throw new e.ButtplugDeviceException("Device checks should only happen against 1 name.");for(const u of this.Names){if(l.Names.indexOf(u)!==-1)return!0;if(!u.endsWith("*"))continue;const f=u.substr(0,u.length-1);if(l.Names.findIndex(s=>s.startsWith(f))!==-1)return!0}const p=Array.from(this._services.keys());for(const u of l.Services.keys())if(p.indexOf(u)!==0)return!0;return!1}Merge(t){}};return Ln.BluetoothLEProtocolConfiguration=i,Ln}var Bn={},_u;function cl(){if(_u)return Bn;_u=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.SerialProtocolConfiguration=void 0;let r=class{constructor(i){}Matches(i){return!1}Merge(i){}};return Bn.SerialProtocolConfiguration=r,Bn}var An={},yu;function ll(){if(yu)return An;yu=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */Object.defineProperty(An,"__esModule",{value:!0}),An.HIDProtocolConfiguration=void 0;let r=class{constructor(i){}Matches(i){return!1}Merge(i){}};return An.HIDProtocolConfiguration=r,An}var It={},jr={},bu;function dt(){if(bu)return jr;bu=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var r=jr&&jr.__awaiter||function(l,p,u,f){function s(n){return n instanceof u?n:new u(function(c){c(n)})}return new(u||(u=Promise))(function(n,c){function d(m){try{a(f.next(m))}catch(_){c(_)}}function o(m){try{a(f.throw(m))}catch(_){c(_)}}function a(m){m.done?n(m.value):s(m.value).then(d,o)}a((f=f.apply(l,p||[])).next())})};Object.defineProperty(jr,"__esModule",{value:!0}),jr.ButtplugDeviceProtocol=void 0;const e=St(),i=br(),h=Ne();let t=class extends e.EventEmitter{constructor(p,u){super(),this.MsgFuncs=new Map,this._logger=i.ButtplugLogger.Logger,this.ParseMessage=f=>r(this,void 0,void 0,function*(){if(!this.MsgFuncs.has(f.Type))throw new h.ButtplugMessageException(`${this._name} cannot handle message of type ${f.Type.name}`,f.Id);return this.MsgFuncs.get(f.Type)(f)}),this._name=p,this._device=u}get Name(){return this._name}get AllowedMessageTypes(){return Array.from(this.MsgFuncs.keys())}Initialize(){return r(this,void 0,void 0,function*(){return Promise.resolve()})}};return jr.ButtplugDeviceProtocol=t,jr}var wu;function Hh(){if(wu)return It;wu=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var r=It&&It.__createBinding||(Object.create?(function(f,s,n,c){c===void 0&&(c=n),Object.defineProperty(f,c,{enumerable:!0,get:function(){return s[n]}})}):(function(f,s,n,c){c===void 0&&(c=n),f[c]=s[n]})),e=It&&It.__setModuleDefault||(Object.create?(function(f,s){Object.defineProperty(f,"default",{enumerable:!0,value:s})}):function(f,s){f.default=s}),i=It&&It.__importStar||function(f){if(f&&f.__esModule)return f;var s={};if(f!=null)for(var n in f)n!=="default"&&Object.prototype.hasOwnProperty.call(f,n)&&r(s,f,n);return e(s,f),s},h=It&&It.__awaiter||function(f,s,n,c){function d(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function m(S){try{w(c.next(S))}catch(C){a(C)}}function _(S){try{w(c.throw(S))}catch(C){a(C)}}function w(S){S.done?o(S.value):d(S.value).then(m,_)}w((c=c.apply(f,s||[])).next())})};Object.defineProperty(It,"__esModule",{value:!0}),It.Lovense=void 0;const t=i(Ke()),l=Ne(),p=dt();let u=class so extends p.ButtplugDeviceProtocol{constructor(s){super(`Lovense ${s.Name}`,s),this._initPromise=new Promise(n=>{this._initResolve=n}),this._isClockwise=!1,this._specs={VibrateCmd:{FeatureCount:1},SingleMotorVibrateCmd:{},StopDeviceCmd:{}},this.Initialize=()=>h(this,void 0,void 0,function*(){this._device.addListener("updateReceived",this.OnValueChanged),yield this._device.SubscribeToUpdates(),this._logger.Debug(`Device ${this._device.Name} waiting for initialization return`),yield this._device.WriteString("DeviceType;"),yield this._initPromise}),this.OnValueChanged=([n,c])=>h(this,void 0,void 0,function*(){if(this._initResolve!==void 0){const d=c.toString("utf-8");this._logger.Debug(`Lovense Device ${this._device.Name} got initialization return ${d}`),this.ParseDeviceType(d),this._initResolve(),this._initResolve=void 0;return}}),this.HandleStopDeviceCmd=n=>h(this,void 0,void 0,function*(){return yield this.HandleSingleMotorVibrateCmd(new t.SingleMotorVibrateCmd(0,n.DeviceIndex,n.Id)),this._specs.hasOwnProperty("RotateCmd")&&(yield this.HandleRotateCmd(new t.RotateCmd([new t.RotateSubcommand(0,0,this._isClockwise)],0,n.Id))),new t.Ok(n.Id)}),this.HandleSingleMotorVibrateCmd=n=>h(this,void 0,void 0,function*(){const c=[];for(let d=0;d<this._specs.VibrateCmd.FeatureCount;d++)c.push(new t.SpeedSubcommand(d,n.Speed));return yield this.HandleVibrateCmd(new t.VibrateCmd(c,n.DeviceIndex,n.Id))}),this.HandleVibrateCmd=n=>h(this,void 0,void 0,function*(){if(n.Speeds.length>this._specs.VibrateCmd.FeatureCount)throw new l.ButtplugDeviceException(`Lovense devices require VibrateCmd to have at most ${this._specs.VibrateCmd.FeatureCount} speed commands, ${n.Speeds.length} sent.`,n.Id);for(const c of n.Speeds){const d=this._specs.VibrateCmd.FeatureCount>1?(c.Index+1).toString(10):"",o=Math.floor(20*c.Speed);yield this._device.WriteString(`Vibrate${d}:${o};`)}return new t.Ok(n.Id)}),this.HandleRotateCmd=n=>h(this,void 0,void 0,function*(){if(n.Rotations.length!==1)throw new l.ButtplugDeviceException(`Lovense devices require RotateCmd to have 1 rotate command, ${n.Rotations.length} sent.`,n.Id);const c=n.Rotations[0];if(c.Index!==0)throw new l.ButtplugDeviceException("Rotation command sent for invalid index.");c.Clockwise!==this._isClockwise&&(yield this._device.WriteString("RotateChange;"));const d=Math.floor(20*c.Speed);return yield this._device.WriteString(`Rotate:${d};`),new t.Ok(n.Id)})}get MessageSpecifications(){return this._specs}ParseDeviceType(s){let[n,c]=s.split(":");so._deviceNames.hasOwnProperty(n)||(n="0"),this._name=`Lovense ${so._deviceNames[n]} v${c}`,this.MsgFuncs.set(t.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(t.VibrateCmd,this.HandleVibrateCmd),this.MsgFuncs.set(t.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),n==="P"?this._specs.VibrateCmd={FeatureCount:2}:(n==="A"||n==="C")&&(this._specs.RotateCmd={FeatureCount:1},this.MsgFuncs.set(t.RotateCmd,this.HandleRotateCmd))}};return It.Lovense=u,u._deviceNames={A:"Nora",B:"Max",C:"Nora",L:"Ambi",O:"Osci",P:"Edge",S:"Lush",W:"Domi",Z:"Hush",0:"Unknown"},It}var Ot={},Su;function zh(){if(Su)return Ot;Su=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var r=Ot&&Ot.__createBinding||(Object.create?(function(f,s,n,c){c===void 0&&(c=n),Object.defineProperty(f,c,{enumerable:!0,get:function(){return s[n]}})}):(function(f,s,n,c){c===void 0&&(c=n),f[c]=s[n]})),e=Ot&&Ot.__setModuleDefault||(Object.create?(function(f,s){Object.defineProperty(f,"default",{enumerable:!0,value:s})}):function(f,s){f.default=s}),i=Ot&&Ot.__importStar||function(f){if(f&&f.__esModule)return f;var s={};if(f!=null)for(var n in f)n!=="default"&&Object.prototype.hasOwnProperty.call(f,n)&&r(s,f,n);return e(s,f),s},h=Ot&&Ot.__awaiter||function(f,s,n,c){function d(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function m(S){try{w(c.next(S))}catch(C){a(C)}}function _(S){try{w(c.throw(S))}catch(C){a(C)}}function w(S){S.done?o(S.value):d(S.value).then(m,_)}w((c=c.apply(f,s||[])).next())})};Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.WeVibe=void 0;const t=i(Ke()),l=Ne(),p=dt();let u=class Wn extends p.ButtplugDeviceProtocol{constructor(s){super(`WeVibe ${s.Name}`,s),this._vibratorCount=1,this._eightBitSpeed=!1,this._hasRunCommand=!1,this._vibratorSpeed=[0,0],this._max8bit=12,this.HandleVibrateCmd=n=>h(this,void 0,void 0,function*(){if(n.Speeds.length<1||n.Speeds.length>this._vibratorCount)throw new l.ButtplugDeviceException(`WeVibe devices require VibrateCmd at least ${this._vibratorCount} speed commands, ${n.Speeds.length} sent.`,n.Id);let c=!1;for(const m of n.Speeds)Math.abs(m.Speed-this._vibratorSpeed[m.Index])>.001&&(c=!0,this._vibratorSpeed[m.Index]=m.Speed);if(!c&&this._hasRunCommand)return new t.Ok(n.Id);this._hasRunCommand=!0;const d=Buffer.from([15,3,0,0,0,3,0,0]);let o=0,a=0;return this._eightBitSpeed?(o=Math.round(this._vibratorSpeed[0]*this._max8bit),a=Math.round(this._vibratorSpeed[this._vibratorCount-1]*this._max8bit),d[3]=a+3,d[4]=o+3,d[5]=o===0?0:1,d[5]|=a===0?0:2):(o=Math.round(this._vibratorSpeed[0]*15),a=Math.round(this._vibratorSpeed[this._vibratorCount-1]*15),d[3]=a,d[3]|=o<<4),o===0&&a===0&&(d[1]=0,d[3]=0,d[4]=0,d[5]=0),o===0&&a===0&&(d[1]=0,d[5]=0),yield this._device.WriteValue(d),new t.Ok(n.Id)}),this.HandleStopDeviceCmd=n=>h(this,void 0,void 0,function*(){return yield this.HandleSingleMotorVibrateCmd(new t.SingleMotorVibrateCmd(0,n.DeviceIndex,n.Id))}),this.HandleSingleMotorVibrateCmd=n=>h(this,void 0,void 0,function*(){const c=[];for(let d=0;d<this._vibratorCount;d++)c.push(new t.SpeedSubcommand(d,n.Speed));return yield this.HandleVibrateCmd(new t.VibrateCmd(c,n.DeviceIndex,n.Id))}),this._vibratorCount=Wn.DualVibes.find(n=>n===s.Name)?2:1,Wn.NameMap.hasOwnProperty(s.Name)&&(this._name=Wn.NameMap[s.Name]),s.Name==="Melt"&&(this._max8bit=22),this._eightBitSpeed=!!Wn.EightBitSpeed.find(n=>n===s.Name),this.MsgFuncs.set(t.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(t.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(t.VibrateCmd,this.HandleVibrateCmd)}get MessageSpecifications(){return{VibrateCmd:{FeatureCount:this._vibratorCount},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}};return Ot.WeVibe=u,u.DualVibes=["Cougar","4 Plus","4plus","classic","Classic","Gala","Nova","NOVAV2","Sync","Vector"],u.NameMap={Cougar:"4 Plus","4plus":"4 Plus",classic:"Classic",NOVAV2:"Nova"},u.EightBitSpeed=["Melt","Moxie","Vector"],Ot}var Rt={},Eu;function Gh(){if(Eu)return Rt;Eu=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var r=Rt&&Rt.__createBinding||(Object.create?(function(n,c,d,o){o===void 0&&(o=d),Object.defineProperty(n,o,{enumerable:!0,get:function(){return c[d]}})}):(function(n,c,d,o){o===void 0&&(o=d),n[o]=c[d]})),e=Rt&&Rt.__setModuleDefault||(Object.create?(function(n,c){Object.defineProperty(n,"default",{enumerable:!0,value:c})}):function(n,c){n.default=c}),i=Rt&&Rt.__importStar||function(n){if(n&&n.__esModule)return n;var c={};if(n!=null)for(var d in n)d!=="default"&&Object.prototype.hasOwnProperty.call(n,d)&&r(c,n,d);return e(c,n),c},h=Rt&&Rt.__awaiter||function(n,c,d,o){function a(m){return m instanceof d?m:new d(function(_){_(m)})}return new(d||(d=Promise))(function(m,_){function w(b){try{C(o.next(b))}catch(E){_(E)}}function S(b){try{C(o.throw(b))}catch(E){_(E)}}function C(b){b.done?m(b.value):a(b.value).then(w,S)}C((o=o.apply(n,c||[])).next())})};Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.VorzeA10Cyclone=void 0;const t=i(Ke()),l=Ne(),p=dt();var u;(function(n){n[n.Rotate=1]="Rotate",n[n.Vibrate=3]="Vibrate"})(u||(u={}));class f{constructor(){this.Name="Vorze A10 Cyclone SA",this.CommandType=u.Rotate,this.DeviceType=1}}let s=class fl extends p.ButtplugDeviceProtocol{constructor(c){super("Vorze",c),this._devInfo=new f,this._clockwise=!0,this._speed=0,this.HandleRotateCmd=o=>h(this,void 0,void 0,function*(){if(o.Rotations.length!==1)throw new l.ButtplugDeviceException(`Vorze A10 Cyclone devices require RotateCmd to have 1 rotation command, ${o.Rotations.length} sent.`,o.Id);return yield this.HandleVorzeA10CycloneCmd(new t.VorzeA10CycloneCmd(o.Rotations[0].Speed*100,o.Rotations[0].Clockwise,o.DeviceIndex,o.Id))}),this.HandleStopDeviceCmd=o=>h(this,void 0,void 0,function*(){return this._devInfo.CommandType===u.Vibrate?yield this.HandleSingleMotorVibrateCmd(new t.SingleMotorVibrateCmd(0,o.DeviceIndex,o.Id)):yield this.HandleVorzeA10CycloneCmd(new t.VorzeA10CycloneCmd(0,!1,o.DeviceIndex,o.Id))}),this.HandleVorzeA10CycloneCmd=o=>h(this,void 0,void 0,function*(){const a=((o.Clockwise?1:0)<<7|o.Speed)&255;return yield this._device.WriteValue(Buffer.from([this._devInfo.DeviceType,this._devInfo.CommandType,a])),new t.Ok(o.Id)}),this.HandleVibrateCmd=o=>h(this,void 0,void 0,function*(){if(o.Speeds.length!==1)throw new l.ButtplugDeviceException(`Vorze devices require VibrateCmd to have 1 speed commands, ${o.Speeds.length} sent.`,o.Id);return yield this.HandleSingleMotorVibrateCmd(new t.SingleMotorVibrateCmd(o.Speeds[0].Speed,o.DeviceIndex,o.Id))}),this.HandleSingleMotorVibrateCmd=o=>h(this,void 0,void 0,function*(){const a=Math.round(o.Speed*100);return a!==this._speed&&(yield this._device.WriteValue(Buffer.from([this._devInfo.DeviceType,this._devInfo.CommandType,a]))),new t.Ok(o.Id)});const d=fl.DevInfos.get(c.Name);d!==void 0&&(this._devInfo=d,this._name=this._devInfo.Name),this.MsgFuncs.set(t.StopDeviceCmd,this.HandleStopDeviceCmd),this._devInfo.CommandType===u.Rotate&&(this.MsgFuncs.set(t.VorzeA10CycloneCmd,this.HandleVorzeA10CycloneCmd),this.MsgFuncs.set(t.RotateCmd,this.HandleRotateCmd)),this._devInfo.CommandType===u.Vibrate&&(this.MsgFuncs.set(t.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(t.VibrateCmd,this.HandleVibrateCmd))}get MessageSpecifications(){return this._devInfo.CommandType===u.Vibrate?{VibrateCmd:{FeatureCount:1},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}:{RotateCmd:{FeatureCount:1},VorzeA10CycloneCmd:{},StopDeviceCmd:{}}}};return Rt.VorzeA10Cyclone=s,s.DevInfos=new Map([["CycSA",Object.assign(new f,{Name:"Vorze A10 Cyclone SA",CommandType:u.Rotate,DeviceType:1})],["UFOSA",Object.assign(new f,{Name:"Vorze UFO SA",CommandType:u.Rotate,DeviceType:2})],["Bach smart",Object.assign(new f,{Name:"Vorze Bach",CommandType:u.Vibrate,DeviceType:6})]]),Rt}var Lt={},Cu;function Kh(){if(Cu)return Lt;Cu=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var r=Lt&&Lt.__createBinding||(Object.create?(function(s,n,c,d){d===void 0&&(d=c),Object.defineProperty(s,d,{enumerable:!0,get:function(){return n[c]}})}):(function(s,n,c,d){d===void 0&&(d=c),s[d]=n[c]})),e=Lt&&Lt.__setModuleDefault||(Object.create?(function(s,n){Object.defineProperty(s,"default",{enumerable:!0,value:n})}):function(s,n){s.default=n}),i=Lt&&Lt.__importStar||function(s){if(s&&s.__esModule)return s;var n={};if(s!=null)for(var c in s)c!=="default"&&Object.prototype.hasOwnProperty.call(s,c)&&r(n,s,c);return e(n,s),n},h=Lt&&Lt.__awaiter||function(s,n,c,d){function o(a){return a instanceof c?a:new c(function(m){m(a)})}return new(c||(c=Promise))(function(a,m){function _(C){try{S(d.next(C))}catch(b){m(b)}}function w(C){try{S(d.throw(C))}catch(b){m(b)}}function S(C){C.done?a(C.value):o(C.value).then(_,w)}S((d=d.apply(s,n||[])).next())})};Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.MagicMotion=void 0;const t=i(Ke()),l=Ne(),p=dt();class u{constructor(){this.Brand="MagicMotion",this.Name="Smart Mini Vibe",this.VibeCount=1,this.Protocol=1,this.MaxSpeed=100}}let f=class dl extends p.ButtplugDeviceProtocol{constructor(n){super("MagicMotion",n),this._devInfo=new u,this._hasRunCommand=!1,this._vibratorSpeed=[0,0],this.HandleVibrateCmd=d=>h(this,void 0,void 0,function*(){if(d.Speeds.length<1||d.Speeds.length>this._devInfo.VibeCount)throw new l.ButtplugDeviceException(`MagicMotionn devices require VibrateCmd at most ${this._devInfo.VibeCount} speed commands, ${d.Speeds.length} sent.`,d.Id);let o=!1;for(const m of d.Speeds)Math.abs(m.Speed-this._vibratorSpeed[m.Index])>.001&&(o=!0,this._vibratorSpeed[m.Index]=m.Speed);if(!o&&this._hasRunCommand)return new t.Ok(d.Id);let a;switch(this._devInfo.Protocol){case 1:a=Buffer.from([11,255,4,10,50,50,0,4,8,0,100,0]),a[9]=Math.round(this._vibratorSpeed[0]*this._devInfo.MaxSpeed);break;case 2:a=Buffer.from([16,255,4,10,50,10,0,4,8,0,100,0,4,8,0,100,1]),a[9]=Math.round(this._vibratorSpeed[0]*this._devInfo.MaxSpeed),this._devInfo.VibeCount>=2&&(a[14]=Math.round(this._vibratorSpeed[1]*this._devInfo.MaxSpeed));break;case 3:a=Buffer.from([11,255,4,10,70,70,0,4,8,0,100,0]),a[9]=Math.round(this._vibratorSpeed[0]*this._devInfo.MaxSpeed);break;default:throw new l.ButtplugDeviceException("Unknown communication protocol.")}return this._hasRunCommand=!0,yield this._device.WriteValue(a),new t.Ok(d.Id)}),this.HandleStopDeviceCmd=d=>h(this,void 0,void 0,function*(){return yield this.HandleSingleMotorVibrateCmd(new t.SingleMotorVibrateCmd(0,d.DeviceIndex,d.Id))}),this.HandleSingleMotorVibrateCmd=d=>h(this,void 0,void 0,function*(){const o=[];for(let a=0;a<this._devInfo.VibeCount;a++)o.push(new t.SpeedSubcommand(a,d.Speed));return yield this.HandleVibrateCmd(new t.VibrateCmd(o,d.DeviceIndex,d.Id))});const c=dl.DevInfos.get(n.Name);c!==void 0&&(this._devInfo=c,this._name=`${this._devInfo.Brand} ${this._devInfo.Name}`),this.MsgFuncs.set(t.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(t.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(t.VibrateCmd,this.HandleVibrateCmd)}get MessageSpecifications(){return{VibrateCmd:{FeatureCount:this._devInfo.VibeCount},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}};return Lt.MagicMotion=f,f.DevInfos=new Map([["Smart Mini Vibe",Object.assign(new u,{Brand:"MagicMotion",Name:"Smart Mini Vibe",VibeCount:1,Protocol:1,MaxSpeed:100})],["Flamingo",Object.assign(new u,{Brand:"MagicMotion",Name:"Flamingo",VibeCount:1,Protocol:1,MaxSpeed:100})],["Magic Cell",Object.assign(new u,{Brand:"MagicMotion",Name:"Dante/Candy",VibeCount:1,Protocol:1,MaxSpeed:100})],["Eidolon",Object.assign(new u,{Brand:"MagicMotion",Name:"Eidolon",VibeCount:2,Protocol:2,MaxSpeed:100})],["Smart Bean",Object.assign(new u,{Brand:"MagicMotion",Name:"Kegel",VibeCount:1,Protocol:1,MaxSpeed:100})],["Magic Wand",Object.assign(new u,{Brand:"MagicMotion",Name:"Wand",VibeCount:1,Protocol:1,MaxSpeed:100})],["Krush",Object.assign(new u,{Brand:"LoveLife",Name:"Krush",VibeCount:1,Protocol:3,MaxSpeed:77})],["Smart Mini Vibe3",Object.assign(new u,{Brand:"MagicMotion",Name:"Vini",VibeCount:1,Protocol:1,MaxSpeed:100})],["Fugu",Object.assign(new u,{Brand:"MagicMotion",Name:"Fugu",VibeCount:1,Protocol:1,MaxSpeed:100})],["Lipstick",Object.assign(new u,{Brand:"MagicMotion",Name:"Awaken",VibeCount:1,Protocol:2,MaxSpeed:100})],["Sword",Object.assign(new u,{Brand:"MagicMotion",Name:"Equinox",VibeCoun:1,Protocol:2,MaxSpeed:100})],["Curve",Object.assign(new u,{Brand:"MagicMotion",Name:"Solstice",VibeCount:1,Protocol:2,MaxSpeed:100})]]),Lt}var Bt={},Fn={},xu;function Ai(){if(xu)return Fn;xu=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.ButtplugDeviceWriteOptions=void 0;const r=Or();let e=class{constructor(h){this.Endpoint=r.Endpoints.Tx,this.WriteWithResponse=!1,Object.assign(this,h)}};return Fn.ButtplugDeviceWriteOptions=e,Fn}var Du;function Qh(){if(Du)return Bt;Du=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var r=Bt&&Bt.__createBinding||(Object.create?(function(c,d,o,a){a===void 0&&(a=o),Object.defineProperty(c,a,{enumerable:!0,get:function(){return d[o]}})}):(function(c,d,o,a){a===void 0&&(a=o),c[a]=d[o]})),e=Bt&&Bt.__setModuleDefault||(Object.create?(function(c,d){Object.defineProperty(c,"default",{enumerable:!0,value:d})}):function(c,d){c.default=d}),i=Bt&&Bt.__importStar||function(c){if(c&&c.__esModule)return c;var d={};if(c!=null)for(var o in c)o!=="default"&&Object.prototype.hasOwnProperty.call(c,o)&&r(d,c,o);return e(d,c),d},h=Bt&&Bt.__awaiter||function(c,d,o,a){function m(_){return _ instanceof o?_:new o(function(w){w(_)})}return new(o||(o=Promise))(function(_,w){function S(E){try{b(a.next(E))}catch(x){w(x)}}function C(E){try{b(a.throw(E))}catch(x){w(x)}}function b(E){E.done?_(E.value):m(E.value).then(S,C)}b((a=a.apply(c,d||[])).next())})};Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.LiBo=void 0;const t=i(Ke()),l=Ne(),p=dt(),u=Or(),f=Ai();class s{constructor(){this.Name="Lottie",this.VibeCount=1,this.VibeOrder=[0,1]}}let n=class hl extends p.ButtplugDeviceProtocol{constructor(d){super("LiBo",d),this._devInfo=new s,this._hasRunCommand=!1,this._vibratorSpeed=[0,0],this.HandleVibrateCmd=a=>h(this,void 0,void 0,function*(){if(a.Speeds.length<1||a.Speeds.length>this._devInfo.VibeCount)throw new l.ButtplugDeviceException(`Libo devices require VibrateCmd to have at most ${this._devInfo.VibeCount} speed commands, ${a.Speeds.length} sent.`,a.Id);const m=[!1,!1];for(const _ of a.Speeds)Math.abs(_.Speed-this._vibratorSpeed[_.Index])>.001&&(m[_.Index]=!0,this._vibratorSpeed[_.Index]=_.Speed);if(m[this._devInfo.VibeOrder[0]]||!this._hasRunCommand){let _=u.Endpoints.Tx;this._devInfo.VibeCount===1&&Math.ceil(this._vibratorSpeed[this._devInfo.VibeOrder[0]]*100)===0&&(_=u.Endpoints.TxMode),yield this._device.WriteValue(Buffer.from([Math.ceil(this._vibratorSpeed[this._devInfo.VibeOrder[0]]*100)]),new f.ButtplugDeviceWriteOptions({Endpoint:_}))}return this._devInfo.VibeCount<2||!m[this._devInfo.VibeOrder[1]]&&this._hasRunCommand?(this._devInfo.VibeCount<2&&(this._hasRunCommand=!0),new t.Ok(a.Id)):(this._hasRunCommand=!0,yield this._device.WriteValue(Buffer.from([Math.ceil(this._vibratorSpeed[this._devInfo.VibeOrder[1]]*3)]),new f.ButtplugDeviceWriteOptions({Endpoint:u.Endpoints.TxMode})),new t.Ok(a.Id))}),this.HandleStopDeviceCmd=a=>h(this,void 0,void 0,function*(){return yield this.HandleSingleMotorVibrateCmd(new t.SingleMotorVibrateCmd(0,a.DeviceIndex,a.Id))}),this.HandleSingleMotorVibrateCmd=a=>h(this,void 0,void 0,function*(){const m=[];for(let _=0;_<this._devInfo.VibeCount;_++)m.push(new t.SpeedSubcommand(_,a.Speed));return yield this.HandleVibrateCmd(new t.VibrateCmd(m,a.DeviceIndex,a.Id))});const o=hl.DevInfos.get(d.Name);o!==void 0&&(this._devInfo=o,this._name=`LiBo ${this._devInfo.Name}`),this.MsgFuncs.set(t.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(t.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(t.VibrateCmd,this.HandleVibrateCmd)}get MessageSpecifications(){return{VibrateCmd:{FeatureCount:this._devInfo.VibeCount},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}};return Bt.LiBo=n,n.DevInfos=new Map([["PiPiJing",Object.assign(new s,{Name:"Elle",VibeCount:2,VibeOrder:[1,0]})],["XiaoLu",Object.assign(new s,{Name:"Lottie",VibeCount:1})],["SuoYinQiu",Object.assign(new s,{Name:"Karen",VibeCount:0})],["BaiHu",Object.assign(new s,{Name:"LaLa",VibeCount:2})],["LuXiaoHan",Object.assign(new s,{Name:"LuLu",VibeCount:1})],["MonsterPub",Object.assign(new s,{Name:"MonsterPub",VibeCount:1})]]),Bt}var At={},Pu;function Yh(){if(Pu)return At;Pu=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var r=At&&At.__createBinding||(Object.create?(function(f,s,n,c){c===void 0&&(c=n),Object.defineProperty(f,c,{enumerable:!0,get:function(){return s[n]}})}):(function(f,s,n,c){c===void 0&&(c=n),f[c]=s[n]})),e=At&&At.__setModuleDefault||(Object.create?(function(f,s){Object.defineProperty(f,"default",{enumerable:!0,value:s})}):function(f,s){f.default=s}),i=At&&At.__importStar||function(f){if(f&&f.__esModule)return f;var s={};if(f!=null)for(var n in f)n!=="default"&&Object.prototype.hasOwnProperty.call(f,n)&&r(s,f,n);return e(s,f),s},h=At&&At.__awaiter||function(f,s,n,c){function d(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function m(S){try{w(c.next(S))}catch(C){a(C)}}function _(S){try{w(c.throw(S))}catch(C){a(C)}}function w(S){S.done?o(S.value):d(S.value).then(m,_)}w((c=c.apply(f,s||[])).next())})};Object.defineProperty(At,"__esModule",{value:!0}),At.Youcups=void 0;const t=i(Ke()),l=Ne(),p=dt();let u=class extends p.ButtplugDeviceProtocol{constructor(s){super(`Youou ${s.Name}`,s),this._speed=0,this._sentVibration=!1,this.HandleVibrateCmd=n=>h(this,void 0,void 0,function*(){if(n.Speeds.length!==1)throw new l.ButtplugDeviceException(`Youcups devices require VibrateCmd to have 1 speed commands, ${n.Speeds.length} sent.`,n.Id);return yield this.HandleSingleMotorVibrateCmd(new t.SingleMotorVibrateCmd(n.Speeds[0].Speed,n.DeviceIndex,n.Id))}),this.HandleStopDeviceCmd=n=>h(this,void 0,void 0,function*(){return yield this.HandleSingleMotorVibrateCmd(new t.SingleMotorVibrateCmd(0,n.DeviceIndex,n.Id))}),this.HandleSingleMotorVibrateCmd=n=>h(this,void 0,void 0,function*(){const c=Math.round(n.Speed*8);return(c!==this._speed||!this._sentVibration)&&(this._sentVibration=!0,this._speed=c,yield this._device.WriteString(`$SYS,${c}?`)),new t.Ok(n.Id)}),this.MsgFuncs.set(t.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(t.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(t.VibrateCmd,this.HandleVibrateCmd)}get MessageSpecifications(){return{VibrateCmd:{FeatureCount:1},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}};return At.Youcups=u,At}var Ft={},Mu;function Jh(){if(Mu)return Ft;Mu=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var r=Ft&&Ft.__createBinding||(Object.create?(function(f,s,n,c){c===void 0&&(c=n),Object.defineProperty(f,c,{enumerable:!0,get:function(){return s[n]}})}):(function(f,s,n,c){c===void 0&&(c=n),f[c]=s[n]})),e=Ft&&Ft.__setModuleDefault||(Object.create?(function(f,s){Object.defineProperty(f,"default",{enumerable:!0,value:s})}):function(f,s){f.default=s}),i=Ft&&Ft.__importStar||function(f){if(f&&f.__esModule)return f;var s={};if(f!=null)for(var n in f)n!=="default"&&Object.prototype.hasOwnProperty.call(f,n)&&r(s,f,n);return e(s,f),s},h=Ft&&Ft.__awaiter||function(f,s,n,c){function d(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function m(S){try{w(c.next(S))}catch(C){a(C)}}function _(S){try{w(c.throw(S))}catch(C){a(C)}}function w(S){S.done?o(S.value):d(S.value).then(m,_)}w((c=c.apply(f,s||[])).next())})};Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.Maxpro=void 0;const t=i(Ke()),l=Ne(),p=dt();let u=class extends p.ButtplugDeviceProtocol{constructor(s){super(`Maxpro ${s.Name}`,s),this.HandleVibrateCmd=n=>h(this,void 0,void 0,function*(){if(n.Speeds.length!==1)throw new l.ButtplugDeviceException(`Maxpro devices require VibrateCmd to have 1 speed command, ${n.Speeds.length} sent.`,n.Id);return yield this.HandleSingleMotorVibrateCmd(new t.SingleMotorVibrateCmd(n.Speeds[0].Speed,n.DeviceIndex,n.Id))}),this.HandleStopDeviceCmd=n=>h(this,void 0,void 0,function*(){return yield this.HandleSingleMotorVibrateCmd(new t.SingleMotorVibrateCmd(0,n.DeviceIndex,n.Id))}),this.HandleSingleMotorVibrateCmd=n=>h(this,void 0,void 0,function*(){const c=Math.floor(n.Speed*100),d=Buffer.from([85,4,7,255,255,63,c,95,c,0]),o=d.reduce((a,m)=>a+m)&255;return d[9]=o,yield this._device.WriteValue(d),new t.Ok(n.Id)}),this.MsgFuncs.set(t.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(t.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(t.VibrateCmd,this.HandleVibrateCmd)}get MessageSpecifications(){return{VibrateCmd:{FeatureCount:1},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}};return Ft.Maxpro=u,Ft}var Tt={},Iu;function Xh(){if(Iu)return Tt;Iu=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var r=Tt&&Tt.__createBinding||(Object.create?(function(n,c,d,o){o===void 0&&(o=d),Object.defineProperty(n,o,{enumerable:!0,get:function(){return c[d]}})}):(function(n,c,d,o){o===void 0&&(o=d),n[o]=c[d]})),e=Tt&&Tt.__setModuleDefault||(Object.create?(function(n,c){Object.defineProperty(n,"default",{enumerable:!0,value:c})}):function(n,c){n.default=c}),i=Tt&&Tt.__importStar||function(n){if(n&&n.__esModule)return n;var c={};if(n!=null)for(var d in n)d!=="default"&&Object.prototype.hasOwnProperty.call(n,d)&&r(c,n,d);return e(c,n),c},h=Tt&&Tt.__awaiter||function(n,c,d,o){function a(m){return m instanceof d?m:new d(function(_){_(m)})}return new(d||(d=Promise))(function(m,_){function w(b){try{C(o.next(b))}catch(E){_(E)}}function S(b){try{C(o.throw(b))}catch(E){_(E)}}function C(b){b.done?m(b.value):a(b.value).then(w,S)}C((o=o.apply(n,c||[])).next())})};Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.FleshlightLaunch=void 0;const t=i(Ke()),l=Ne(),p=dt(),u=Or(),f=Ai();let s=class extends p.ButtplugDeviceProtocol{constructor(c){super("Fleshlight Launch",c),this._lastPosition=0,this.Initialize=()=>h(this,void 0,void 0,function*(){this._logger.Debug(`Calling Fleshlight Launch initialize on ${this._device.Name}`),yield this._device.WriteValue(Buffer.from([0]),new f.ButtplugDeviceWriteOptions({Endpoint:u.Endpoints.Firmware,WriteWithResponse:!0}))}),this.HandleStopDeviceCmd=d=>h(this,void 0,void 0,function*(){return yield this.HandleFleshlightLaunchFW12Cmd(new t.FleshlightLaunchFW12Cmd(0,0,d.DeviceIndex,d.Id))}),this.HandleFleshlightLaunchFW12Cmd=d=>h(this,void 0,void 0,function*(){return this._lastPosition=d.Position,yield this._device.WriteValue(Buffer.from([d.Position,d.Speed])),new t.Ok(d.Id)}),this.HandleLinearCmd=d=>h(this,void 0,void 0,function*(){if(d.Vectors.length!==1)throw new l.ButtplugDeviceException("LinearCmd requires 1 vector for this device.",d.Id);const o=90,a=d.Vectors[0],m=a.Position*100,_=Math.abs(m-this._lastPosition);let w=Math.floor(25e3*Math.pow(a.Duration*90/_,-1.05));w=Math.min(Math.max(w,0),95);const S=Math.floor(m/99*o+(99-o)/2);return yield this.HandleFleshlightLaunchFW12Cmd(new t.FleshlightLaunchFW12Cmd(w,S,d.DeviceIndex,d.Id))}),this.MsgFuncs.set(t.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(t.FleshlightLaunchFW12Cmd,this.HandleFleshlightLaunchFW12Cmd),this.MsgFuncs.set(t.LinearCmd,this.HandleLinearCmd)}get MessageSpecifications(){return{FleshlightLaunchFW12Cmd:{},StopDeviceCmd:{},LinearCmd:{FeatureCount:1}}}};return Tt.FleshlightLaunch=s,Tt}var $t={},Ou;function Zh(){if(Ou)return $t;Ou=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var r=$t&&$t.__createBinding||(Object.create?(function(s,n,c,d){d===void 0&&(d=c),Object.defineProperty(s,d,{enumerable:!0,get:function(){return n[c]}})}):(function(s,n,c,d){d===void 0&&(d=c),s[d]=n[c]})),e=$t&&$t.__setModuleDefault||(Object.create?(function(s,n){Object.defineProperty(s,"default",{enumerable:!0,value:n})}):function(s,n){s.default=n}),i=$t&&$t.__importStar||function(s){if(s&&s.__esModule)return s;var n={};if(s!=null)for(var c in s)c!=="default"&&Object.prototype.hasOwnProperty.call(s,c)&&r(n,s,c);return e(n,s),n},h=$t&&$t.__awaiter||function(s,n,c,d){function o(a){return a instanceof c?a:new c(function(m){m(a)})}return new(c||(c=Promise))(function(a,m){function _(C){try{S(d.next(C))}catch(b){m(b)}}function w(C){try{S(d.throw(C))}catch(b){m(b)}}function S(C){C.done?a(C.value):o(C.value).then(_,w)}S((d=d.apply(s,n||[])).next())})};Object.defineProperty($t,"__esModule",{value:!0}),$t.KiirooGen2Vibe=void 0;const t=i(Ke()),l=Ne(),p=dt();class u{constructor(){this.Brand="MagicMotion",this.Name="Smart Mini Vibe",this.VibeCount=1,this.VibeOrder=[0,1,2]}}let f=class vl extends p.ButtplugDeviceProtocol{constructor(n){super(`Kiiroo ${n.Name}`,n),this._devInfo=new u,this._hasRunCommand=!1,this._vibratorSpeed=[0,0,0],this.HandleVibrateCmd=d=>h(this,void 0,void 0,function*(){if(d.Speeds.length<1||d.Speeds.length>this._devInfo.VibeCount)throw new l.ButtplugDeviceException(`Kiiroo Gen 2 Vibrator devices require VibrateCmd at most ${this._devInfo.VibeCount} speed commands, ${d.Speeds.length} sent.`,d.Id);let o=!1;for(const m of d.Speeds)Math.abs(m.Speed-this._vibratorSpeed[m.Index])>.001&&(o=!0,this._vibratorSpeed[m.Index]=m.Speed);if(!o&&this._hasRunCommand)return new t.Ok(d.Id);const a=Buffer.from([this._vibratorSpeed[this._devInfo.VibeOrder[0]]*100,this._vibratorSpeed[this._devInfo.VibeOrder[0]]*100,this._vibratorSpeed[this._devInfo.VibeOrder[0]]*100]);return this._hasRunCommand=!0,yield this._device.WriteValue(a),new t.Ok(d.Id)}),this.HandleStopDeviceCmd=d=>h(this,void 0,void 0,function*(){return yield this.HandleSingleMotorVibrateCmd(new t.SingleMotorVibrateCmd(0,d.DeviceIndex,d.Id))}),this.HandleSingleMotorVibrateCmd=d=>h(this,void 0,void 0,function*(){const o=[];for(let a=0;a<this._devInfo.VibeCount;a++)o.push(new t.SpeedSubcommand(a,d.Speed));return yield this.HandleVibrateCmd(new t.VibrateCmd(o,d.DeviceIndex,d.Id))});const c=vl.DevInfos.get(n.Name);c!==void 0&&(this._devInfo=c,this._name=`${this._devInfo.Brand} ${n.Name}`),this.MsgFuncs.set(t.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(t.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(t.VibrateCmd,this.HandleVibrateCmd)}get MessageSpecifications(){return{VibrateCmd:{FeatureCount:this._devInfo.VibeCount},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}};return $t.KiirooGen2Vibe=f,f.DevInfos=new Map([["Pearl2",Object.assign(new u,{Brand:"Kiiroo",VibeCount:1,VibeOrder:[0,1,2]})],["Fuse",Object.assign(new u,{Brand:"OhMiBod",VibeCount:2,VibeOrder:[1,0,2]})],["Virtual Blowbot",Object.assign(new u,{Brand:"PornHub",VibeCount:3,VibeOrder:[0,1,2]})],["Titan",Object.assign(new u,{Brand:"Kiiroo",VibeCount:3,VibeOrder:[0,1,2]})]]),$t}const ev={lovense:{btle:{names:["LVS-*"],services:{"0000fff0-0000-1000-8000-00805f9b34fb":{tx:"0000fff2-0000-1000-8000-00805f9b34fb",rx:"0000fff1-0000-1000-8000-00805f9b34fb"},"6e400001-b5a3-f393-e0a9-e50e24dcca9e":{tx:"6e400002-b5a3-f393-e0a9-e50e24dcca9e",rx:"6e400003-b5a3-f393-e0a9-e50e24dcca9e"},"50300001-0024-4bd4-bbd5-a6920e4c5653":{tx:"50300002-0024-4bd4-bbd5-a6920e4c5653",rx:"50300003-0024-4bd4-bbd5-a6920e4c5653"},"57300001-0023-4bd4-bbd5-a6920e4c5653":{tx:"57300002-0023-4bd4-bbd5-a6920e4c5653",rx:"57300003-0023-4bd4-bbd5-a6920e4c5653"},"5a300001-0024-4bd4-bbd5-a6920e4c5653":{tx:"5a300002-0024-4bd4-bbd5-a6920e4c5653",rx:"5a300003-0024-4bd4-bbd5-a6920e4c5653"},"50300001-0023-4bd4-bbd5-a6920e4c5653":{tx:"50300002-0023-4bd4-bbd5-a6920e4c5653",rx:"50300003-0023-4bd4-bbd5-a6920e4c5653"},"53300001-0023-4bd4-bbd5-a6920e4c5653":{tx:"53300002-0023-4bd4-bbd5-a6920e4c5653",rx:"53300003-0023-4bd4-bbd5-a6920e4c5653"},"5a300001-0023-4bd4-bbd5-a6920e4c5653":{tx:"5a300002-0023-4bd4-bbd5-a6920e4c5653",rx:"5a300003-0023-4bd4-bbd5-a6920e4c5653"},"4f300001-0023-4bd4-bbd5-a6920e4c5653":{tx:"4f300002-0023-4bd4-bbd5-a6920e4c5653",rx:"4f300003-0023-4bd4-bbd5-a6920e4c5653"},"42300001-0023-4bd4-bbd5-a6920e4c5653":{tx:"42300002-0023-4bd4-bbd5-a6920e4c5653",rx:"42300003-0023-4bd4-bbd5-a6920e4c5653"}}}},xinput:null,libo:{btle:{names:["PiPiJing","XiaoLu","LuXiaoHan","SuoYinQiu","BaiHu","MonsterPub","Gugudai","ShaYu","Yuyi","LuWuShuang","LiBo","QingTing","Shuidi","Huohu"],services:{"00006000-0000-1000-8000-00805f9b34fb":{tx:"00006001-0000-1000-8000-00805f9b34fb",txmode:"00006002-0000-1000-8000-00805f9b34fb"}}}},"magic-motion":{btle:{names:["Smart Mini Vibe*","Flamingo","Eidolon","Smart Bean","Magic Cell","Magic Wand","Fugu","Krush","Lipstick","Sword","Curve"],services:{"78667579-7b48-43db-b8c5-7928a6b0a335":{tx:"78667579-a914-49a4-8333-aa3c0cd8fedc"}}}},mysteryvibe:{btle:{names:["MV Crescendo","MV Tenuto*"],services:{"f0006900-110c-478b-b74b-6f403b364a9c":{txmode:"f0006901-110c-478b-b74b-6f403b364a9c",txvibrate:"f0006903-110c-478b-b74b-6f403b364a9c"}}}},picobong:{btle:{names:["Blow hole","Picobong Male Toy","Diver","Picobong Egg","Life guard","Picobong Ring","Surfer","Picobong Butt Plug","Egg driver","Surfer_plug"],services:{"0000fff0-0000-1000-8000-00805f9b34fb":{tx:"0000fff1-0000-1000-8000-00805f9b34fb"}}}},vibratissimo:{btle:{names:["Vibratissimo"],services:{"00001523-1212-efde-1523-785feabcd123":{txmode:"00001524-1212-efde-1523-785feabcd123",txvibrate:"00001526-1212-efde-1523-785feabcd123",rx:"00001527-1212-efde-1523-785feabcd123"}}}},wevibe:{btle:{names:["Cougar","4 Plus","4_Plus","4plus","Bloom","classic","Classic","Ditto","Gala","Jive","Melt","Moxie","Nova","NOVAV2","Pivot","Rey","We-Vibe Rocketman","Rave","Reina","imassager","Interactive Massager","03","Sync","Vector","Verge","Wish"],services:{"f000bb03-0451-4000-b000-000000000000":{tx:"f000c000-0451-4000-b000-000000000000",rx:"f000b000-0451-4000-b000-000000000000"}}}},youcups:{btle:{names:["Youcups"],services:{"0000fee9-0000-1000-8000-00805f9b34fb":{tx:"d44bc439-abfd-45a2-b575-925416129600"}}}},cueme:{btle:{names:["FUNCODE_*"],services:{"0000fff0-0000-1000-8000-00805f9b34fb":{tx:"0000fff1-0000-1000-8000-00805f9b34fb"}}}},"kiiroo-v2-vibrator":{btle:{names:["Pearl2","Fuse","Virtual Blowbot","Titan"],services:{"88f82580-0000-01e6-aace-0002a5d5c51b":{tx:"88f82581-0000-01e6-aace-0002a5d5c51b",rxtouch:"88f82582-0000-01e6-aace-0002a5d5c51b",rxaccel:"88f82584-0000-01e6-aace-0002a5d5c51b"}}}},"kiiroo-v21":{btle:{names:["Onyx2.1","Titan1.1"],services:{"00001900-0000-1000-8000-00805f9b34fb":{whitelist:"00001901-0000-1000-8000-00805f9b34fb",tx:"00001902-0000-1000-8000-00805f9b34fb",rx:"00001903-0000-1000-8000-00805f9b34fb"}}}},"kiiroo-v21-vibrator":{btle:{names:["Cliona"],services:{"00001900-0000-1000-8000-00805f9b34fb":{whitelist:"00001901-0000-1000-8000-00805f9b34fb",tx:"00001902-0000-1000-8000-00805f9b34fb",rx:"00001903-0000-1000-8000-00805f9b34fb"}}}},"kiiroo-v2":{btle:{names:["Launch","Onyx2"],services:{"88f80580-0000-01e6-aace-0002a5d5c51b":{tx:"88f80581-0000-01e6-aace-0002a5d5c51b",rx:"88f80582-0000-01e6-aace-0002a5d5c51b",firmware:"88f80583-0000-01e6-aace-0002a5d5c51b"},"f60402a6-0293-4bdb-9f20-6758133f7090":{tx:"02962ac9-e86f-4094-989d-231d69995fc2",rx:"d44d0393-0731-43b3-a373-8fc70b1f3323",firmware:"c7b7a04b-2cc4-40ff-8b10-5d531d1161db"}}}},"erostek-et312":{serial:{"baud-rate":19200,"data-bits":8,parity:"N","stop-bits":1}},"vorze-cyclone-x":{hid:{"vendor-id":1155,"product-id":22352}},"rez-trancevibrator":{usb:{"vendor-id":2889,"product-id":1615}},"kiiroo-v1":{btle:{names:["ONYX","PEARL"],services:{"49535343-fe7d-4ae5-8fa9-9fafd205e455":{rx:"49535343-1e4d-4bd9-ba61-23c647249616",tx:"49535343-8841-43f4-a8d4-ecbe34729bb3",command:"49535343-aca3-481c-91ec-d85e28a60318",cmd2:"49535343-6daa-4d02-abf6-19569aca69fe"}}}},"vorze-sa":{btle:{names:["CycSA","Bach smart","UFOSA"],services:{"40ee1111-63ec-4b7f-8ce7-712efd55b90e":{tx:"40ee2222-63ec-4b7f-8ce7-712efd55b90e"}}}},youou:{btle:{names:["VX001_*"],services:{"0000fff0-0000-1000-8000-00805f9b34fb":{tx:"0000fff6-0000-1000-8000-00805f9b34fb"}}}},realtouch:{hid:{"vendor-id":8020,"product-id":1}},prettylove:{btle:{names:["Aogu BLE *"],services:{"0000ffe5-0000-1000-8000-00805f9b34fb":{tx:"0000ffe9-0000-1000-8000-00805f9b34fb",rx:"0000ffe2-0000-1000-8000-00805f9b34fb"}}}},svakom:{btle:{names:["Aogu SCB"],services:{"0000ffe0-0000-1000-8000-00805f9b34fb":{tx:"0000ffe1-0000-1000-8000-00805f9b34fb",rx:"0000ffe2-0000-1000-8000-00805f9b34fb"}}}},realov:{btle:{names:["REALOV_VIBE"],services:{"0000ffe0-0000-1000-8000-00805f9b34fb":{tx:"0000ffe1-0000-1000-8000-00805f9b34fb"}}}},motorbunny:{btle:{names:["MB Controller"],services:{"0000fff0-0000-1000-8000-00805f9b34fb":{tx:"0000fff6-0000-1000-8000-00805f9b34fb"}}}},zalo:{btle:{names:["ZALO-Queen"],services:{"0000fff0-0000-1000-8000-00805f9b34fb":{tx:"0000fff1-0000-1000-8000-00805f9b34fb"}}}},sayberx:{btle:{names:["SayberX"],services:{"0000fff0-0000-1000-8000-00805f9b34fb":{tx:"0000fff6-0000-1000-8000-00805f9b34fb"}}}},muse:{btle:{names:["WB-ZDB-WST","WB-TDD"],services:{"0000aaa0-0000-1000-8000-00805f9b34fb":{tx:"0000aaa1-0000-1000-8000-00805f9b34fb"}}}},"lelo-f1s":{btle:{names:["F1s"],services:{"0000fff0-0000-1000-8000-00805f9b34fb":{tx:"0000fff1-0000-1000-8000-00805f9b34fb"}}}},aneros:{btle:{names:["Massage Demo"],services:{"0000ff00-0000-1000-8000-00805f9b34fb":{tx:"0000ff01-0000-1000-8000-00805f9b34fb"}}}},"lovehoney-desire":{btle:{names:["PROSTATE VIBE","KNICKER VIBE"],services:{"0000ff00-0000-1000-8000-00805f9b34fb":{tx:"0000ff01-0000-1000-8000-00805f9b34fb"}}}},twerkingbutt:{btle:{names:["BODIKANG","Twerking Butt","TwerkingButt"],services:{"00000a60-0000-1000-8000-00805f9b34fb":{tx:"00000a66-0000-1000-8000-00805f9b34fb",rx:"00000a67-0000-1000-8000-00805f9b34fb"}}}}},tv={"connection-info-types":["btle","serial","usb","hid"],protocols:ev};var Nt={},Tn={},Ru;function Fi(){if(Ru)return Tn;Ru=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */Object.defineProperty(Tn,"__esModule",{value:!0}),Tn.ButtplugDeviceReadOptions=void 0;const r=Or();let e=class{constructor(h){this.Endpoint=r.Endpoints.Rx,this.Timeout=-1,this.ReadLength=-1,Object.assign(this,h)}};return Tn.ButtplugDeviceReadOptions=e,Tn}var Lu;function rv(){if(Lu)return Nt;Lu=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var r=Nt&&Nt.__createBinding||(Object.create?(function(n,c,d,o){o===void 0&&(o=d),Object.defineProperty(n,o,{enumerable:!0,get:function(){return c[d]}})}):(function(n,c,d,o){o===void 0&&(o=d),n[o]=c[d]})),e=Nt&&Nt.__setModuleDefault||(Object.create?(function(n,c){Object.defineProperty(n,"default",{enumerable:!0,value:c})}):function(n,c){n.default=c}),i=Nt&&Nt.__importStar||function(n){if(n&&n.__esModule)return n;var c={};if(n!=null)for(var d in n)d!=="default"&&Object.prototype.hasOwnProperty.call(n,d)&&r(c,n,d);return e(c,n),c},h=Nt&&Nt.__awaiter||function(n,c,d,o){function a(m){return m instanceof d?m:new d(function(_){_(m)})}return new(d||(d=Promise))(function(m,_){function w(b){try{C(o.next(b))}catch(E){_(E)}}function S(b){try{C(o.throw(b))}catch(E){_(E)}}function C(b){b.done?m(b.value):a(b.value).then(w,S)}C((o=o.apply(n,c||[])).next())})};Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.Youou=void 0;const t=i(Ke()),l=Ne(),p=dt(),u=Fi(),f=Or();let s=class extends p.ButtplugDeviceProtocol{constructor(c){super(`Youou ${c.Name}`,c),this._packetId=0,this.Initialize=()=>h(this,void 0,void 0,function*(){this._logger.Debug(`Calling Youou initialize on ${this._device.Name}`),yield this._device.ReadValue(new u.ButtplugDeviceReadOptions({Endpoint:f.Endpoints.Tx}))}),this.HandleVibrateCmd=d=>h(this,void 0,void 0,function*(){if(d.Speeds.length!==1)throw new l.ButtplugDeviceException(`Youou devices require VibrateCmd to have 1 speed commands, ${d.Speeds.length} sent.`,d.Id);return yield this.HandleSingleMotorVibrateCmd(new t.SingleMotorVibrateCmd(d.Speeds[0].Speed,d.DeviceIndex,d.Id))}),this.HandleStopDeviceCmd=d=>h(this,void 0,void 0,function*(){return yield this.HandleSingleMotorVibrateCmd(new t.SingleMotorVibrateCmd(0,d.DeviceIndex,d.Id))}),this.HandleSingleMotorVibrateCmd=d=>h(this,void 0,void 0,function*(){const a=d.Speed*247,m=d.Speed>0?1:0,_=Buffer.from([170,85,this._packetId,2,3,1,a,m]);let w=0;for(const C of _)w=C^w;const S=Buffer.concat([_,Buffer.from([w,255,0,0,0,0,0,0,0])]);return this._packetId+=1,this._packetId>255&&(this._packetId=0),yield this._device.WriteValue(S),new t.Ok(d.Id)}),this.MsgFuncs.set(t.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(t.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(t.VibrateCmd,this.HandleVibrateCmd)}get MessageSpecifications(){return{VibrateCmd:{FeatureCount:1},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}};return Nt.Youou=s,Nt}var Vt={},Bu;function nv(){if(Bu)return Vt;Bu=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var r=Vt&&Vt.__createBinding||(Object.create?(function(f,s,n,c){c===void 0&&(c=n),Object.defineProperty(f,c,{enumerable:!0,get:function(){return s[n]}})}):(function(f,s,n,c){c===void 0&&(c=n),f[c]=s[n]})),e=Vt&&Vt.__setModuleDefault||(Object.create?(function(f,s){Object.defineProperty(f,"default",{enumerable:!0,value:s})}):function(f,s){f.default=s}),i=Vt&&Vt.__importStar||function(f){if(f&&f.__esModule)return f;var s={};if(f!=null)for(var n in f)n!=="default"&&Object.prototype.hasOwnProperty.call(f,n)&&r(s,f,n);return e(s,f),s},h=Vt&&Vt.__awaiter||function(f,s,n,c){function d(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function m(S){try{w(c.next(S))}catch(C){a(C)}}function _(S){try{w(c.throw(S))}catch(C){a(C)}}function w(S){S.done?o(S.value):d(S.value).then(m,_)}w((c=c.apply(f,s||[])).next())})};Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.KiirooGen21=void 0;const t=i(Ke()),l=Ne(),p=dt();let u=class extends p.ButtplugDeviceProtocol{constructor(s){super("Kiiroo Onyx 2.1",s),this._lastPosition=0,this.HandleStopDeviceCmd=n=>h(this,void 0,void 0,function*(){return yield this.HandleFleshlightLaunchFW12Cmd(new t.FleshlightLaunchFW12Cmd(0,0,n.DeviceIndex,n.Id))}),this.HandleFleshlightLaunchFW12Cmd=n=>h(this,void 0,void 0,function*(){return this._lastPosition=n.Position,yield this._device.WriteValue(Buffer.from([3,0,n.Speed,n.Position])),new t.Ok(n.Id)}),this.HandleLinearCmd=n=>h(this,void 0,void 0,function*(){if(n.Vectors.length!==1)throw new l.ButtplugDeviceException("LinearCmd requires 1 vector for this device.",n.Id);const c=99,d=n.Vectors[0],o=d.Position*100,a=Math.abs(o-this._lastPosition);let m=Math.floor(25e3*Math.pow(d.Duration*90/a,-1.05));m=Math.min(Math.max(m,0),95);const _=Math.floor(o/99*c+(99-c)/2);return yield this.HandleFleshlightLaunchFW12Cmd(new t.FleshlightLaunchFW12Cmd(m,_,n.DeviceIndex,n.Id))}),this.MsgFuncs.set(t.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(t.FleshlightLaunchFW12Cmd,this.HandleFleshlightLaunchFW12Cmd),this.MsgFuncs.set(t.LinearCmd,this.HandleLinearCmd)}get MessageSpecifications(){return{FleshlightLaunchFW12Cmd:{},StopDeviceCmd:{},LinearCmd:{FeatureCount:1}}}};return Vt.KiirooGen21=u,Vt}var jt={},Au;function iv(){if(Au)return jt;Au=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var r=jt&&jt.__createBinding||(Object.create?(function(f,s,n,c){c===void 0&&(c=n),Object.defineProperty(f,c,{enumerable:!0,get:function(){return s[n]}})}):(function(f,s,n,c){c===void 0&&(c=n),f[c]=s[n]})),e=jt&&jt.__setModuleDefault||(Object.create?(function(f,s){Object.defineProperty(f,"default",{enumerable:!0,value:s})}):function(f,s){f.default=s}),i=jt&&jt.__importStar||function(f){if(f&&f.__esModule)return f;var s={};if(f!=null)for(var n in f)n!=="default"&&Object.prototype.hasOwnProperty.call(f,n)&&r(s,f,n);return e(s,f),s},h=jt&&jt.__awaiter||function(f,s,n,c){function d(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function m(S){try{w(c.next(S))}catch(C){a(C)}}function _(S){try{w(c.throw(S))}catch(C){a(C)}}function w(S){S.done?o(S.value):d(S.value).then(m,_)}w((c=c.apply(f,s||[])).next())})};Object.defineProperty(jt,"__esModule",{value:!0}),jt.Motorbunny=void 0;const t=i(Ke()),l=Ne(),p=dt();let u=class extends p.ButtplugDeviceProtocol{constructor(s){super("Motorbunny",s),this.HandleVibrateCmd=n=>h(this,void 0,void 0,function*(){if(n.Speeds.length!==1)throw new l.ButtplugDeviceException(`Motorbunny devices require VibrateCmd to have 1 speed command, ${n.Speeds.length} sent.`,n.Id);return yield this.HandleSingleMotorVibrateCmd(new t.SingleMotorVibrateCmd(n.Speeds[0].Speed,n.DeviceIndex,n.Id))}),this.HandleRotateCmd=n=>h(this,void 0,void 0,function*(){if(n.Rotations.length!==1)throw new l.ButtplugDeviceException(`Motorbunny devices require RotateCmd to have 1 speed command, ${n.Rotations.length} sent.`,n.Id);const c=Math.floor(n.Rotations[0].Speed*255);if(c<5){const a=Buffer.from([160,0,0,0,0,236]);return yield this._device.WriteValue(a),new t.Ok(n.Id)}let d=[];for(let a=0;a<7;++a)d=d.concat([n.Rotations[0].Clockwise?42:41,c]);const o=d.reduce((a,m)=>a+m)&255;return d=[175].concat(d).concat([o,236]),yield this._device.WriteValue(Buffer.from(d)),new t.Ok(n.Id)}),this.HandleStopDeviceCmd=n=>h(this,void 0,void 0,function*(){return yield this.HandleSingleMotorVibrateCmd(new t.SingleMotorVibrateCmd(0,n.DeviceIndex,n.Id))}),this.HandleSingleMotorVibrateCmd=n=>h(this,void 0,void 0,function*(){const c=Math.floor(n.Speed*255);if(c<5){const a=Buffer.from([240,0,0,0,0,236]);return yield this._device.WriteValue(a),new t.Ok(n.Id)}let d=[];for(let a=0;a<7;++a)d=d.concat([c,20]);const o=d.reduce((a,m)=>a+m)&255;return d=[255].concat(d).concat([o,236]),yield this._device.WriteValue(Buffer.from(d)),new t.Ok(n.Id)}),this.MsgFuncs.set(t.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(t.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(t.VibrateCmd,this.HandleVibrateCmd),this.MsgFuncs.set(t.RotateCmd,this.HandleRotateCmd)}get MessageSpecifications(){return{VibrateCmd:{FeatureCount:1},RotateCmd:{FeatureCount:1},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}};return jt.Motorbunny=u,jt}var Fu;function Oo(){if(Fu)return Mt;Fu=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var r=Mt&&Mt.__createBinding||(Object.create?(function(x,P,R,F){F===void 0&&(F=R),Object.defineProperty(x,F,{enumerable:!0,get:function(){return P[R]}})}):(function(x,P,R,F){F===void 0&&(F=R),x[F]=P[R]})),e=Mt&&Mt.__setModuleDefault||(Object.create?(function(x,P){Object.defineProperty(x,"default",{enumerable:!0,value:P})}):function(x,P){x.default=P}),i=Mt&&Mt.__importStar||function(x){if(x&&x.__esModule)return x;var P={};if(x!=null)for(var R in x)R!=="default"&&Object.prototype.hasOwnProperty.call(x,R)&&r(P,x,R);return e(P,x),P},h=Mt&&Mt.__awaiter||function(x,P,R,F){function O(T){return T instanceof R?T:new R(function(j){j(T)})}return new(R||(R=Promise))(function(T,j){function G(ae){try{Z(F.next(ae))}catch(ne){j(ne)}}function k(ae){try{Z(F.throw(ae))}catch(ne){j(ne)}}function Z(ae){ae.done?T(ae.value):O(ae.value).then(G,k)}Z((F=F.apply(x,P||[])).next())})};Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.DeviceConfigurationManager=void 0;const t=Ne(),l=Io(),p=cl(),u=ll(),f=Hh(),s=zh(),n=Gh(),c=Kh(),d=Qh(),o=Yh(),a=Jh(),m=Xh(),_=Zh(),w=i(tv),S=rv(),C=nv(),b=iv();let E=class xr{constructor(P){this._configObject={},this._configs=new Map,this._protocols=new Map,this._configObject=P,this._protocols.set("lovense",f.Lovense),this._protocols.set("wevibe",s.WeVibe),this._protocols.set("vorze-sa",n.VorzeA10Cyclone),this._protocols.set("magic-motion",c.MagicMotion),this._protocols.set("maxpro",a.Maxpro),this._protocols.set("kiiroo-v2",m.FleshlightLaunch),this._protocols.set("kiiroo-v21",C.KiirooGen21),this._protocols.set("kiiroo-v2-vibrator",_.KiirooGen2Vibe),this._protocols.set("youou",S.Youou),this._protocols.set("youcups",o.Youcups),this._protocols.set("libo",d.LiBo),this._protocols.set("motorbunny",b.Motorbunny),this.ParseConfig()}static get Manager(){if(xr._manager===null)throw new t.ButtplugDeviceException("Device configuration manager not yet initialized!");return xr._manager}static LoadFromInternalConfig(){xr._manager=new xr(w)}static LoadFromJsonExternalConfig(P){const R=JSON.parse(P);xr._manager=new xr(R)}static LoadFromWebConfig(P="https://buttplug-device-config.buttplug.io"){return h(this,void 0,void 0,function*(){const R=yield fetch(P);xr.LoadFromJsonExternalConfig(yield R.text())})}LoadUserConfiguration(){}GetAllConfigsOfType(P){const R=[];for(const[F,O]of this._configs.entries())O instanceof P&&R.push(O);return R}Find(P){for(const[R,F]of this._configs.entries())if(F.Matches(P))return[F,this._protocols.get(R)]}ParseConfig(){this._configs=new Map;const P=this._configObject.protocols;for(const R of Object.keys(P)){if(!this._protocols.has(R))continue;const F=P[R];if(F!=null)for(const O of Object.keys(F))switch(O){case"btle":this._configs.set(R,l.BluetoothLEProtocolConfiguration.ConstructFromObject(F[O]));break;case"serial":this._configs.set(R,new p.SerialProtocolConfiguration(F[O]));break;case"hid":this._configs.set(R,new u.HIDProtocolConfiguration(F[O]));break}}}};return Mt.DeviceConfigurationManager=E,E._manager=null,Mt}var qr={},kr={},Tu;function Zn(){if(Tu)return kr;Tu=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var r=kr&&kr.__awaiter||function(p,u,f,s){function n(c){return c instanceof f?c:new f(function(d){d(c)})}return new(f||(f=Promise))(function(c,d){function o(_){try{m(s.next(_))}catch(w){d(w)}}function a(_){try{m(s.throw(_))}catch(w){d(w)}}function m(_){_.done?c(_.value):n(_.value).then(o,a)}m((s=s.apply(p,u||[])).next())})};Object.defineProperty(kr,"__esModule",{value:!0}),kr.ButtplugDeviceImpl=void 0;const e=br(),i=St(),h=Ai(),t=Fi();let l=class extends i.EventEmitter{constructor(u,f){super(),this._logger=e.ButtplugLogger.Logger,this.WriteValue=(s,n)=>r(this,void 0,void 0,function*(){return yield this.WriteValueInternal(s,n||new h.ButtplugDeviceWriteOptions)}),this.ReadValue=s=>r(this,void 0,void 0,function*(){return yield this.ReadValueInternal(s||new t.ButtplugDeviceReadOptions)}),this.WriteString=(s,n)=>r(this,void 0,void 0,function*(){return yield this.WriteValue(Buffer.from(s),n)}),this.ReadString=s=>r(this,void 0,void 0,function*(){return(yield this.ReadValue(s)).toString("utf-8")}),this.SubscribeToUpdates=s=>r(this,void 0,void 0,function*(){return yield this.SubscribeToUpdatesInternal(s||new t.ButtplugDeviceReadOptions)}),this._name=u,this._address=f}get Name(){return this._name}get Address(){return this._address}UpdateReceived(u,f){this.emit("updateReceived",[u,f])}};return kr.ButtplugDeviceImpl=l,kr}var $u;function av(){if($u)return qr;$u=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var r=qr&&qr.__awaiter||function(p,u,f,s){function n(c){return c instanceof f?c:new f(function(d){d(c)})}return new(f||(f=Promise))(function(c,d){function o(_){try{m(s.next(_))}catch(w){d(w)}}function a(_){try{m(s.throw(_))}catch(w){d(w)}}function m(_){_.done?c(_.value):n(_.value).then(o,a)}m((s=s.apply(p,u||[])).next())})};Object.defineProperty(qr,"__esModule",{value:!0}),qr.WebBluetoothDevice=void 0;const e=Ne(),i=Zn(),h=Or(),t=Fi();let l=class extends i.ButtplugDeviceImpl{constructor(u,f){super(f.name,f.id),this._deviceConfig=u,this._device=f,this._notificationHandlers=new Map,this._characteristics=new Map,this.Connect=()=>r(this,void 0,void 0,function*(){this._logger.Debug(`WebBluetoothDevice: ${this.constructor.name} connecting`),this._device.addEventListener("gattserverdisconnected",this.OnDisconnect),this._server=yield this._device.gatt.connect();for(const[s,n]of this._deviceConfig.Services){let c;try{try{if(!this._device.hasService(s))continue}catch{}c=yield this._server.getPrimaryService(s)}catch(d){this._logger.Debug(`Cannot find service ${s} on ${this._device.name}, continuing search: ${d}`);continue}if(n.size===0){let d=[];try{d=yield c.getCharacteristics()}catch{const a=`getCharacteristics not implemented on this platform, cannot connect to ${this._device.name}`;throw e.ButtplugException.LogAndError(e.ButtplugDeviceException,this._logger,a)}for(const o of d)o.properties.write||o.properties.writeWithoutResponse||o.properties.reliableWrite?this.SetNewCharacteristic(h.Endpoints.Tx,o):(o.properties.read||o.properties.broadcast||o.properties.notify||o.properties.indicate)&&this.SetNewCharacteristic(h.Endpoints.Rx,o);continue}for(const[d,o]of n)this.SetNewCharacteristic(h.GetEndpoint(d),yield c.getCharacteristic(o))}if(this._characteristics.size===0)throw new e.ButtplugDeviceException(`No usable characteristics found for ${this._device.name}`)}),this.Disconnect=()=>r(this,void 0,void 0,function*(){for(const s of this._notificationHandlers.keys())yield this.Unsubscribe(new t.ButtplugDeviceReadOptions({Endpoint:s}));this._server.disconnect()}),this.OnDisconnect=()=>{this._logger.Debug(`WebBluetoothDevice: ${this.constructor.name} disconnecting`),this._device.removeEventListener("gattserverdisconnected",this.OnDisconnect),this.emit("deviceremoved")},this.WriteValueInternal=(s,n)=>r(this,void 0,void 0,function*(){return this.CheckForCharacteristic(n.Endpoint),yield this._characteristics.get(n.Endpoint).writeValue(s)}),this.ReadValueInternal=s=>r(this,void 0,void 0,function*(){this.CheckForCharacteristic(s.Endpoint);const n=this._characteristics.get(s.Endpoint);return Buffer.from((yield n.readValue()).buffer)}),this.SubscribeToUpdatesInternal=s=>r(this,void 0,void 0,function*(){if(this.CheckForCharacteristic(s.Endpoint),this._notificationHandlers.has(s.Endpoint)){const c=`${this._device.name} already subscribed to updates on characteristic ${s.Endpoint}`;throw e.ButtplugException.LogAndError(e.ButtplugDeviceException,this._logger,c)}const n=this._characteristics.get(s.Endpoint);this._logger.Trace(`WebBluetoothDevice: ${this.constructor.name} subscribing to updates from ${n.uuid}`),yield n.startNotifications(),this._notificationHandlers.set(s.Endpoint,c=>{this.CharacteristicValueChanged(c,s.Endpoint)}),n.addEventListener("characteristicvaluechanged",this._notificationHandlers.get(s.Endpoint))}),this.Unsubscribe=s=>r(this,void 0,void 0,function*(){if(this.CheckForCharacteristic(s.Endpoint),!this._notificationHandlers.has(s.Endpoint)){const c=`${this._device.name} not subscribed to updates on characteristic ${s.Endpoint}`;throw e.ButtplugException.LogAndError(e.ButtplugDeviceException,this._logger,c)}const n=this._characteristics.get(s.Endpoint);this._logger.Trace(`WebBluetoothDevice: ${this.constructor.name} unsubscribing to updates from ${n.uuid}`),n.removeEventListener("characteristicvaluechanged",this._notificationHandlers.get(s.Endpoint)),this._notificationHandlers.delete(s.Endpoint),yield n.stopNotifications()}),this.CharacteristicValueChanged=(s,n)=>{const c=s.target.value,d=c.buffer,o=Buffer.from(d,c.byteOffset,c.byteLength);this.UpdateReceived(n,o)}}get Connected(){return this._server.connected}CheckForCharacteristic(u){if(this._characteristics.has(u))return;const f=`Characteristic ${u} does not exist on device ${this._device.name}.`;throw e.ButtplugException.LogAndError(e.ButtplugDeviceException,this._logger,f)}SetNewCharacteristic(u,f){if(this._characteristics.has(u))throw new e.ButtplugDeviceException(`Endpoint ${u} already defined on ${this._device.name}`);this._characteristics.set(u,f)}};return qr.WebBluetoothDevice=l,qr}var Ur={},Nu;function ei(){if(Nu)return Ur;Nu=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var r=Ur&&Ur.__awaiter||function(h,t,l,p){function u(f){return f instanceof l?f:new l(function(s){s(f)})}return new(l||(l=Promise))(function(f,s){function n(o){try{d(p.next(o))}catch(a){s(a)}}function c(o){try{d(p.throw(o))}catch(a){s(a)}}function d(o){o.done?f(o.value):u(o.value).then(n,c)}d((p=p.apply(h,t||[])).next())})};Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.ButtplugDevice=void 0;const e=St();let i=class extends e.EventEmitter{constructor(t,l){super(),this.ParseMessage=p=>r(this,void 0,void 0,function*(){return yield this._protocol.ParseMessage(p)}),this._protocol=t,this._device=l,this._device.addListener("deviceremoved",()=>{this.emit("deviceremoved",this)})}get Connected(){return this._device.Connected}get MessageSpecifications(){return this._protocol.MessageSpecifications}Disconnect(){return this._device.Disconnect()}Initialize(){return r(this,void 0,void 0,function*(){return yield this._protocol.Initialize()})}get Name(){return this._protocol.Name}get Id(){return this._device.Address}};return Ur.ButtplugDevice=i,Ur}var Vu;function ov(){if(Vu)return Vr;Vu=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var r=Vr&&Vr.__awaiter||function(s,n,c,d){function o(a){return a instanceof c?a:new c(function(m){m(a)})}return new(c||(c=Promise))(function(a,m){function _(C){try{S(d.next(C))}catch(b){m(b)}}function w(C){try{S(d.throw(C))}catch(b){m(b)}}function S(C){C.done?a(C.value):o(C.value).then(_,w)}S((d=d.apply(s,n||[])).next())})};Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.WebBluetoothDeviceManager=void 0;const e=br(),i=Ne(),h=St(),t=Oo(),l=Io(),p=av(),u=ei();let f=class extends h.EventEmitter{constructor(n){super(),this.OpenDevice=c=>r(this,void 0,void 0,function*(){if(c===void 0)return;const d=t.DeviceConfigurationManager.Manager,o=new l.BluetoothLEProtocolConfiguration([c.name]),a=d.Find(o);if(a===void 0)return;const[m,_]=a,w=new p.WebBluetoothDevice(m,c);yield w.Connect();const S=new _(w),C=new u.ButtplugDevice(S,w);yield C.Initialize(),this.emit("deviceadded",C)}),this.SetLogger(n!==void 0?n:e.ButtplugLogger.Logger)}SetLogger(n){this._logger=n}StartScanning(){return r(this,void 0,void 0,function*(){var n=navigator.userAgent.toLowerCase(),c=n.indexOf("android")>-1;let d;c?d={acceptAllDevices:!0,optionalServices:new Array}:d={filters:new Array,optionalServices:new Array};const a=t.DeviceConfigurationManager.Manager.GetAllConfigsOfType(l.BluetoothLEProtocolConfiguration);for(const _ of a){if(!c)for(const w of _.Names)try{w.endsWith("*")&&d.filters.push({namePrefix:w.substr(0,w.length-1)}),d.filters.push({name:w})}catch(S){console.log(S),console.log(_)}d.optionalServices=[...d.optionalServices,..._.Services.keys()]}this._logger.Trace("Bluetooth filter set: "+JSON.stringify(d));let m;try{m=yield navigator.bluetooth.requestDevice(d)}catch(_){if(this.emit("scanningfinished"),_.message.indexOf("User cancelled")!==-1)return;throw i.ButtplugException.LogAndError(i.ButtplugDeviceException,this._logger,"Bluetooth scanning interrupted. Either user cancelled out of dialog, or bluetooth radio is not available. Exception: "+_)}try{yield this.OpenDevice(m)}catch(_){throw this.emit("scanningfinished"),i.ButtplugException.LogAndError(i.ButtplugDeviceException,this._logger,`Cannot open device ${m.name}: ${_}`)}this.emit("scanningfinished")})}StopScanning(){}get IsScanning(){return!1}};return Vr.WebBluetoothDeviceManager=f,Vr}var Wr={},Hr={},ju;function sv(){if(ju)return Hr;ju=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var r=Hr&&Hr.__awaiter||function(h,t,l,p){function u(f){return f instanceof l?f:new l(function(s){s(f)})}return new(l||(l=Promise))(function(f,s){function n(o){try{d(p.next(o))}catch(a){s(a)}}function c(o){try{d(p.throw(o))}catch(a){s(a)}}function d(o){o.done?f(o.value):u(o.value).then(n,c)}d((p=p.apply(h,t||[])).next())})};Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.WebGamepadDevice=void 0;const e=Zn();let i=class extends e.ButtplugDeviceImpl{constructor(t){super(t.id,t.index.toString()),this._device=t,this.Connect=()=>r(this,void 0,void 0,function*(){return Promise.resolve()}),this.Disconnect=()=>r(this,void 0,void 0,function*(){}),this.OnDisconnect=()=>{this._logger.Debug(`WebBluetoothDevice: ${this.constructor.name} disconnecting`),this.emit("deviceremoved")},this.WriteValueInternal=(l,p)=>r(this,void 0,void 0,function*(){const u=l.readFloatLE(0),f=l.readFloatLE(4);return this._gamepad.vibrationActuator.playEffect("dual-rumble",{duration:1e3,startDelay:0,weakMagnitude:u,strongMagnitude:f}),Promise.resolve()}),this.ReadValueInternal=l=>r(this,void 0,void 0,function*(){return Promise.reject("This should never be called")}),this.SubscribeToUpdatesInternal=l=>r(this,void 0,void 0,function*(){return Promise.reject("This should never be called")}),this.Unsubscribe=l=>r(this,void 0,void 0,function*(){return Promise.reject("This should never be called")}),this._gamepad=t,window.addEventListener("gamepaddisconnected",l=>{l.gamepad.index===this._gamepad.index&&this.OnDisconnect()})}get Connected(){return this._gamepad.connected}};return Hr.WebGamepadDevice=i,Hr}var qt={},qu;function uv(){if(qu)return qt;qu=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var r=qt&&qt.__createBinding||(Object.create?(function(f,s,n,c){c===void 0&&(c=n),Object.defineProperty(f,c,{enumerable:!0,get:function(){return s[n]}})}):(function(f,s,n,c){c===void 0&&(c=n),f[c]=s[n]})),e=qt&&qt.__setModuleDefault||(Object.create?(function(f,s){Object.defineProperty(f,"default",{enumerable:!0,value:s})}):function(f,s){f.default=s}),i=qt&&qt.__importStar||function(f){if(f&&f.__esModule)return f;var s={};if(f!=null)for(var n in f)n!=="default"&&Object.prototype.hasOwnProperty.call(f,n)&&r(s,f,n);return e(s,f),s},h=qt&&qt.__awaiter||function(f,s,n,c){function d(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function m(S){try{w(c.next(S))}catch(C){a(C)}}function _(S){try{w(c.throw(S))}catch(C){a(C)}}function w(S){S.done?o(S.value):d(S.value).then(m,_)}w((c=c.apply(f,s||[])).next())})};Object.defineProperty(qt,"__esModule",{value:!0}),qt.WebGamepadProtocol=void 0;const t=i(Ke()),l=Ne(),p=dt();let u=class extends p.ButtplugDeviceProtocol{constructor(s){super(`WebGamepad ${s.Name}`,s),this._currentCommands=[0,0],this.Initialize=()=>h(this,void 0,void 0,function*(){return Promise.resolve()}),this.runVibration=()=>h(this,void 0,void 0,function*(){const n=Buffer.alloc(8);n.writeFloatLE(this._currentCommands[0],0),n.writeFloatLE(this._currentCommands[1],4),yield this._device.WriteValue(n),!(this._currentCommands[0]<.001&&this._currentCommands[1]<.001)&&setTimeout(()=>this.runVibration(),100)}),this.HandleVibrateCmd=n=>h(this,void 0,void 0,function*(){if(n.Speeds.length<=0||n.Speeds.length>2)throw new l.ButtplugDeviceException(`WebGamepad devices require VibrateCmd to have 1 or 2 speed commands, ${n.Speeds.length} sent.`,n.Id);for(const c of n.Speeds)this._currentCommands[c.Index]=c.Speed;return yield this.runVibration(),new t.Ok(n.Id)}),this.HandleStopDeviceCmd=n=>h(this,void 0,void 0,function*(){return yield this.HandleSingleMotorVibrateCmd(new t.SingleMotorVibrateCmd(0,n.DeviceIndex,n.Id))}),this.HandleSingleMotorVibrateCmd=n=>h(this,void 0,void 0,function*(){const c=[];return c.push(new t.SpeedSubcommand(0,n.Speed)),c.push(new t.SpeedSubcommand(1,n.Speed)),yield this.HandleVibrateCmd(new t.VibrateCmd(c,n.DeviceIndex,n.Id))}),this.MsgFuncs.set(t.StopDeviceCmd,this.HandleStopDeviceCmd),this.MsgFuncs.set(t.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(t.VibrateCmd,this.HandleVibrateCmd)}get MessageSpecifications(){return{VibrateCmd:{FeatureCount:2},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}}};return qt.WebGamepadProtocol=u,qt}var ku;function cv(){if(ku)return Wr;ku=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var r=Wr&&Wr.__awaiter||function(u,f,s,n){function c(d){return d instanceof s?d:new s(function(o){o(d)})}return new(s||(s=Promise))(function(d,o){function a(w){try{_(n.next(w))}catch(S){o(S)}}function m(w){try{_(n.throw(w))}catch(S){o(S)}}function _(w){w.done?d(w.value):c(w.value).then(a,m)}_((n=n.apply(u,f||[])).next())})};Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.WebGamepadDeviceManager=void 0;const e=br(),i=St(),h=sv(),t=uv(),l=ei();let p=class extends i.EventEmitter{constructor(f){super(),this._connectedGamepads=[],this.SetLogger(f!==void 0?f:e.ButtplugLogger.Logger),window.addEventListener("gamepadconnected",s=>{console.log("Gamepad connected"),console.log(s.gamepad),this._connectedGamepads.push(s.gamepad)}),window.addEventListener("gamepaddisconnected",s=>{console.log(`Gamepad disconnected ${s.gamepad}`),this._connectedGamepads.includes(s.gamepad)&&this._connectedGamepads.splice(this._connectedGamepads.indexOf(s.gamepad),1)})}SetLogger(f){this._logger=f}StartScanning(){return r(this,void 0,void 0,function*(){for(const f of this._connectedGamepads){const s=new h.WebGamepadDevice(f),n=new t.WebGamepadProtocol(s),c=new l.ButtplugDevice(n,s);this.emit("deviceadded",c)}this._connectedGamepads=[],this.emit("scanningfinished")})}StopScanning(){}get IsScanning(){return!1}};return Wr.WebGamepadDeviceManager=p,Wr}var Uu;function lv(){if(Uu)return Pt;Uu=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var r=Pt&&Pt.__createBinding||(Object.create?(function(d,o,a,m){m===void 0&&(m=a),Object.defineProperty(d,m,{enumerable:!0,get:function(){return o[a]}})}):(function(d,o,a,m){m===void 0&&(m=a),d[m]=o[a]})),e=Pt&&Pt.__setModuleDefault||(Object.create?(function(d,o){Object.defineProperty(d,"default",{enumerable:!0,value:o})}):function(d,o){d.default=o}),i=Pt&&Pt.__importStar||function(d){if(d&&d.__esModule)return d;var o={};if(d!=null)for(var a in d)a!=="default"&&Object.prototype.hasOwnProperty.call(d,a)&&r(o,d,a);return e(o,d),o},h=Pt&&Pt.__awaiter||function(d,o,a,m){function _(w){return w instanceof a?w:new a(function(S){S(w)})}return new(a||(a=Promise))(function(w,S){function C(x){try{E(m.next(x))}catch(P){S(P)}}function b(x){try{E(m.throw(x))}catch(P){S(P)}}function E(x){x.done?w(x.value):_(x.value).then(C,b)}E((m=m.apply(d,o||[])).next())})};Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.DeviceManager=void 0;const t=i(Ke()),l=ov(),p=cv(),u=St(),f=br(),s=Ne(),n=Oo();let c=class extends u.EventEmitter{constructor(o){super(),this._subtypeManagers=[],this._devices=new Map,this._deviceCounter=0,this._logger=f.ButtplugLogger.Logger,this.Shutdown=()=>h(this,void 0,void 0,function*(){for(const a of this._devices.values())yield a.Disconnect()}),this.ClearDeviceManagers=()=>{this._logger.Info("DeviceManager: Clearing device subtype managers"),this._subtypeManagers=[]},this.AddDeviceManager=a=>{this._logger.Info(`DeviceManager: Adding Device Manager ${a.constructor.name}`),a.SetLogger(this._logger),this._subtypeManagers.push(a),a.addListener("deviceadded",this.OnDeviceAdded),a.addListener("deviceremoved",this.OnDeviceRemoved),a.addListener("scanningfinished",this.OnScanningFinished)},this.SendMessage=a=>h(this,void 0,void 0,function*(){const m=a.Id;switch(a.Type){case t.StartScanning:if(this._logger.Debug("DeviceManager: Starting scan"),this._subtypeManagers.length===0)throw s.ButtplugException.LogAndError(s.ButtplugDeviceException,this._logger,"No device managers available, cannot scan.",m);for(const C of this._subtypeManagers)if(!C.IsScanning)try{yield C.StartScanning()}catch(b){for(const E of this._subtypeManagers)E.IsScanning&&E.StopScanning();throw b}return new t.Ok(m);case t.StopScanning:this._logger.Debug("DeviceManager: Stopping scan");for(const C of this._subtypeManagers)C.IsScanning&&C.StopScanning();return new t.Ok(m);case t.StopAllDevices:return this._logger.Debug("DeviceManager: Stopping all devices"),this._devices.forEach((C,b)=>h(this,void 0,void 0,function*(){yield C.ParseMessage(new t.StopDeviceCmd)})),new t.Ok(m);case t.RequestDeviceList:this._logger.Debug("DeviceManager: Sending device list");const S=[];return this._devices.forEach((C,b)=>{S.push(new t.DeviceInfoWithSpecifications(b,C.Name,C.MessageSpecifications))}),new t.DeviceList(S,m)}const _=a;if(_.DeviceIndex===void 0)throw s.ButtplugException.LogAndError(s.ButtplugMessageException,this._logger,`Message Type ${a.Type} unhandled by this server.`,m);if(!this._devices.has(_.DeviceIndex))throw s.ButtplugException.LogAndError(s.ButtplugDeviceException,this._logger,`Device Index ${_.DeviceIndex} does not exist`,m);const w=this._devices.get(_.DeviceIndex);return this._logger.Trace(`DeviceManager: Sending ${_.Type} to ${w.Name} (${_.Id})`),yield w.ParseMessage(_)}),this.OnDeviceAdded=a=>{for(const _ of this._devices.values())if(_.Id===a.Id){this._logger.Info(`DeviceManager: Device ${a.Name} (id: ${a.Id}) already added, ignoring.`);return}const m=this._deviceCounter;this._deviceCounter+=1,this._devices.set(m,a),this._logger.Info(`DeviceManager: Device Added: ${a.Name} (${m})`),a.addListener("deviceremoved",this.OnDeviceRemoved),this._msgClosure(new t.DeviceAdded(m,a.Name,a.MessageSpecifications))},this.OnDeviceRemoved=a=>{let m=null;for(const[_,w]of Array.from(this._devices.entries()))if(w===a){m=_;break}m!==null&&(a.removeAllListeners("deviceremoved"),this._devices.delete(m),this._logger.Info(`DeviceManager: Device Removed: ${a.Name} (${m})`),this._msgClosure(new t.DeviceRemoved(m)))},this.OnScanningFinished=()=>{this._logger.Debug("DeviceManager: Scanning Finished.");for(const a of this._subtypeManagers)if(a.IsScanning)return;this._msgClosure(new t.ScanningFinished)},this._logger.Debug("DeviceManager: Starting Device Manager");try{n.DeviceConfigurationManager.Manager}catch{n.DeviceConfigurationManager.LoadFromInternalConfig()}typeof window<"u"&&typeof window.navigator<"u"&&navigator.bluetooth?(this.AddDeviceManager(new l.WebBluetoothDeviceManager(this._logger)),this.AddDeviceManager(new p.WebGamepadDeviceManager(this._logger))):this._logger.Info("DeviceManager: Not adding WebBluetooth Manager, no WebBluetooth capabilities found."),this._msgClosure=o}get DeviceManagers(){return this._subtypeManagers}};return Pt.DeviceManager=c,Pt}var Wu;function pl(){if(Wu)return Dt;Wu=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var r=Dt&&Dt.__createBinding||(Object.create?(function(d,o,a,m){m===void 0&&(m=a),Object.defineProperty(d,m,{enumerable:!0,get:function(){return o[a]}})}):(function(d,o,a,m){m===void 0&&(m=a),d[m]=o[a]})),e=Dt&&Dt.__setModuleDefault||(Object.create?(function(d,o){Object.defineProperty(d,"default",{enumerable:!0,value:o})}):function(d,o){d.default=o}),i=Dt&&Dt.__importStar||function(d){if(d&&d.__esModule)return d;var o={};if(d!=null)for(var a in d)a!=="default"&&Object.prototype.hasOwnProperty.call(d,a)&&r(o,d,a);return e(o,d),o},h=Dt&&Dt.__awaiter||function(d,o,a,m){function _(w){return w instanceof a?w:new a(function(S){S(w)})}return new(a||(a=Promise))(function(w,S){function C(x){try{E(m.next(x))}catch(P){S(P)}}function b(x){try{E(m.throw(x))}catch(P){S(P)}}function E(x){x.done?w(x.value):_(x.value).then(C,b)}E((m=m.apply(d,o||[])).next())})};Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.ButtplugServer=void 0;const t=i(Ke()),l=Xn(),p=lv(),u=St(),f=br(),s=Ke(),n=Ne();let c=class extends u.EventEmitter{constructor(o="Buttplug JS Internal Server",a=0){super(),this._serverName=o,this._maxPingTime=a,this._clientSchemaVersion=-1,this._clientName=void 0,this._pingTimedOut=!1,this._receivedRequestServerInfo=!1,this._logger=f.ButtplugLogger.Logger,this._outgoingLogLevel=f.ButtplugLogLevel.Off,this._connected=!1,this.AddDeviceManager=m=>{this._deviceManager.AddDeviceManager(m)},this.ClearDeviceManagers=()=>{this._deviceManager.ClearDeviceManagers()},this.Disconnect=()=>{this._connected=!1},this.CheckConnection=()=>{if(!this._connected)throw new Error("Server not connected to client.")},this.SendMessage=m=>h(this,void 0,void 0,function*(){m instanceof s.RequestServerInfo||this.CheckConnection();const _=m.Id;if(this._logger.Trace(`Server: Got Message: ${m}`),_===0)throw n.ButtplugException.LogAndError(n.ButtplugMessageException,this._logger,"Message Id 0 is reserved for outgoing system messages. Use another Id.",_);if(this._pingTimedOut)throw n.ButtplugException.LogAndError(n.ButtplugPingException,this._logger,"Ping timed out.",_);if(!this._receivedRequestServerInfo&&m.Type!==t.RequestServerInfo)throw n.ButtplugException.LogAndError(n.ButtplugInitException,this._logger,"RequestServerInfo must be first message received by server.",_);switch(m.Type){case t.RequestLog:const w=m;return this._logger.Debug(`Server: RequestLog received for level ${w.LogLevel}`),w.LogLevel===f.ButtplugLogLevel[f.ButtplugLogLevel.Off]?this._logger.removeListener("log",this.OnLogMessage):this._outgoingLogLevel===f.ButtplugLogLevel.Off&&this._logger.addListener("log",this.OnLogMessage),this._logger.MaximumEventLogLevel=f.ButtplugLogLevel[w.LogLevel],this._outgoingLogLevel=f.ButtplugLogLevel[w.LogLevel],new t.Ok(w.Id);case t.Ping:return new t.Ok(m.Id);case t.RequestServerInfo:this._logger.Debug("Server: RequestServerInfo received.");const S=m;if(this._clientSchemaVersion>1)throw n.ButtplugException.LogAndError(n.ButtplugInitException,this._logger,`Client schema (${this._clientSchemaVersion}) newer than server schema (1). Please upgrade server.`,_);return this._receivedRequestServerInfo=!0,this._clientSchemaVersion=S.MessageVersion,this._clientName=S.ClientName,this._connected=!0,new t.ServerInfo(0,0,0,l.GetSchemaVersion(),this._maxPingTime,this._serverName,_);case t.Test:this._logger.Debug("Server: Test received.");const C=m;return new t.Test(C.TestString,m.Id)}return yield this._deviceManager.SendMessage(m)}),this.Shutdown=()=>h(this,void 0,void 0,function*(){return this.Disconnect(),yield this._deviceManager.Shutdown()}),this.OnLogMessage=m=>{m.LogLevel>this._outgoingLogLevel||this.SendOutgoingMessage(new t.Log(f.ButtplugLogLevel[m.LogLevel],m.Message))},this.SendOutgoingMessage=m=>{if(this._connected){if(this._clientSchemaVersion===-1)throw n.ButtplugException.LogAndError(n.ButtplugMessageException,this._logger,"Cannot discern client schema version. Was RequestServerInfo message sent?");for(;m.SchemaVersion!==this._clientSchemaVersion&&m.SchemaVersion>0;)m=m.DowngradeMessage();this.emit("message",m)}},this._logger.Info(`Server: Starting Buttplug Server: ${this._serverName}`),this._deviceManager=new p.DeviceManager(m=>this.SendOutgoingMessage(m))}get DeviceManagers(){return this._deviceManager.DeviceManagers}};return Dt.ButtplugServer=c,Dt}/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var Hu;function fv(){if(Hu)return Nr;Hu=1;var r=Nr&&Nr.__awaiter||function(l,p,u,f){function s(n){return n instanceof u?n:new u(function(c){c(n)})}return new(u||(u=Promise))(function(n,c){function d(m){try{a(f.next(m))}catch(_){c(_)}}function o(m){try{a(f.throw(m))}catch(_){c(_)}}function a(m){m.done?n(m.value):s(m.value).then(d,o)}a((f=f.apply(l,p||[])).next())})};Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.ButtplugEmbeddedClientConnector=void 0;const e=St(),i=pl(),h=Po();let t=class extends e.EventEmitter{constructor(){super(...arguments),this._connected=!1,this._server=null,this.Connect=()=>r(this,void 0,void 0,function*(){this._connected=!0,this._server===null&&(this._server=new i.ButtplugServer),this._server.addListener("message",this.OnMessageReceived)}),this.Disconnect=()=>r(this,void 0,void 0,function*(){if(this._connected)try{yield this._server.Shutdown()}finally{this._connected=!1,this._server=null,this.emit("disconnect")}}),this.Send=p=>r(this,void 0,void 0,function*(){if(!this._connected)throw new h.ButtplugClientConnectorException("Client not connected.");return yield this._server.SendMessage(p)}),this.OnMessageReceived=p=>{this.emit("message",[p])}}set Server(p){this._server=p}get Server(){return this._server}Initialize(){return r(this,void 0,void 0,function*(){return Promise.resolve()})}get Connected(){return this._connected}};return Nr.ButtplugEmbeddedClientConnector=t,Nr}var mr={},$n={},zu;function ml(){if(zu)return $n;zu=1,Object.defineProperty($n,"__esModule",{value:!0}),$n.getRandomInt=void 0;function r(e){return Math.floor(Math.random()*Math.floor(e))}return $n.getRandomInt=r,$n}var Gu;function dv(){if(Gu)return mr;Gu=1;var r=mr&&mr.__awaiter||function(u,f,s,n){function c(d){return d instanceof s?d:new s(function(o){o(d)})}return new(s||(s=Promise))(function(d,o){function a(w){try{_(n.next(w))}catch(S){o(S)}}function m(w){try{_(n.throw(w))}catch(S){o(S)}}function _(w){w.done?d(w.value):c(w.value).then(a,m)}_((n=n.apply(u,f||[])).next())})};Object.defineProperty(mr,"__esModule",{value:!0}),mr.ButtplugClientForwarder=mr.ButtplugClientForwarderBrowserWebsocketConnector=void 0;const e=Ke(),i=Ne(),h=ml(),t=ul();class l extends t.ButtplugBrowserWebsocketConnector{constructor(f){super(f)}SendForwardedMessage(f){return r(this,void 0,void 0,function*(){return this.SendMessage(f),Promise.resolve()})}}mr.ButtplugClientForwarderBrowserWebsocketConnector=l;let p=class{constructor(f,s){this._devices=new Map,this.Connect=()=>r(this,void 0,void 0,function*(){yield this._connector.Connect(),this._connector.addListener("message",n=>r(this,void 0,void 0,function*(){for(const c of n)yield this.ReceiveDeviceCommand(c)}))}),this.Disconnect=()=>r(this,void 0,void 0,function*(){yield this._connector.Disconnect()}),this.AddDevice=n=>r(this,void 0,void 0,function*(){const c=this.CreateDeviceAdded(n);n.addListener("deviceremoved",()=>this.RemoveDevice(n)),yield this._connector.SendForwardedMessage(c)}),this.RemoveDevice=n=>r(this,void 0,void 0,function*(){const c=this.CreateDeviceRemoved(n);yield this._connector.SendForwardedMessage(c)}),this.ReceiveDeviceCommand=n=>r(this,void 0,void 0,function*(){const c=this._devices.get(n.DeviceIndex);c!==void 0&&(yield c?.SendMessageAsync(n),yield this._connector.SendForwardedMessage(new e.Ok(n.Id)))}),this._clientName=f,this._connector=s}CreateDeviceAdded(f){if([...this._devices.entries()].filter(({1:c})=>c.Index===f.Index).map(([c])=>c).length>0)throw new i.ButtplugDeviceException("Device already shared with server!");let n=h.getRandomInt(34);for(;this._devices.has(n);)n=h.getRandomInt(34);return this._devices.set(n,f),new e.DeviceAdded(n,`${this._clientName} - ${f.Name}`,f.AllowedMessagesObject)}CreateDeviceRemoved(f){const s=[...this._devices.entries()].filter(({1:n})=>n.Index===f.Index).map(([n])=>n);if(s.length===1){const n=s.pop();return this._devices.delete(n),new e.DeviceRemoved(n)}else throw s.length===0?new i.ButtplugDeviceException("Device not currently shared with server!"):new i.ButtplugDeviceException("Device shared with server multiple times!")}};return mr.ButtplugClientForwarder=p,mr}var Wa={},Ku;function hv(){if(Ku)return Wa;Ku=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */return Object.defineProperty(Wa,"__esModule",{value:!0}),Wa}var Ha={},Qu;function vv(){if(Qu)return Ha;Qu=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */return Object.defineProperty(Ha,"__esModule",{value:!0}),Ha}var za={},Yu;function pv(){if(Yu)return za;Yu=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */return Object.defineProperty(za,"__esModule",{value:!0}),za}var Ga={},Ju;function mv(){if(Ju)return Ga;Ju=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */return Object.defineProperty(Ga,"__esModule",{value:!0}),Ga}var Ka={},Xu;function gv(){if(Xu)return Ka;Xu=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */return Object.defineProperty(Ka,"__esModule",{value:!0}),Ka}var Qa={},Zu;function _v(){if(Zu)return Qa;Zu=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */return Object.defineProperty(Qa,"__esModule",{value:!0}),Qa}var zr={},ec;function gl(){if(ec)return zr;ec=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var r=zr&&zr.__awaiter||function(h,t,l,p){function u(f){return f instanceof l?f:new l(function(s){s(f)})}return new(l||(l=Promise))(function(f,s){function n(o){try{d(p.next(o))}catch(a){s(a)}}function c(o){try{d(p.throw(o))}catch(a){s(a)}}function d(o){o.done?f(o.value):u(o.value).then(n,c)}d((p=p.apply(h,t||[])).next())})};Object.defineProperty(zr,"__esModule",{value:!0}),zr.ForwardedDevice=void 0;const e=Zn();let i=class extends e.ButtplugDeviceImpl{constructor(t,l){super(t,l),this.Connect=()=>r(this,void 0,void 0,function*(){return Promise.resolve()}),this.Disconnect=()=>{this.OnDisconnect()},this.OnDisconnect=()=>{this._logger.Debug(`ForwardedDevice: ${this.constructor.name} disconnecting`),this.emit("deviceremoved")},this.WriteValueInternal=(p,u)=>r(this,void 0,void 0,function*(){return Promise.reject("This should never be called")}),this.ReadValueInternal=p=>r(this,void 0,void 0,function*(){return Promise.reject("This should never be called")}),this.SubscribeToUpdatesInternal=p=>r(this,void 0,void 0,function*(){return Promise.reject("This should never be called")}),this.Unsubscribe=p=>r(this,void 0,void 0,function*(){return Promise.reject("This should never be called")})}get Connected(){return!0}};return zr.ForwardedDevice=i,zr}var Gr={},Kr={},tc;function _l(){if(tc)return Kr;tc=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var r=Kr&&Kr.__awaiter||function(t,l,p,u){function f(s){return s instanceof p?s:new p(function(n){n(s)})}return new(p||(p=Promise))(function(s,n){function c(a){try{o(u.next(a))}catch(m){n(m)}}function d(a){try{o(u.throw(a))}catch(m){n(m)}}function o(a){a.done?s(a.value):f(a.value).then(c,d)}o((u=u.apply(t,l||[])).next())})};Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.ForwardedDeviceProtocol=void 0;const e=Ne(),i=dt();let h=class extends i.ButtplugDeviceProtocol{constructor(l,p,u,f){super(`${l.Name}`,l),this._actualDeviceIndex=p,this._messageSpecs=u,this._clientSendClosure=f,this.Initialize=()=>r(this,void 0,void 0,function*(){return Promise.resolve()}),this.ParseMessage=s=>r(this,void 0,void 0,function*(){if(!this.MessageSpecifications.hasOwnProperty(s.Type.name))throw new e.ButtplugMessageException(`${this._name} cannot handle message of type ${s.Type.name}`,s.Id);return s.DeviceIndex=this._actualDeviceIndex,yield this._clientSendClosure(s)})}get MessageSpecifications(){return this._messageSpecs}};return Kr.ForwardedDeviceProtocol=h,Kr}var rc;function yv(){if(rc)return Gr;rc=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var r=Gr&&Gr.__awaiter||function(n,c,d,o){function a(m){return m instanceof d?m:new d(function(_){_(m)})}return new(d||(d=Promise))(function(m,_){function w(b){try{C(o.next(b))}catch(E){_(E)}}function S(b){try{C(o.throw(b))}catch(E){_(E)}}function C(b){b.done?m(b.value):a(b.value).then(w,S)}C((o=o.apply(n,c||[])).next())})};Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.ForwardedDeviceManager=void 0;const e=br(),i=St(),h=ei(),t=Ke(),l=gl(),p=Mo(),u=ml(),f=_l();let s=class extends i.EventEmitter{constructor(c,d){super(),this._devices=new Map,this._sorter=new p.ButtplugMessageSorter(!1),this.SendMessage=o=>r(this,void 0,void 0,function*(){const a=this._sorter.PrepareOutgoingMessage(o);return yield this._connector.SendMessage(o),a}),this.ParseConnectorMessage=o=>{switch(this._logger.Info("Got connector message."),o.constructor){case t.Ok:case t.Error:this._logger.Trace("Got remote ok/error"),this._sorter.ParseIncomingMessages([o]);break;case t.DeviceAdded:{const a=o;this._logger.Info(`Got device added for ${a.DeviceName}`);const m=new l.ForwardedDevice(a.DeviceName,u.getRandomInt(34).toString()),_=new f.ForwardedDeviceProtocol(m,a.DeviceIndex,a.DeviceMessages,S=>this.SendMessage(S)),w=new h.ButtplugDevice(_,m);this._devices.set(a.DeviceIndex,w),this.emit("deviceadded",w);break}case t.DeviceRemoved:{const a=o;if(!this._devices.has(a.DeviceIndex)){this._logger.Error("Cannot find remote device to remove!");break}const m=this._devices.get(a.DeviceIndex);this._devices.delete(a.DeviceIndex),this._logger.Info(`Got device removed for ${m.Name}`),m.Disconnect();break}default:{this._logger.Error(`Unknown message: ${o}`);break}}},this.SetLogger(c!==void 0?c:e.ButtplugLogger.Logger),this._connector=d,this._connector.addListener("message",o=>{this.ParseConnectorMessage(o)})}SetLogger(c){this._logger=c}StartScanning(){return r(this,void 0,void 0,function*(){this.emit("scanningfinished")})}StopScanning(){}get IsScanning(){return!1}};return Gr.ForwardedDeviceManager=s,Gr}var Qr={},nc;function Ro(){if(nc)return Qr;nc=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var r=Qr&&Qr.__awaiter||function(h,t,l,p){function u(f){return f instanceof l?f:new l(function(s){s(f)})}return new(l||(l=Promise))(function(f,s){function n(o){try{d(p.next(o))}catch(a){s(a)}}function c(o){try{d(p.throw(o))}catch(a){s(a)}}function d(o){o.done?f(o.value):u(o.value).then(n,c)}d((p=p.apply(h,t||[])).next())})};Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.TestDeviceImpl=void 0;const e=Zn();let i=class extends e.ButtplugDeviceImpl{constructor(t){super(t,t),this._connected=!0,this._lastValueWritten=[],this._valueToRead=new Map}get Connected(){return this._connected}get LastValueWritten(){return this._lastValueWritten.shift()}SetValueToRead(t,l){this._valueToRead.set(t,l)}Connect(){return r(this,void 0,void 0,function*(){return Promise.resolve()})}Disconnect(){this._connected=!1,this.emit("deviceremoved",this)}ReadValueInternal(t){return r(this,void 0,void 0,function*(){if(!this._valueToRead.has(t.Endpoint))return Promise.resolve(Buffer.from([]));const l=this._valueToRead.get(t.Endpoint);return this._valueToRead.delete(t.Endpoint),Promise.resolve(l)})}WriteValueInternal(t,l){return r(this,void 0,void 0,function*(){return this._lastValueWritten.push([l.Endpoint,t]),Promise.resolve()})}SubscribeToUpdatesInternal(t){return r(this,void 0,void 0,function*(){return Promise.resolve()})}ScheduleUpdateOnNextTick(t,l){process.nextTick(()=>this.emit("updateReceived",[t,l]))}};return Qr.TestDeviceImpl=i,Qr}var kt={},ic;function yl(){if(ic)return kt;ic=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var r=kt&&kt.__createBinding||(Object.create?(function(n,c,d,o){o===void 0&&(o=d),Object.defineProperty(n,o,{enumerable:!0,get:function(){return c[d]}})}):(function(n,c,d,o){o===void 0&&(o=d),n[o]=c[d]})),e=kt&&kt.__setModuleDefault||(Object.create?(function(n,c){Object.defineProperty(n,"default",{enumerable:!0,value:c})}):function(n,c){n.default=c}),i=kt&&kt.__importStar||function(n){if(n&&n.__esModule)return n;var c={};if(n!=null)for(var d in n)d!=="default"&&Object.prototype.hasOwnProperty.call(n,d)&&r(c,n,d);return e(c,n),c},h=kt&&kt.__awaiter||function(n,c,d,o){function a(m){return m instanceof d?m:new d(function(_){_(m)})}return new(d||(d=Promise))(function(m,_){function w(b){try{C(o.next(b))}catch(E){_(E)}}function S(b){try{C(o.throw(b))}catch(E){_(E)}}function C(b){b.done?m(b.value):a(b.value).then(w,S)}C((o=o.apply(n,c||[])).next())})};Object.defineProperty(kt,"__esModule",{value:!0}),kt.TestDeviceProtocol=void 0;const t=Yn(),l=i(Yn()),p=dt(),u=Ro(),f=Ne();let s=class extends p.ButtplugDeviceProtocol{constructor(c,d,o,a,m){if(super(`Test Device - ${c}`,d),this._linearSpeed=0,this._linearPosition=0,this._vibrateSpeed=0,this._rotateSpeed=0,this._rotateClockwise=!1,this._shouldVibrate=!1,this._shouldRotate=!1,this._shouldLinear=!1,this.HandleStopDeviceCmd=_=>h(this,void 0,void 0,function*(){return this.MsgFuncs.has(l.VibrateCmd)?this.emit("vibrate",0):this.MsgFuncs.has(l.LinearCmd)&&this.emit("linear",{position:this._linearPosition,speed:this._linearSpeed}),Promise.resolve(new l.Ok(_.Id))}),this.HandleSingleMotorVibrateCmd=_=>h(this,void 0,void 0,function*(){return this._vibrateSpeed=_.Speed,this.emit("vibrate",_.Speed),Promise.resolve(new l.Ok(_.Id))}),this.HandleVibrateCmd=_=>h(this,void 0,void 0,function*(){return this.HandleSingleMotorVibrateCmd(new t.SingleMotorVibrateCmd(_.Speeds[0].Speed,_.DeviceIndex,_.Id))}),this.HandleRotateCmd=_=>h(this,void 0,void 0,function*(){return this._rotateSpeed=_.Rotations[0].Speed,this._rotateClockwise=_.Rotations[0].Clockwise,this.emit("vibrate",{speed:this._rotateSpeed,clockwise:this._rotateClockwise}),Promise.resolve(new l.Ok(_.Id))}),this.HandleFleshlightLaunchFW12Cmd=_=>h(this,void 0,void 0,function*(){return this._linearPosition=_.Position,this._linearSpeed=_.Speed,this.emit("linear",{position:this._linearPosition,speed:this._linearSpeed}),Promise.resolve(new l.Ok(_.Id))}),this.HandleLinearCmd=_=>h(this,void 0,void 0,function*(){if(_.Vectors.length!==1)return new l.Error("LinearCmd requires 1 vector for this device.",l.ErrorClass.ERROR_DEVICE,_.Id);const w=90,S=_.Vectors[0],C=S.Position*100,b=Math.abs(C-this._linearPosition);let E=Math.floor(25e3*Math.pow(S.Duration*90/b,-1.05));E=Math.min(Math.max(E,0),95);const x=Math.floor(C/99*w+(99-w)/2);return yield this.HandleFleshlightLaunchFW12Cmd(new l.FleshlightLaunchFW12Cmd(E,x,_.DeviceIndex,_.Id))}),this._shouldVibrate=o,this._shouldLinear=a,this._shouldRotate=m,this.MsgFuncs.set(l.StopDeviceCmd,this.HandleStopDeviceCmd),!(d instanceof u.TestDeviceImpl))throw new f.ButtplugDeviceException("TestDeviceProtocol can only be constructed with a TestDeviceImpl");this._shouldVibrate&&(this.MsgFuncs.set(l.SingleMotorVibrateCmd,this.HandleSingleMotorVibrateCmd),this.MsgFuncs.set(l.VibrateCmd,this.HandleVibrateCmd)),this._shouldLinear&&(this.MsgFuncs.set(l.FleshlightLaunchFW12Cmd,this.HandleFleshlightLaunchFW12Cmd),this.MsgFuncs.set(l.LinearCmd,this.HandleLinearCmd)),this._shouldRotate&&this.MsgFuncs.set(l.RotateCmd,this.HandleRotateCmd)}get MessageSpecifications(){return this.MsgFuncs.has(l.VibrateCmd)?{VibrateCmd:{FeatureCount:2},SingleMotorVibrateCmd:{},StopDeviceCmd:{}}:this.MsgFuncs.has(l.LinearCmd)?{LinearCmd:{FeatureCount:1},FleshlightLaunchFW12Cmd:{},StopDeviceCmd:{}}:this.MsgFuncs.has(l.RotateCmd)?{RotateCmd:{FeatureCount:1},StopDeviceCmd:{}}:{}}};return kt.TestDeviceProtocol=s,kt}var Nn={},ac;function bl(){if(ac)return Nn;ac=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */Object.defineProperty(Nn,"__esModule",{value:!0}),Nn.TestDeviceSubtypeManager=void 0;const r=St(),e=yl(),i=Yn(),h=ei(),t=Ro();let l=class extends r.EventEmitter{constructor(){super(),this._logger=i.ButtplugLogger.Logger,this._isScanning=!1;const u=new t.TestDeviceImpl("Test Vibration Device");this._testVibrationProtocol=new e.TestDeviceProtocol(u.Name,u,!0,!1,!1),this._testVibrationDevice=new h.ButtplugDevice(this._testVibrationProtocol,u);const f=new t.TestDeviceImpl("Test Linear Device");this._testLinearProtocol=new e.TestDeviceProtocol(f.Name,f,!1,!0,!1),this._testLinearDevice=new h.ButtplugDevice(this._testLinearProtocol,f);const s=new t.TestDeviceImpl("Test Rotation Device");this._testRotationProtocol=new e.TestDeviceProtocol(s.Name,s,!1,!1,!0),this._testRotationDevice=new h.ButtplugDevice(this._testRotationProtocol,s)}SetLogger(u){this._logger=u}ConnectVibrationDevice(){this._logger.Debug("TestDeviceManager: Connecting Vibration Device"),this.emit("deviceadded",this._testVibrationDevice)}ConnectLinearDevice(){this._logger.Debug("TestDeviceManager: Connecting Linear Device"),this.emit("deviceadded",this._testLinearDevice)}ConnectRotationDevice(){this._logger.Debug("TestDeviceManager: Connecting Rotation Device"),this.emit("deviceadded",this._testRotationDevice)}StartScanning(){this._logger.Debug("TestDeviceManager: Starting Scan"),this._isScanning=!0,setTimeout(()=>{this.ConnectVibrationDevice(),this.ConnectLinearDevice(),this.ConnectRotationDevice()},50),setTimeout(()=>this.StopScanning(),100)}get VibrationDevice(){return this._testVibrationDevice}get LinearDevice(){return this._testLinearDevice}get RotationDevice(){return this._testRotationDevice}get VibrationProtocol(){return this._testVibrationProtocol}get LinearProtocol(){return this._testLinearProtocol}get RotationProtocol(){return this._testRotationProtocol}StopScanning(){this._logger.Debug("TestDeviceManager: Stopping Scan"),this._isScanning=!1,this.emit("scanningfinished")}get IsScanning(){return this._isScanning}};return Nn.TestDeviceSubtypeManager=l,Nn}var Yr={},oc;function bv(){if(oc)return Yr;oc=1;/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var r=Yr&&Yr.__awaiter||function(t,l,p,u){function f(s){return s instanceof p?s:new p(function(n){n(s)})}return new(p||(p=Promise))(function(s,n){function c(a){try{o(u.next(a))}catch(m){n(m)}}function d(a){try{o(u.throw(a))}catch(m){n(m)}}function o(a){a.done?s(a.value):f(a.value).then(c,d)}o((u=u.apply(t,l||[])).next())})};Object.defineProperty(Yr,"__esModule",{value:!0}),Yr.CreateTestClient=void 0;const e=Yn(),i=bl();function h(){return r(this,void 0,void 0,function*(){const t=new e.ButtplugClient("Test Client"),l=new e.ButtplugServer("Test Server");l.ClearDeviceManagers(),l.AddDeviceManager(new i.TestDeviceSubtypeManager);const p=new e.ButtplugEmbeddedClientConnector;return p.Server=l,yield t.Connect(p),Promise.resolve(t)})}return Yr.CreateTestClient=h,Yr}var sc;function Yn(){return sc||(sc=1,(function(r){/*!
 * Buttplug JS Source Code File - Visit https://buttplug.io for more info about
 * the project. Licensed under the BSD 3-Clause license. See LICENSE file in the
 * project root for full license information.
 *
 * @copyright Copyright (c) Nonpolynomial Labs LLC. All rights reserved.
 */var e=Fr&&Fr.__createBinding||(Object.create?(function(h,t,l,p){p===void 0&&(p=l),Object.defineProperty(h,p,{enumerable:!0,get:function(){return t[l]}})}):(function(h,t,l,p){p===void 0&&(p=l),h[p]=t[l]})),i=Fr&&Fr.__exportStar||function(h,t){for(var l in h)l!=="default"&&!Object.prototype.hasOwnProperty.call(t,l)&&e(t,h,l)};Object.defineProperty(r,"__esModule",{value:!0}),i(Uh(),r),i(nl(),r),i(Wh(),r),i(Po(),r),i(fv(),r),i(dv(),r),i(Mo(),r),i(hv(),r),i(Ke(),r),i(Xn(),r),i(br(),r),i(Ne(),r),i(vv(),r),i(pv(),r),i(mv(),r),i(ei(),r),i(Zn(),r),i(dt(),r),i(Fi(),r),i(Ai(),r),i(Or(),r),i(gv(),r),i(Oo(),r),i(Io(),r),i(cl(),r),i(ll(),r),i(pl(),r),i(_v(),r),i(gl(),r),i(yv(),r),i(_l(),r),i(Ro(),r),i(yl(),r),i(bl(),r),i(bv(),r)})(Fr)),Fr}var uc=Yn();async function wv(r,e){await e.StartScanning()}var Sv=wt('<p style="margin-left: 10px;">No devices connected</p>'),Ev=wt('<p style="font-size: small;">Currently supported brands are: lovense, libo, magic-motion, mysteryvibe, picobong, vibratissimo, wevibe, youcups, cueme, kiiroo, vorze, youou, prettylove, svakom, realov, motorbunny, zalo, sayberx, muse, lelo, aneros, lovehoney, twerkingbutt</p> <p>This is a WIP feature. More devices will be added soon.</p>',1),Cv=async(r,e)=>{const i=r.target.value;console.log(`Setting mode for ${J(e).Name.replaceAll(" ","-")} to ${i}`),J(e).mode=i},xv=async(r,e)=>{J(e).invert=r.target.checked},Dv=(r,e,i)=>{e(J(i),parseInt(r.target?.value??"0")/255)},Pv=wt('<div class="device-sliders"><input type="range" min="0" max="255" value="0"/> <div class="slider"><div class="range-slider"></div></div> <div class="range-input"><input type="range" class="min-range" min="0" max="255" value="0" step="1"/> <input type="range" class="max-range" min="0" max="255" value="255" step="1"/></div></div>'),Mv=wt('<li><div style="display: flex;flex-direction: row;justify-content: space-between;"><div> </div> <div><select><option>Connect to Pleasure</option><option>Connect to Arousal</option><option>Connect to Pressure</option><option>Connect to Denials</option><option>Manual control only</option></select></div> <div><input type="checkbox"/> Invert</div></div> <!></li>'),Iv=wt("<ul></ul>"),Ov=wt('<div class="buttplug-connector"><div style="display: flex;"><button style="max-width: 250px;">Connect to a <!> toy</button> <!></div> <!></div>');function Rv(r,e){Mi(e,!0);let i=Xc(e,"deviceList",31,()=>ir([])),h=new uc.ButtplugClient("EOM Client");async function t(){h.addListener("deviceadded",S=>{console.log(`Device added: ${S.Name.replaceAll(" ","-")}`,S),console.log("Allowed messages:",S.AllowedMessages),S.AllowedMessages.forEach(C=>{S.AllowedMessages.push(`_${C}`)}),i([...i(),S])}),h.addListener("deviceremoved",S=>{console.log(`Device removed: ${S.Name.replaceAll(" ","-")}`,S),i(i().filter(C=>C!==S))});const w=new uc.ButtplugEmbeddedClientConnector;await h.Connect(w)}io(()=>{t().catch(w=>console.error(w))});function l(w,S){console.log(`Vibrate change for ${w.Name.replaceAll(" ","-")}: ${S}`);const C=(w.MinSpeed??0)/255,b=(w.MaxSpeed??255)/255;let E=S*(b-C)+C;w.invert&&(E=1-E),w.SendVibrateCmd(E)}var p={handleVibrateChange:l},u=Ov(),f=fe(u),s=fe(f);s.__click=[wv,h];var n=se(fe(s));{var c=w=>{var S=ad("another");st(w,S)};hr(n,w=>{i().length>0&&w(c)})}var d=se(s,2);{var o=w=>{var S=Sv();st(w,S)};hr(d,w=>{i().length===0&&w(o)})}var a=se(f,2);{var m=w=>{var S=Ev();st(w,S)},_=w=>{var S=Iv();kn(S,21,i,qn,(C,b,E)=>{var x=Mv(),P=fe(x),R=fe(P),F=fe(R),O=se(R,2),T=fe(O);T.__change=[Cv,b];var j=fe(T);j.value=j.__value="pleasure";var G=se(j);G.value=G.__value="arousal";var k=se(G);k.value=k.__value="pressure";var Z=se(k);Z.value=Z.__value="denials";var ae=se(Z);ae.value=ae.__value="manual";var ne=se(O,2),oe=fe(ne);oe.__change=[xv,b];var ue=se(P,2);{var de=me=>{var ee=Pv(),_e=fe(ee);_e.__input=[Dv,l,b];var Fe=se(_e,2),te=fe(Fe),M=se(Fe,2),$=fe(M);$.__input=re=>{J(b).MinSpeed=parseInt(re.target?.value??"0");const Q=document.querySelector("#"+J(b).Name.replaceAll(" ","-")+"-range-slider");Q.style.left=`${J(b).MinSpeed/255*100}%`};var W=se($,2);W.__input=re=>{J(b).MaxSpeed=parseInt(re.target?.value??"255");const Q=document.querySelector("#"+J(b).Name.replaceAll(" ","-")+"-range-slider");Q.style.right=`${(255-J(b).MaxSpeed)/255*100}%`},Dr((re,Q,X,ge)=>{qe(_e,"id",re),qe(te,"id",Q),qe($,"id",X),qe(W,"id",ge)},[()=>J(b).Name.replaceAll(" ","-")+"-vibrate",()=>J(b).Name.replaceAll(" ","-")+"-range-slider",()=>J(b).Name.replaceAll(" ","-")+"-min",()=>J(b).Name.replaceAll(" ","-")+"-max"]),st(me,ee)};hr(ue,me=>{(J(b).AllowedMessages.includes("_VibrateCmd")||J(b).AllowedMessages.includes("VibrateCmd"))&&me(de)})}Dr((me,ee)=>{ft(F,J(b).Name),qe(T,"id",me),qe(oe,"id",ee),no(oe,J(b).invert)},[()=>J(b).Name.replaceAll(" ","-")+"-mode",()=>J(b).Name.replaceAll(" ","-")+"-invert"]),st(C,x)}),st(w,S)};hr(a,w=>{i().length===0?w(m):w(_,!1)})}return st(r,u),Ii(p)}wo(["click","change","input"]);var Lv=(r,e,i,h)=>e(i(),h[i()].value),Bv=wt('<div style="width: 100%;"><label> </label> <input type="range" style="width: 100%;"/></div>'),Av=(r,e)=>{r.target!==J(e)&&J(e).close()},Fv=(r,e)=>{r.key==="Escape"&&J(e).close()},Tv=(r,e)=>{e()},$v=(r,e)=>{e()},Nv=(r,e)=>{J(e)>0?be(e,0):be(e,J(e)+1)},Vv=So('<g id="layer1"><path fill="#fff" d="M 0 2 L 0 18 L 20 18 L 20 17 L 1 17 L 1 2 L 0 2 z M 6.4921875 2.5 C 6.3623006 2.50207 6.2383174 2.554606 6.1464844 2.6464844 L 2.1464844 6.6464844 C 1.6556578 7.1177388 2.3822612 7.8443422 2.8535156 7.3535156 L 6.421875 3.7851562 L 10.083984 9.2773438 C 10.223774 9.4866441 10.49734 9.5594276 10.722656 9.4472656 L 14.400391 7.6074219 L 18.146484 11.353516 C 18.617739 11.844289 19.344289 11.117739 18.853516 10.646484 L 14.853516 6.6464844 C 14.701521 6.4947425 14.469605 6.457007 14.277344 6.5527344 L 10.671875 8.3554688 L 6.9160156 2.7226562 C 6.8217568 2.5812359 6.6621214 2.497372 6.4921875 2.5 z M 6.4824219 10.5 A 0.50083746 0.50083746 0 0 0 6.1464844 10.646484 L 2.1464844 14.646484 A 0.50083746 0.50083746 0 1 0 2.8535156 15.353516 L 6.5996094 11.609375 L 10.275391 13.447266 A 0.50083746 0.50083746 0 0 0 10.621094 13.486328 L 14.441406 12.53125 L 18.275391 14.447266 A 0.50083746 0.50083746 0 1 0 18.724609 13.552734 L 14.724609 11.552734 A 0.50083746 0.50083746 0 0 0 14.378906 11.513672 L 10.558594 12.46875 L 6.7246094 10.552734 A 0.50083746 0.50083746 0 0 0 6.4824219 10.5 z "></path></g>'),jv=So('<path style="fill:#FFF;stroke-width:0.0396344" d="m 9.5788998,16.025677 c -1.636372,-0.440696 -1.7779796,-2.691081 -0.2086571,-3.315912 0.3097319,-0.123319 0.9571003,-0.124599 1.2616903,-0.0025 l 0.211378,0.08474 0.680395,-0.398571 c 4.096339,-2.3996051 3.934967,-2.315329 4.240392,-2.21453 0.302639,0.09988 0.470328,0.323998 0.475017,0.634866 0.0057,0.376356 0.02811,0.357471 -2.332508,1.963529 -2.086825,1.41978 -2.155499,1.47051 -2.156878,1.593333 -0.01228,1.094597 -1.118953,1.93832 -2.1708292,1.655037 z M 10.41902,15.043083 c 0.716453,-0.391923 0.409556,-1.508405 -0.414627,-1.508405 -0.5352253,0 -0.9159626,0.465181 -0.7982224,0.975261 0.1290306,0.558989 0.7037636,0.811631 1.2128494,0.533144 z M 0.5476717,14.267343 C -0.3123351,13.876775 0.40270156,10.429887 1.7776258,8.3382555 6.4456509,1.2369291 17.433438,3.0440653 19.512609,11.255087 c 0.430261,1.699179 0.41677,2.766464 -0.03792,2.999733 l -0.176035,0.09031 -1.862815,-0.01104 c -2.321522,-0.01377 -2.266148,0.0062 -2.307471,-0.832131 l -0.02009,-0.407577 0.541579,-0.367696 c 0.626721,-0.425502 0.594368,-0.426033 0.656374,0.01078 l 0.04785,0.337101 h 1.107035 1.107034 l -0.0243,-0.208085 C 18.342599,11.143335 17.720053,9.6254174 16.690077,8.3465436 l -0.280611,-0.3484221 -0.63621,0.6333056 c -0.480747,0.4785518 -0.679793,0.6500498 -0.814565,0.7018285 -0.09809,0.037688 -0.431096,0.2171516 -0.74,0.3988092 C 13.556323,10.121583 13.650135,10.104775 13.398956,9.8789342 10.28437,7.0785418 4.8915576,9.3072881 4.8915576,13.39488 c 0,0.497959 -0.1285649,0.770921 -0.4205679,0.892928 -0.2294177,0.09586 -3.70712911,0.07772 -3.923318,-0.02047 z M 3.683703,12.828194 C 3.7935499,11.881745 4.2552256,10.769218 4.895823,9.9072799 L 5.1577119,9.5549022 4.3785492,8.7764703 3.5993866,7.9980383 3.3199684,8.3465013 C 2.3403649,9.5681678 1.6693669,11.12542 1.5047257,12.559317 c -0.013766,0.119894 -0.034772,0.284872 -0.046678,0.366618 L 1.436399,13.074564 H 2.5457537 3.6551086 Z M 6.453015,8.4212682 C 7.2689669,7.8757311 8.2450722,7.5028055 9.1621621,7.3862258 L 9.3702427,7.3597746 V 6.2532627 5.1467507 l -0.148629,0.019728 C 7.9120834,5.3402992 7.1669907,5.5528932 6.2101618,6.0257228 5.7357731,6.2601482 4.9540646,6.7536605 4.6537513,7.0083237 L 4.515031,7.1259573 5.2875201,7.9005523 c 0.424869,0.4260276 0.7754775,0.7745953 0.7791299,0.7745953 0.00365,0 0.1775163,-0.1142458 0.386365,-0.2538794 z M 14.721266,7.9000381 15.493755,7.1249286 15.374852,7.0256999 C 14.216444,6.0589687 12.538775,5.3750254 10.826806,5.1715774 L 10.638543,5.149204 v 1.1052852 1.1052852 l 0.208081,0.026451 c 0.918772,0.1167934 1.926361,0.5061389 2.724863,1.0529229 0.185291,0.1268804 0.345982,0.2318854 0.357091,0.2333452 0.01111,0.00146 0.367819,-0.3461454 0.792688,-0.7724554 z" id="path1168"></path>'),qv=So('<path fill="#fff" d="M3 5h4v2H3V5m0 6h4v2H3v-2m0 6h4v2H3v-2m6-12h4v2h-4V5m0 6h4v2h-4v-2m0 6h4v2h-4v-2m6-12h4v2h-4V5m0 6h4v2h-4v-2m0 6h4v2h-4v-2Z"></path>'),kv=(r,e)=>be(e,!0),Uv=(r,e)=>be(e,!0),Wv=(r,e,i)=>{e("setMode","manual"),e("setMotor",0),be(i,0)},Hv=(r,e)=>{e("triggerArousal",null)},zv=(r,e)=>{e("resetDenied",null)},Gv=(r,e)=>{e()},Kv=(r,e,i)=>{e("setMode","manual"),e("setMotor",0),be(i,0)},Qv=(r,e)=>{e("triggerArousal",null)},Yv=(r,e)=>e("resetDenied",null),Jv=(r,e)=>{e()},Xv=(r,e,i,h,t)=>{e("setMode",J(i)),J(i)==="ORGASM"&&h.vibration_mode.value===3&&t("vibration_mode",2)},Zv=wt('<div class="radioBoxItem"><input type="radio" name="runmode"/> <label> </label></div>'),ep=(r,e,i)=>e("vibration_mode",Number(i())),tp=wt('<div class="radioBoxItem"><input type="radio" name="vibemode"/> <label> </label></div>'),rp=(r,e,i)=>{e("setMotor",J(i))},np=wt('<label for="pleasure" style="color:orange"> </label> <input id="currentPleasure" type="range" min="0" step="1" style="width: 100%;accent-color: orange; background: linear-gradient(to right, orange 0%, orange 100%);"/>',1),ip=wt("<!> <!>",1),ap=(r,e)=>J(e).close(),op=(r,e)=>J(e).close(),sp=wt(`<div class="mainContainer" role="none"><div style="position: relative; padding: 0; width: 100%; max-width: 100%; box-sizing: border-box; display: flex; justify-content: center; align-items: center; flex-direction: column; overflow-x: hidden;"><div style="display: flex; justify-content: space-between; width: 100%; max-width: 100%; box-sizing: border-box; padding: 4px; flex-wrap: wrap; gap: 0.5rem;"><div><button type="button" class="topButton" aria-label="Connect via WebSocket" title="Use WebSockets to connect to EOM"><svg width="20" height="20" viewBox="0 0 256 193" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid"><path fill="#3F  F" d="M192.44 144.645h31.78V68.339l-35.805-35.804-22.472 22.472 26.497 26.497v63.14zm31.864 15.931H113.452L86.954 134.08l11.237-11.236 21.885 21.885h45.028l-44.357-44.441 11.32-11.32 44.357 44.358V88.296l-21.801-21.801 11.152-11.153L110.685 0H0l31.696 31.696v.084H97.436l23.227 23.227-33.96 33.96L63.476 65.74V47.712h-31.78v31.193l55.007 55.007L64.314 156.3l35.805 35.805H256l-31.696-31.529z"></path></svg></button></div> <div><button title="Use bluetooth to connect to EOM" class="topButton" aria-label="Connect via bluetooth"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 976" width="20" height="20" aria-label="Bluetooth"><rect ry="291" height="976" width="640" fill="#0a3d91"></rect><path d="m157 330 305 307-147 178V179l147 170-305 299" stroke="#FFF" stroke-width="53" fill="none"></path></svg></button></div> <button class="topButton" title="Change display mode" style="background-color: #636; border-color: #969;" aria-label="Change display mode"><svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" aria-label="Display mode"><!></svg></button> <button class="topButton" title="Connect to toys for stimulation" style="background-color: #99aaff; border-color: #6666ff;" aria-label="Connect to toys for stimulation"><svg width="20" height="20" viewBox="0 -1.11 63.334 63.334" xmlns="http://www.w3.org/2000/svg"><g id="Group_92" data-name="Group 92" transform="matrix(1.3362883,0,0,1.3362883,-249.74734,-236.08547)"><path id="Path_135" data-name="Path 135" d="m 231.9,193.447 a 2.36,2.36 0 0 0 -3.938,-1.162 c -3.856,3.867 -9.935,6.363 -16.778,6.363 -0.65,0 -1.288,-0.036 -1.922,-0.08 A 10.324,10.324 0 1 0 195.4,193.3 a 14.214,14.214 0 0 0 -5.334,10.736 c 0,8.93 9.451,16.169 21.109,16.169 11.658,0 19.73,-7.346 21.109,-16.169 A 25.633,25.633 0 0 0 231.9,193.447 Z" fill="#fff1b6" stroke="#333333" stroke-miterlimit="10" stroke-width="2"></path><path id="Path_136" fill="#f77" data-name="Path 136" d="m 195.03,185.174 c -0.98574,0.50384 -2.06066,0.8096 -3.164,0.9 -0.67223,-0.0208 -2.40511,-0.13078 -3.0484,-0.327 -0.80795,-0.24121 -1.56005,0.5126 -1.317,1.32 0.17497,0.64347 1.12106,1.22421 1.61245,1.675 1.56023,1.41745 4.09215,2.15953 6.19795,2.064 1.10081,-0.24119 1.93718,-1.1389 2.1,-2.254 0.294,-2.252 -2.381,-3.378 -2.381,-3.378 z" stroke="#333333" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" style="stroke-width:1.18489;stroke-dasharray:none"></path><circle id="Ellipse_29" data-name="Ellipse 29" cx="0.954" cy="0.954" r="0.954" transform="translate(200.736,184.275)" fill="#ffffff" stroke="#333333" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></circle><path id="Path_137" data-name="Path 137" d="m 223.754,204.037 c 0,2.977 -5.857,6.737 -13.174,6.737 -7.317,0 -11.6,-3.369 -12.2,-5.914 -0.782,-3.323 1.272,-8.009 11.153,-6.287" fill="none" stroke="#333333" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></g></svg></button> <button class="topButton" aria-label="Open settings" title="Settings" style="background-color: #999; border-color: #ccc;"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" cursor="pointer" aria-label="Settings"><path fill="#fff" d="M24 13.616v-3.232c-1.651-.587-2.694-.752-3.219-2.019v-.001c-.527-1.271.1-2.134.847-3.707l-2.285-2.285c-1.561.742-2.433 1.375-3.707.847h-.001c-1.269-.526-1.435-1.576-2.019-3.219h-3.232c-.582 1.635-.749 2.692-2.019 3.219h-.001c-1.271.528-2.132-.098-3.707-.847l-2.285 2.285c.745 1.568 1.375 2.434.847 3.707-.527 1.271-1.584 1.438-3.219 2.02v3.232c1.632.58 2.692.749 3.219 2.019.53 1.282-.114 2.166-.847 3.707l2.285 2.286c1.562-.743 2.434-1.375 3.707-.847h.001c1.27.526 1.436 1.579 2.019 3.219h3.232c.582-1.636.75-2.69 2.027-3.222h.001c1.262-.524 2.12.101 3.698.851l2.285-2.286c-.744-1.563-1.375-2.433-.848-3.706.527-1.271 1.588-1.44 3.221-2.021zm-12 2.384c-2.209 0-4-1.791-4-4s1.791-4 4-4 4 1.791 4 4-1.791 4-4 4z"></path></svg></button></div> <div><canvas style="position: relative; height:40vh; width:100%; "></canvas> <div class="statBoxes"><div class="statBoxButton" title="Click to halt pleasure immediately!" style="border-color: orange; color: orange;" role="none"> </div> <div class="statBoxButton" title="Click to trigger a cooldown period" style="border-color: red; color: red;" role="none"> </div> <div class="statBoxButton" style="border-color: #FF7FFF; color: #FF7FFF;" role="none"> </div> <div class="statBoxButton" title="Click to apply pressure!" style="border-color: green; color: green;" role="none"> </div></div></div> <div class="gaugesWrapper"><div class="gauges"><div class="gaugeRow"><div class="circular-progress"><svg viewBox="0 0 200 200"><circle cx="100" cy="100" r="85" fill="none" stroke="#333" stroke-width="20"></circle><circle cx="100" cy="100" r="85" fill="none" stroke="orange" stroke-width="20" transform="rotate(90 100 100)" stroke-linecap="round"></circle><text x="100" y="100" text-anchor="middle" dominant-baseline="middle" fill="orange" font-size="48" font-weight="bold"> </text><text x="100" y="130" text-anchor="middle" dominant-baseline="middle" fill="orange" font-size="16" font-weight="bold">Pleasure</text></svg> <button class="belowCircleButton" style="background-color: darkorange; border-color: orange;">Manual Full-Stop</button></div> <div class="circular-progress"><svg viewBox="0 0 200 200"><circle cx="100" cy="100" r="85" fill="none" stroke="#333" stroke-width="20"></circle><circle cx="100" cy="100" r="85" fill="none" stroke="red" stroke-width="20" transform="rotate(90 100 100)" stroke-linecap="round"></circle><line x1="100" y1="50" x2="100" y2="0" stroke="#EEDD33" stroke-width="4"></line><line x1="100" y1="50" x2="100" y2="0" stroke="#FF6666" stroke-width="4"></line><text x="100" y="100" text-anchor="middle" dominant-baseline="middle" fill="red" font-size="48" font-weight="bold"> </text><text x="100" y="130" text-anchor="middle" dominant-baseline="middle" fill="red" font-size="16" font-weight="bold">Arousal</text></svg> <button class="belowCircleButton" style="background-color: red; border-color: darkred;">Trigger Edge</button></div></div> <div class="gaugeRow"><div class="circular-progress"><svg viewBox="0 0 200 200"><circle cx="100" cy="100" r="85" fill="none" stroke="#333" stroke-width="20"></circle><circle cx="100" cy="100" r="85" fill="none" stroke="#FF7FFF" stroke-width="20" transform="rotate(90 100 100)" stroke-linecap="round"></circle><text x="100" y="100" text-anchor="middle" dominant-baseline="middle" fill="#FF7FFF" font-size="48" font-weight="bold"> </text><text x="100" y="130" text-anchor="middle" dominant-baseline="middle" fill="#FF7FFF" font-size="16" font-weight="bold">Denied</text></svg> <button class="belowCircleButton" style="background-color: #FF7FFF; color: black; border-color: #FFBFFF;" title="Reset denied orgasms count">Reset Denied</button></div> <div class="circular-progress"><svg viewBox="0 0 200 200"><circle cx="100" cy="100" r="85" fill="none" stroke="#333" stroke-width="20"></circle><circle cx="100" cy="100" r="85" fill="none" stroke="green" stroke-width="20" transform="rotate(90 100 100)" stroke-linecap="round"></circle><text x="100" y="100" text-anchor="middle" dominant-baseline="middle" fill="green" font-size="48" font-weight="bold"> </text><text x="100" y="130" text-anchor="middle" dominant-baseline="middle" fill="green" font-size="16" font-weight="bold">Pressure</text></svg> <button class="belowCircleButton" style="background-color: green; border-color: darkgreen;" title="Everything happens one notch faster">Apply Pressure</button></div></div></div> <div> </div></div> <div><input type="range" min="0" step="1" style="
          accent-color: orange; 
          background: linear-gradient(to right, orange 0%, orange 100%);
          cursor: default;
          transform: rotate(-90deg); 
          pointer-events: none;
        " readonly=""/></div> <div class="radioBoxes"><div class="radioBox"><div style="font-weight: bold; margin-right: 2em; color:#999">Control:</div> <!></div> <div class="radioBox"><div style="font-weight: bold; margin-right: 0.5em; color:#999">&nbsp;&nbsp;Mode:</div> <!></div></div> <div class="settingSliders"><!> <!> <!></div></div></div> <dialog class="settingsDialog" style=""><div style="padding: 0; margin-top: 0;"><button style="color: red; float:right; padding: 0 .1em 0 .1em; font-size: 3em; background: #555; cursor: pointer; line-height: .75em; display: flex; align-items: center; justify-content: center;" aria-label="Close settings">&times;</button> <h2>Settings</h2> <hr/> <!></div></dialog> <dialog class="settingsDialog" style=""><div style="padding: 0; margin-top: 0;"><button style="color: red; float:right; padding: 0 .1em 0 .1em; font-size: 3em; background: #555; cursor: pointer; line-height: .75em; display: flex; align-items: center; justify-content: center;" aria-label="Close settings">&times;</button> <h2>Connect to bluetooth toys <span style="font-size: small;">(WIP)</span></h2> <hr/> <!> <!></div></dialog>`,1);function up(r,e){Mi(e,!0);const i=(z,K=Hl)=>{var ce=Bv(),le=fe(ce),Me=fe(le),ye=se(le,2);ye.__change=[Lv,Be,K,a],Dr(Ce=>{qe(le,"for",K()),qe(le,"title",a[K()].description),ft(Me,`${a[K()].label??""} :
      ${Ce??""}`),qe(ye,"id",K()),qe(ye,"title",a[K()].description),qe(ye,"min",a[K()].min),qe(ye,"max",a[K()].max)},[()=>q(K())]),Gi(ye,()=>a[K()].value,Ce=>a[K()].value=Ce),st(z,ce)};let h,t=Ge(!1),l,p=Ge(ir([])),u=window.location.protocol==="https:",f=Ge(ir(window.location.toString().replace("/ui","/").replace(/http(s?):\/\//,u?"wss://":"ws://").replace(/^(wss?:\/\/)[^\/:]+(:\d+)?(\/.*)?$/,(z,K,ce,le)=>{const Me=z.replace(K,"").replace(ce||"","").replace(le||"",""),ye=/^\d+\.\d+\.\d+\.\d+$/.test(Me);return K+(ye?Me:"192.168.4.1")})));(window.location.toString().match(/\.\d+\/?$/)??[]).length>0&&window.location.replace(window.location.toString()+"ws");let s=ir([{pressure:4e3,arousal:4e3,motor:255,threshold:3950,denied:19,runMode:"ENDLESS",localTime:Date.now()},{pressure:0,arousal:0,motor:0,threshold:0,denied:0,runMode:"ENDLESS",localTime:0}]),n={1:"RampStop",2:"Depletion",3:"Enhancement"},c=["MANUAL","ENDLESS","ORGASM"];function d(z,K){if(K==="pleasure"||K==="motor")return typeof z.motor=="number"?Math.round(z.motor/a.max_pleasure.value*P):0;if(K==="runMode")return c.indexOf(z.runMode);if(K==="denials")return typeof z.denied=="number"?Math.round(z.denied/T*P):0;const ce=z[K];return typeof ce=="number"?ce:0}function o(z){let K=Xe(s);if(K.length===0)return 0;const ce=K[K.length-1];return d(ce,z)}let a=ir({sensitivity_threshold:{value:1024,min:0,max:4096,label:"Arousal Edge Threshold",type:"%",description:"The arousal threshold for orgasm detection. Lower values stop sooner. Everyone will have their own ideal setting here."},mid_threshold:{value:0,min:0,max:o("threshold"),label:"Arousal Mid Threshold",type:"%",description:"The start of the warning zone for approaching arousal.  Changes lights to yellow."},vibration_mode:{value:2,min:1,max:4,label:"Mode",type:"mode",description:"The algorithm used during endless or orgasm mode."},max_pleasure:{value:255,min:0,max:255,label:"Maximum Pleasure Intensity",type:"%",description:"Maximum intensity of pleasure during stimulation."},max_denied:{value:20,min:0,max:100,label:"Maximum Denials",type:"denied orgasms",description:"Maximum number of denials before forcing an orgasm (in orgasm mode). 0 or 100 disables this limit. Also changes the scale of the chart line in other modes."},motor_ramp_time_s:{value:30,min:1,max:120,label:"Pleasure Ramp Time",type:"seconds",description:"Time (s) taken to ramp the pleasure from the starting amount to the maximum."},initial_pleasure:{value:10,min:0,max:255,label:"Starting Pleasure Intensity",type:"%",description:"Initial intensity of pleasure when stimulation starts."},edge_delay:{value:5,min:0,max:60,label:"Edge Delay",type:"seconds",description:"Minimum time to wait after an edge detection before resuming pleasure."},max_additional_delay:{value:5,min:0,max:60,label:"Max Additional Delay",type:"seconds",description:"A random amount of extra seconds to add to the wait time before resuming after an edge detection."},chart_window_s:{value:5,min:1,max:120,label:"Chart Window",type:"seconds",description:"The number of seconds to display in the chart history.  Higher numbers can cause sluggish behavior on slower devices."},minimum_on_time:{value:5,min:0,max:60,label:"Minimum On Time",type:"seconds",description:"Time after stimulation restarts before edge detection is resumed."},pressure_smoothing:{value:10,min:0,max:100,label:"Pressure Smoothing",type:"samples",description:"Number of samples to take an average of. Higher numbers can reduce false positives but may result in lag and lower resolution!"},update_frequency_hz:{value:50,min:1,max:100,label:"Update Frequency (Hz)",type:"Hz",description:"Update frequency for pressure readings and arousal steps."},sensor_sensitivity:{value:3,min:0,max:3,label:"Sensor Sensitivity",type:"%",description:"Analog pressure sensor prescaling. Higher values are more sensitive."},clench_pressure_sensitivity:{value:3e3,min:0,max:4096,label:"Clench Pressure Sensitivity",type:"%",description:"Minimum additional Arousal level to detect clench"},clench_time_to_orgasm_ms:{value:5e3,min:0,max:6e4,label:"Clench Time to Orgasm (ms)",type:"ms",description:"Threshold variable that is milliseconds count of clench to detect orgasm."},clench_time_threshold_ms:{value:2e3,min:0,max:6e4,label:"Clench Time Threshold (ms)",type:"ms",description:"Threshold variable that is milliseconds counts to detect the start of clench."},max_clench_duration_ms:{value:2e4,min:0,max:6e4,label:"Max Clench Duration (ms)",type:"ms",description:"Duration the clench detector can raise arousal if clench detector turned on in edging session."},auto_edging_duration_minutes:{value:15,min:1,max:120,label:"Auto-Edging Duration",type:"minutes",description:"How long to edge before permiting an orgasm."},post_orgasm_duration_seconds:{value:60,min:0,max:180,label:"Post Orgasm Duration",type:"seconds",description:"How long to stimulate after orgasm detected."},clench_detector_in_edging:{value:1,min:0,max:1,label:"Clench Detector in Edging",type:"yes/no",description:"Enable clench detection while in edging mode."},use_post_orgasm:{value:1,min:0,max:1,label:"Use Post Orgasm",type:"yes/no",description:"Use post-orgasm torture mode and functionality."},use_average_values:{value:1,min:0,max:1,label:"Use Average Values",type:"yes/no",description:"Use average values when calculating arousal. This smooths noisy data."}}),m=["sensitivity_threshold","motor_ramp_time_s","edge_delay","chart_window_s"],_=["max_denied","max_additional_delay","sensor_sensitivity","max_pleasure","mid_threshold","initial_pleasure","minimum_on_time","pressure_smoothing","update_frequency_hz","clench_pressure_sensitivity","clench_time_to_orgasm_ms","clench_time_threshold_ms","clench_detector_in_edging","max_clench_duration_ms","post_orgasm_duration_seconds","use_post_orgasm","use_average_values"],w={pleasure:["orange",3],arousal:["red",3],threshold:["red",2],denials:["#FF7FFF",2],pressure:["green",1]},S=Ge(0),C,b,E=5;const x={top:10,right:0,bottom:5,left:5};let P=4096,R=2,F=4,O=Ge(0),T=20,j=100,G=Ge(!1),k=Ge(!1),Z=Ge("bt"),ae=null,ne=null,oe=Ge(void 0),ue=Ge(!1),de=Ge(!1),me=Ge(void 0),ee=Ge(void 0),_e=Ge(0);function Fe(){console.log("Chart ready"),b.canvas.width=window.innerWidth,b.canvas.height=window.innerHeight;const z=Object.entries(w),K=Math.round((C.width-C.width*(x.left+x.right)/100)/(z.length+1));let ce=Math.round(b.canvas.height*x.top/100),le=K/4,Me=le/4;b.font="bold 1.5em sans-serif",b.fontStretch="condensed",b.textRendering="optimizeLegibility",b.fillStyle="black",b.fillRect(0,0,C.width,C.height),b.textAlign="left";for(let Ce=0;Ce<=P;Ce+=P/4){const nt=b.canvas.height-Ce/P*(b.canvas.height-b.canvas.height*(x.top+x.bottom)/100)-b.canvas.height*x.bottom/100;b.fillStyle="white",b.fillText(Math.round(Ce/P*100).toString()+"%",5,nt,Math.round(C.width*x.left/100/1.5))}let ye=K;for(const[Ce,[nt,ot]]of z)b.fillStyle=nt,b.fillRect(ye,Math.round(b.canvas.height*x.top/100*1.25)-ce,le,Math.round(ce/2)),b.fillText(Ce,ye+le+Me,ce/1.666,K-le-Me),ye+=K;b.fillStyle="black",W()}function te(z,K){if(z[1]===z[0])return ye=>0;const ce=(K[1]-K[0])/(z[1]-z[0]),le=Math.min(K[0],K[1]),Me=Math.max(K[0],K[1]);return ye=>Math.max(le,Math.min(Me,K[0]+ce*(ye-z[0])))}function M(z){return z.arousal>=z.threshold}function $(z){return(z.cooldown??0)>0&&z.motor==0}function W(){if(!b||!C||J(_e)!=1)return;const z=Xe(s);if(z.length===0)return;const K=te([0,z.length-1],[C.width*x.left/100,C.width-C.width*x.right/100]),ce=te([0,P],[C.height-C.height*x.bottom/100,C.height*x.top/100+R]);let le=z[z.length-1];M(le)||$(le)?J(S)>=E?(b.fillStyle=b.fillStyle=="#111111"?"#330000":"#111111",be(S,0)):be(S,J(S)+1):b.fillStyle="#111111",b.fillRect(C.width*x.left/100-R,C.height*x.top/100-R,C.width-C.width*x.right/100,C.height-C.height*x.bottom/100);for(let ye=0;ye<=P;ye+=P/4){const Ce=b.canvas.height-ye/P*(b.canvas.height-b.canvas.height*(x.top+x.bottom)/100)-b.canvas.height*x.bottom/100;b.beginPath(),b.setLineDash([5,5]),b.strokeStyle="white",b.moveTo(C.width*x.left/100,Ce),b.lineTo(C.width-C.width*x.right/100,Ce),b.stroke(),b.setLineDash([])}let Me=re();Me.length>0&&(b.font=C.width>600?C.width>900?"bold 3em sans-serif":"2em sans-serif":"1em sans-serif",b.textAlign="center",b.strokeText(Me,C.width/2,C.height/2));for(const[ye,[Ce,nt]]of Object.entries(w))b.strokeStyle=Ce,b.setLineDash(ye==="threshold"?[10,10]:[]),b.beginPath(),b.moveTo(C.width*x.left/100+R,ce(d(z[0],ye))),z.forEach((ot,ut)=>{M(ot)&&ye==="arousal"?b.lineWidth=nt*F:b.lineWidth=nt,b.lineTo(K(ut),ce(d(ot,ye))),b.stroke(),b.beginPath(),b.moveTo(K(ut),ce(d(ot,ye)))})}function re(){let z=Xe(s)[Xe(s).length-1],K="";if($(z))K=M(z)?"DENIED ORGASM - COOLING DOWN":`DENIED FOR ${z.cooldown} MORE SECONDS`;else if((z.runMode??"")==="ORGASM"){let ce=z.permit??0,le=" IN "+(ce>60?Math.ceil(ce/60).toString()+" MINUTES":ce.toString()+" SECOND"+(ce>1?"S":""));if(a.max_denied.value>0&&a.max_denied.value<100){let Me=a.max_denied.value-(z.denied??0);Me>0?le+=` OR ${Me} DENIAL`+(Me!=1?"S":""):le="!!"}K=`ORGASM PERMITTED${le}`}return K}function Q(z){W()}function X(z){console.log("Received configuration data:",z);for(const[K,ce]of Object.entries(z))K in a&&(a[K].value=Number(ce))}function ge(z){try{let K=JSON.parse(z.data);if(!K){console.warn("Received empty data:",K);return}if(!K.readings){K.wifiStatus||(K.configList?X(K.configList):K.setMode!==void 0||K.setMotor!==void 0||K.vibration_mode!==void 0||console.warn("Received unknown data:",K));return}if(K=K.readings,!K.millis){console.warn("Received data without 'millis' field:",K);return}if(K.pressure===void 0||K.arousal===void 0||K.motor===void 0){console.warn("Received data missing expected fields:",K);return}for(K.pleasure=K.motor,K.localTime=Date.now(),s.push(K);s.length>0&&(K.millis-(s[0].millis??0)>a.chart_window_s.value*1e3||Date.now()-(s[0].localTime??0)>a.chart_window_s.value*1e3);)s.shift();C?.dispatchEvent(new CustomEvent("updated",{}))}catch(K){console.error("Error parsing WebSocket message:",K)}}function Ee(){be(G,!0),ne.disconnect(),be(k,!1),console.log("WebSocket connection established");let z=JSON.stringify({configList:null});J(oe).send(z),J(oe).send(JSON.stringify({streamReadings:null})),C?.dispatchEvent(new CustomEvent("ready",{})),setInterval(()=>{let K=Xe(s)[Xe(s).length-1].localTime??0;Date.now()-K>1e4&&(console.log("Data is stale...dropped connection?"),J(Z)=="ws"?(console.log("Reconnecting WebSocket..."),be(G,!1),J(oe).close(),be(oe,new WebSocket(J(f)),!0),it(J(oe)),console.log("Reconnecting to ",J(f),J(oe))):(be(k,!1),ne?.disconnect()))},5e3)}function we(z){be(G,!1),console.error("WebSocket error observed:",z)}function Be(z,K){if(a[z].value=K,J(G)){let ce=JSON.stringify({configSet:{[z]:K}});J(oe).send(ce),console.log(`Sent ${z} change:`,K)}else J(k)&&ae!=null&&ae.writeValue(new Uint8Array([2,...new TextEncoder().encode(z),58,...new TextEncoder().encode(K.toString())])).then(()=>{console.log(`Sent ${z} change via Bluetooth:`,K)}).catch(ce=>{console.error("Error sending setting change via Bluetooth:",ce,z,K)})}function xe(z,K){if(J(G)){let ce=JSON.stringify({[z]:K});J(oe).send(ce)}else if(J(k)){let ce=z=="setMode"?c.indexOf(String(K)):o("runMode"),le;if(z=="setMotor"){let Me=z=="setMotor"?Number(K):o("pleasure");le=new Uint8Array([1,ce,0,0,Number(Me)])}else le=new Uint8Array([1,ce,z=="triggerArousal"?1:0,z=="resetDenied"?1:0]);console.log(`sending ${z} change via Bluetooth:`,le),ae.writeValue(le).then(()=>{console.log(`Sent ${z} change via Bluetooth:`,K)}).catch(Me=>{console.error("Error sending setting change via Bluetooth:",Me)})}else{console.warn("Not connected via WebSocket or Bluetooth. Cannot send setting change.");return}console.log(`Sent ${z} change:`,K)}let De=new Map;const et=30;function Ve(z,K){const ce=De.get(z);ce!==void 0&&clearTimeout(ce);const le=setTimeout(()=>{xe(z,K),De.delete(z)},et);De.set(z,le)}function it(z){z.onopen=Ee,z.onerror=we,z.onmessage=ge}const Qe=z=>{C=z,b=C.getContext("2d");function K(ce,le){C.dispatchEvent(new CustomEvent(ce,{detail:le}))}io(()=>{K("ready",void 0)})};io(()=>{setInterval(()=>{if(console.log(Xe(J(G)),J(G),Xe(J(k)),J(k)),!(J(G)||J(k))){console.log("Not connected");return}console.log("Current readings:",Xe(s)[Xe(s).length-1])},3e4)});function Le(){const z=prompt("Enter WebSocket URL:",J(f));z!==null&&z.trim()!==""&&(be(f,z.trim(),!0),J(oe)?.close(),be(G,!1),be(oe,new WebSocket(J(f)),!0),be(Z,"ws"),it(J(oe)),console.log("Connecting to ",J(f),J(oe)))}function je(z){const K=z.target;ae=null,ne=null,console.log(`Device ${K.name} is disconnected.`),be(k,!1)}function rt(){J(k)&&ae!=null&&ae.writeValue(new Uint8Array([3])).then(()=>{console.log("Sent configuration request via Bluetooth.")}).catch(z=>{console.error("Error sending configuration request via Bluetooth:",z)})}function q(z){const K=a[z];return K.type==="%"?Math.round(K.value/K.max*100).toString()+" %":K.type==="yes/no"?K.value===1?"Yes":"No":z=="max_denied"?K.value===0||K.value===100?"Unlimited":`${K.value} denied orgasms`:`${K.value} ${K.type}`}function Y(){Be("motor_ramp_time_s",a.motor_ramp_time_s.value>1?a.motor_ramp_time_s.value-1:1),setTimeout(()=>{Be("edge_delay",a.edge_delay.value>0?a.edge_delay.value-1:0)},100),setTimeout(()=>{let z=Xe(s)[Xe(s).length-1].threshold;Be("sensitivity_threshold",z+j>P?P:z+j)},200)}const y=navigator.bluetooth;window.onresize=()=>{Fe()};function v(){if(!y){alert("Web bluetooth is not available on iOS devices or Firefox.");return}J(k)?(console.log("Disconnecting from Bluetooth device:",ne),ne?.gatt.disconnect(),be(k,!1)):y.requestDevice({optionalServices:[26985,26986,26987],filters:[{namePrefix:"Libotoy"}]}).then(z=>{console.log("Connecting to device:",z),z.addEventListener("gattserverdisconnected",je),ne=z,z.gatt.connect().then(K=>{be(Z,"bt"),console.log("Connected to GATT server:",K),K.getPrimaryService(26985).then(ce=>{console.log("Got primary service:",ce),ce.getCharacteristic(26986).then(le=>{console.log("Got characteristic:",le),le.addEventListener("characteristicvaluechanged",Me=>{const ye=Me.target.value,Ce=new Uint8Array(ye.buffer);let nt={pressure:Ce[0]*16,arousal:Ce[1]*16,threshold:Ce[2]*16,motor:Ce[3],pleasure:Ce[3],cooldown:Ce[4],denied:Ce[5],runMode:c[Ce[6]]??"ENDLESS",pleasureMode:Ce[7],permit:Ce[8]*255+(Ce[9]??0),color:String(Ce[10])+String(Ce[11])+String(Ce[12]),millis:Date.now(),localTime:Date.now()};if(s.push(nt),J(t)&&h){const ot=Number(Ce[10]),ut=Number(Ce[11]),ze=Number(Ce[12]);h.writeRGB(ot,ut,ze).catch(cr=>console.error("Failed to write RGB:",cr))}for(J(p).forEach(ot=>{const ut=document.getElementById(`${ot.Name.replaceAll(" ","-")}-vibrate`);if(ot.mode!="manual"){let ze=0;switch(ot.mode){case"arousal":ze=nt.arousal/16;break;case"pressure":ze=nt.pressure/16;break;case"denied":ze=(nt.denied??0)/a.max_denied.value;break;default:ze=nt.pleasure??0;break}ut&&(ut.value=String(Math.round(ze*255))),l?.handleVibrateChange(ot,ze/255)}});s.length>0&&Date.now()-(s[0].localTime??0)>a.chart_window_s.value*1e3;)s.shift();be(O,Number(nt.pleasure),!0),C?.dispatchEvent(new CustomEvent("updated",{}))}),le.startNotifications().then(()=>{console.log("Notifications started for characteristic:",le.uuid),J(oe)?.close(),be(G,!1),be(k,!0)})}),ce.getCharacteristic(26987).then(le=>{console.log("Got control characteristic:",le),ae=le,console.log("Ready to send control commands via Bluetooth.",ae)}),ce.getCharacteristic(26988).then(le=>{console.log("Got characteristic:",le),le.addEventListener("characteristicvaluechanged",Me=>{const ye=Me.target.value,Ce=new Uint8Array(ye.buffer,ye.byteOffset,ye.byteLength);let nt=Ce.length;for(let ze=0;ze<Ce.length;ze++)if(Ce[ze]===0){nt=ze;break}const ut="{"+new TextDecoder().decode(Ce.slice(0,nt))+"}";try{console.log("Received config data:",ut,ye);const ze=JSON.parse(ut);for(const[cr,Mn]of Object.entries(ze))cr in a&&(a[cr].value=Mn)}catch(ze){console.error("Error parsing config JSON:",ze,ut)}}),le.startNotifications().then(()=>{console.log("Notifications started for characteristic:",le.uuid),rt()})})}).catch(ce=>{console.error("Error getting primary service:",ce)})}).catch(K=>{console.error("Error connecting to GATT server:",K)})}).catch(z=>{console.error(z)})}var g=sp(),D=In(g);D.__click=[Av,me],D.__keyup=[Fv,me];var L=fe(D),N=fe(L),V=fe(N),ie=fe(V);ie.__click=[Tv,Le];var he=se(V,2),Ie=fe(he);Ie.__click=[$v,v];var Pe=se(he,2);Pe.__click=[Nv,_e];var $e=fe(Pe),Ti=fe($e);{var $i=z=>{var K=Vv();st(z,K)},Ni=z=>{var K=Qo(),ce=In(K);{var le=ye=>{var Ce=jv();st(ye,Ce)},Me=ye=>{var Ce=qv();st(ye,Ce)};hr(ce,ye=>{J(_e)==1?ye(le):ye(Me,!1)},!0)}st(z,K)};hr(Ti,z=>{J(_e)==0?z($i):z(Ni,!1)})}var ti=se(Pe,2);ti.__click=[kv,de];var Vi=se(ti,2);Vi.__click=[Uv,ue];var or=se(N,2),wr=fe(or);Rn(wr,z=>C=z,()=>C),fd(wr,z=>Qe?.(z));var ri=se(wr,2),Cn=fe(ri);Cn.__click=[Wv,xe,O];var xn=fe(Cn),cn=se(Cn,2);cn.__click=[Hv,xe];var ji=fe(cn),Rr=se(cn,2);Rr.__click=[zv,xe];var qi=fe(Rr),Dn=se(Rr,2);Dn.__click=[Gv,Y];var B=fe(Dn),I=se(or,2),A=fe(I),H=fe(A),U=fe(H),ve=fe(U),pe=se(fe(ve));qe(pe,"stroke-dasharray",2*Math.PI*85);var Oe=se(pe),We=fe(Oe),tt=se(Oe),Re=se(ve,2);Re.__click=[Kv,xe,O];var ke=se(U,2),Ye=fe(ke),Se=se(fe(Ye));qe(Se,"stroke-dasharray",2*Math.PI*85);var He=se(Se),Je=se(He),Ue=se(Je),sr=fe(Ue),zt=se(Ue),Gt=se(Ye,2);Gt.__click=[Qv,xe];var Sr=se(H,2),ur=fe(Sr),ht=fe(ur),vt=se(fe(ht));qe(vt,"stroke-dasharray",2*Math.PI*85);var Jt=se(vt),Xt=fe(Jt),Lr=se(Jt),ni=se(ht,2);ni.__click=[Yv,xe];var ii=se(ur,2),Br=fe(ii),Er=se(fe(Br));qe(Er,"stroke-dasharray",2*Math.PI*85);var ln=se(Er),ai=fe(ln),oi=se(Br,2);oi.__click=[Jv,Y];var Cr=se(A,2),wl=fe(Cr),ki=se(I,2),Lo=fe(ki),Bo=se(ki,2),Ao=fe(Bo),Sl=se(fe(Ao),2);kn(Sl,17,()=>c,qn,(z,K,ce)=>{var le=Zv(),Me=fe(le);qe(Me,"id",`runmode-${ce}`),Me.__change=[Xv,xe,K,a,Be];var ye=se(Me,2);qe(ye,"for",`runmode-${ce}`);var Ce=fe(ye);Dr((nt,ot,ut)=>{zi(Me,J(K)),no(Me,nt),yt(ye,1,ot),ft(Ce,ut)},[()=>Xe(s)[Xe(s).length-1].runMode==J(K),()=>Et(Xe(s)[Xe(s).length-1].runMode==J(K)?"radioChosen":"radioChoice"),()=>J(K).substring(0,1).toUpperCase()+J(K).substring(1).toLowerCase()]),st(z,le)});var El=se(Ao,2),Cl=se(fe(El),2);kn(Cl,17,()=>Object.entries(n),qn,(z,K)=>{var ce=Tf(()=>Gl(J(K),2));let le=()=>J(ce)[0],Me=()=>J(ce)[1];var ye=Qo(),Ce=In(ye);{var nt=ot=>{var ut=tp(),ze=fe(ut);ze.__change=[ep,Be,le];var cr=se(ze,2),Mn=fe(cr);Dr((Ui,Wi)=>{qe(ze,"id",`vibemode-${le()??""}`),zi(ze,le()),no(ze,Ui),qe(cr,"for",`vibemode-${le()??""}`),yt(cr,1,Wi),ft(Mn,Me())},[()=>a.vibration_mode.value===Number(le()),()=>Et(a.vibration_mode.value===Number(le())?"radioChosen":"radioChoice")]),st(ot,ut)};hr(Ce,ot=>{(Xe(s)[Xe(s).length-1].runMode!=="ORGASM"||le()!=="3")&&ot(nt)})}st(z,ye)});var xl=se(Bo,2),Fo=fe(xl);{var Dl=z=>{var K=np(),ce=In(K),le=fe(ce),Me=se(ce,2);Me.__input=[rp,Ve,O],Dr(ye=>{ft(le,`Pleasure: ${ye??""} %`),qe(Me,"max",a.max_pleasure.value)},[()=>Math.floor(o("pleasure")/P*100)]),Gi(Me,()=>J(O),ye=>be(O,ye)),st(z,K)};hr(Fo,z=>{Xe(s)[Xe(s).length-1].runMode==="MANUAL"&&z(Dl)})}var To=se(Fo,2);{var Pl=z=>{var K=ip(),ce=In(K);i(ce,()=>"auto_edging_duration_minutes");var le=se(ce,2);i(le,()=>"max_denied"),st(z,K)};hr(To,z=>{Xe(s)[Xe(s).length-1].runMode==="ORGASM"&&z(Pl)})}var Ml=se(To,2);kn(Ml,17,()=>m,qn,(z,K)=>{i(z,()=>J(K))});var Pn=se(D,2),Il=fe(Pn),$o=fe(Il);$o.__click=[ap,me];var Ol=se($o,6);kn(Ol,17,()=>_,qn,(z,K)=>{i(z,()=>J(K))}),Rn(Pn,z=>be(me,z),()=>J(me));var si=se(Pn,2),Rl=fe(si),No=fe(Rl);No.__click=[op,ee];var Vo=se(No,6);Rn(Rv(Vo,{get deviceList(){return J(p)},set deviceList(z){be(p,z,!0)}}),z=>l=z,()=>l);var Ll=se(Vo,2);Rn(Ed(Ll,{get BTLEDconnected(){return J(t)},set BTLEDconnected(z){be(t,z,!0)}}),z=>h=z,()=>h),Rn(si,z=>be(ee,z),()=>J(ee)),Dr((z,K,ce,le,Me,ye,Ce,nt,ot,ut,ze,cr,Mn,Ui,Wi,Bl,Al,Fl,Tl,$l,Nl,Vl,jl,ql)=>{Ar(V,J(k)?"visibility: hidden;":"display: flex; align-items: center; flex-shrink: 1; min-width: 0;"),Ar(ie,J(G)?"background-color: #3aada1; border-color: #0a9d91;":"background-color: #999; border-color: #ccc;"),zi(ie,J(G)?"Connected":"Connect"),Ar(he,J(G)?"visibility: hidden;":"display: flex; align-items: center; flex-shrink: 1; min-width: 0;"),Ar(Ie,y?J(k)?"background-color: #10b030; border-color: #30e060;":"background-color: #3a6dc1; border-color: #0a3d91;":"background-color: darkred; border-color: darkred;"),Ar(or,J(_e)!=1?"display: none; width:100%;":"width:100%;"),ft(xn,`Pleasure: ${z??""}`),ft(ji,`Arousal: ${K??""} %`),qe(Rr,"title",`Click to reset ${a.vibration_mode.value!==3?"denied ":""}orgasms count`),ft(qi,`${a.vibration_mode.value===3?"Orgasms":"Denied"}: ${ce??""}`),ft(B,`Pressure: ${le??""} %`),Ar(I,J(_e)!=0?"display: none;":""),qe(pe,"stroke-dashoffset",2*Math.PI*85*(1-J(O)/a.max_pleasure.value)),yt(pe,0,Me),yt(Oe,0,ye),ft(We,`${Ce??""}%`),yt(tt,0,nt),qe(Se,"stroke-dashoffset",ot),yt(Se,0,ut),qe(He,"transform",`rotate(${a.mid_threshold.value/P*360-180} 100 100)`),yt(Je,0,ze),qe(Je,"transform",`rotate(${cr??""} 100 100)`),yt(Ue,0,Mn),ft(sr,`${Ui??""}%`),yt(zt,0,Wi),qe(vt,"stroke-dashoffset",Bl),yt(vt,0,Al),yt(Jt,0,Fl),ft(Xt,Tl),yt(Lr,0,$l),qe(Er,"stroke-dashoffset",Nl),ft(ai,`${Vl??""}%`),yt(Cr,1,jl),ft(wl,ql),Ar(ki,J(_e)!=2?"display: none;":"display: flex; justify-content: center; align-items: center; height: 40vh; gap: 2rem;"),qe(Lo,"max",a.max_pleasure.value),Pn.open=J(ue),si.open=J(de)},[()=>Math.floor(o("pleasure")/P*100)?Math.round(o("pleasure")/P*99).toString()+"%":"DENIED!",()=>Math.floor(o("arousal")/P*100),()=>o("denied"),()=>Math.round(o("pressure")/P*100),()=>Et(o("cooldown")==0&&o("pleasure")>0?"cooldown-flash-stroke-orange":""),()=>Et(o("cooldown")==0&&o("pleasure")>0?"cooldown-flash-text-orange":""),()=>Math.round(J(O)/a.max_pleasure.value*100),()=>Et(o("cooldown")==0&&o("pleasure")>0?"cooldown-flash-text-orange":""),()=>2*Math.PI*85*(1-Math.min(1,o("arousal")/P)),()=>Et(o("cooldown")>0?"cooldown-flash-stroke":""),()=>Et(o("cooldown")>0?"cooldown-flash-stroke":""),()=>o("threshold")/P*360-180,()=>Et(o("cooldown")>0?"cooldown-flash-text":""),()=>Math.round(o("arousal")/P*100),()=>Et(o("cooldown")>0?"cooldown-flash-text":""),()=>2*Math.PI*85*(1-o("denied")/T),()=>Et(o("cooldown")>0?"cooldown-flash-stroke-pink":""),()=>Et(o("cooldown")>0?"cooldown-flash-text-pink":""),()=>o("denied"),()=>Et(o("cooldown")>0?"cooldown-flash-text-pink":""),()=>2*Math.PI*85*(1-o("pressure")/P),()=>Math.round(o("pressure")/P*100),()=>Et(o("cooldown")>0?"statusText cooldown-flash-text":"statusText"),()=>Xe(s)[Xe(s).length-1].runMode=="MANUAL"?"MANUALLY CONTROLLING PLEASURE":re().length>0?re():"INCREASING PLEASURE"]),On("updated",wr,Q),On("ready",wr,Fe),On("resize",wr,Fe),Gi(Lo,()=>J(O),z=>be(O,z)),On("close",Pn,()=>be(ue,!1)),On("close",si,()=>be(de,!1)),st(r,g),Ii()}wo(["change","click","keyup","input"]);var Ya={},Vn={},cc;function cp(){if(cc)return Vn;cc=1,Vn.byteLength=u,Vn.toByteArray=s,Vn.fromByteArray=d;for(var r=[],e=[],i=typeof Uint8Array<"u"?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,l=h.length;t<l;++t)r[t]=h[t],e[h.charCodeAt(t)]=t;e[45]=62,e[95]=63;function p(o){var a=o.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var m=o.indexOf("=");m===-1&&(m=a);var _=m===a?0:4-m%4;return[m,_]}function u(o){var a=p(o),m=a[0],_=a[1];return(m+_)*3/4-_}function f(o,a,m){return(a+m)*3/4-m}function s(o){var a,m=p(o),_=m[0],w=m[1],S=new i(f(o,_,w)),C=0,b=w>0?_-4:_,E;for(E=0;E<b;E+=4)a=e[o.charCodeAt(E)]<<18|e[o.charCodeAt(E+1)]<<12|e[o.charCodeAt(E+2)]<<6|e[o.charCodeAt(E+3)],S[C++]=a>>16&255,S[C++]=a>>8&255,S[C++]=a&255;return w===2&&(a=e[o.charCodeAt(E)]<<2|e[o.charCodeAt(E+1)]>>4,S[C++]=a&255),w===1&&(a=e[o.charCodeAt(E)]<<10|e[o.charCodeAt(E+1)]<<4|e[o.charCodeAt(E+2)]>>2,S[C++]=a>>8&255,S[C++]=a&255),S}function n(o){return r[o>>18&63]+r[o>>12&63]+r[o>>6&63]+r[o&63]}function c(o,a,m){for(var _,w=[],S=a;S<m;S+=3)_=(o[S]<<16&16711680)+(o[S+1]<<8&65280)+(o[S+2]&255),w.push(n(_));return w.join("")}function d(o){for(var a,m=o.length,_=m%3,w=[],S=16383,C=0,b=m-_;C<b;C+=S)w.push(c(o,C,C+S>b?b:C+S));return _===1?(a=o[m-1],w.push(r[a>>2]+r[a<<4&63]+"==")):_===2&&(a=(o[m-2]<<8)+o[m-1],w.push(r[a>>10]+r[a>>4&63]+r[a<<2&63]+"=")),w.join("")}return Vn}var _i={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var lc;function lp(){return lc||(lc=1,_i.read=function(r,e,i,h,t){var l,p,u=t*8-h-1,f=(1<<u)-1,s=f>>1,n=-7,c=i?t-1:0,d=i?-1:1,o=r[e+c];for(c+=d,l=o&(1<<-n)-1,o>>=-n,n+=u;n>0;l=l*256+r[e+c],c+=d,n-=8);for(p=l&(1<<-n)-1,l>>=-n,n+=h;n>0;p=p*256+r[e+c],c+=d,n-=8);if(l===0)l=1-s;else{if(l===f)return p?NaN:(o?-1:1)*(1/0);p=p+Math.pow(2,h),l=l-s}return(o?-1:1)*p*Math.pow(2,l-h)},_i.write=function(r,e,i,h,t,l){var p,u,f,s=l*8-t-1,n=(1<<s)-1,c=n>>1,d=t===23?Math.pow(2,-24)-Math.pow(2,-77):0,o=h?0:l-1,a=h?1:-1,m=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,p=n):(p=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-p))<1&&(p--,f*=2),p+c>=1?e+=d/f:e+=d*Math.pow(2,1-c),e*f>=2&&(p++,f/=2),p+c>=n?(u=0,p=n):p+c>=1?(u=(e*f-1)*Math.pow(2,t),p=p+c):(u=e*Math.pow(2,c-1)*Math.pow(2,t),p=0));t>=8;r[i+o]=u&255,o+=a,u/=256,t-=8);for(p=p<<t|u,s+=t;s>0;r[i+o]=p&255,o+=a,p/=256,s-=8);r[i+o-a]|=m*128}),_i}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var fc;function fp(){return fc||(fc=1,(function(r){const e=cp(),i=lp(),h=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=u,r.SlowBuffer=S,r.INSPECT_MAX_BYTES=50;const t=2147483647;r.kMaxLength=t,u.TYPED_ARRAY_SUPPORT=l(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const y=new Uint8Array(1),v={foo:function(){return 42}};return Object.setPrototypeOf(v,Uint8Array.prototype),Object.setPrototypeOf(y,v),y.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function p(y){if(y>t)throw new RangeError('The value "'+y+'" is invalid for option "size"');const v=new Uint8Array(y);return Object.setPrototypeOf(v,u.prototype),v}function u(y,v,g){if(typeof y=="number"){if(typeof v=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return c(y)}return f(y,v,g)}u.poolSize=8192;function f(y,v,g){if(typeof y=="string")return d(y,v);if(ArrayBuffer.isView(y))return a(y);if(y==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y);if(Le(y,ArrayBuffer)||y&&Le(y.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Le(y,SharedArrayBuffer)||y&&Le(y.buffer,SharedArrayBuffer)))return m(y,v,g);if(typeof y=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const D=y.valueOf&&y.valueOf();if(D!=null&&D!==y)return u.from(D,v,g);const L=_(y);if(L)return L;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof y[Symbol.toPrimitive]=="function")return u.from(y[Symbol.toPrimitive]("string"),v,g);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y)}u.from=function(y,v,g){return f(y,v,g)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function s(y){if(typeof y!="number")throw new TypeError('"size" argument must be of type number');if(y<0)throw new RangeError('The value "'+y+'" is invalid for option "size"')}function n(y,v,g){return s(y),y<=0?p(y):v!==void 0?typeof g=="string"?p(y).fill(v,g):p(y).fill(v):p(y)}u.alloc=function(y,v,g){return n(y,v,g)};function c(y){return s(y),p(y<0?0:w(y)|0)}u.allocUnsafe=function(y){return c(y)},u.allocUnsafeSlow=function(y){return c(y)};function d(y,v){if((typeof v!="string"||v==="")&&(v="utf8"),!u.isEncoding(v))throw new TypeError("Unknown encoding: "+v);const g=C(y,v)|0;let D=p(g);const L=D.write(y,v);return L!==g&&(D=D.slice(0,L)),D}function o(y){const v=y.length<0?0:w(y.length)|0,g=p(v);for(let D=0;D<v;D+=1)g[D]=y[D]&255;return g}function a(y){if(Le(y,Uint8Array)){const v=new Uint8Array(y);return m(v.buffer,v.byteOffset,v.byteLength)}return o(y)}function m(y,v,g){if(v<0||y.byteLength<v)throw new RangeError('"offset" is outside of buffer bounds');if(y.byteLength<v+(g||0))throw new RangeError('"length" is outside of buffer bounds');let D;return v===void 0&&g===void 0?D=new Uint8Array(y):g===void 0?D=new Uint8Array(y,v):D=new Uint8Array(y,v,g),Object.setPrototypeOf(D,u.prototype),D}function _(y){if(u.isBuffer(y)){const v=w(y.length)|0,g=p(v);return g.length===0||y.copy(g,0,0,v),g}if(y.length!==void 0)return typeof y.length!="number"||je(y.length)?p(0):o(y);if(y.type==="Buffer"&&Array.isArray(y.data))return o(y.data)}function w(y){if(y>=t)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t.toString(16)+" bytes");return y|0}function S(y){return+y!=y&&(y=0),u.alloc(+y)}u.isBuffer=function(v){return v!=null&&v._isBuffer===!0&&v!==u.prototype},u.compare=function(v,g){if(Le(v,Uint8Array)&&(v=u.from(v,v.offset,v.byteLength)),Le(g,Uint8Array)&&(g=u.from(g,g.offset,g.byteLength)),!u.isBuffer(v)||!u.isBuffer(g))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(v===g)return 0;let D=v.length,L=g.length;for(let N=0,V=Math.min(D,L);N<V;++N)if(v[N]!==g[N]){D=v[N],L=g[N];break}return D<L?-1:L<D?1:0},u.isEncoding=function(v){switch(String(v).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(v,g){if(!Array.isArray(v))throw new TypeError('"list" argument must be an Array of Buffers');if(v.length===0)return u.alloc(0);let D;if(g===void 0)for(g=0,D=0;D<v.length;++D)g+=v[D].length;const L=u.allocUnsafe(g);let N=0;for(D=0;D<v.length;++D){let V=v[D];if(Le(V,Uint8Array))N+V.length>L.length?(u.isBuffer(V)||(V=u.from(V)),V.copy(L,N)):Uint8Array.prototype.set.call(L,V,N);else if(u.isBuffer(V))V.copy(L,N);else throw new TypeError('"list" argument must be an Array of Buffers');N+=V.length}return L};function C(y,v){if(u.isBuffer(y))return y.length;if(ArrayBuffer.isView(y)||Le(y,ArrayBuffer))return y.byteLength;if(typeof y!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof y);const g=y.length,D=arguments.length>2&&arguments[2]===!0;if(!D&&g===0)return 0;let L=!1;for(;;)switch(v){case"ascii":case"latin1":case"binary":return g;case"utf8":case"utf-8":return De(y).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g*2;case"hex":return g>>>1;case"base64":return it(y).length;default:if(L)return D?-1:De(y).length;v=(""+v).toLowerCase(),L=!0}}u.byteLength=C;function b(y,v,g){let D=!1;if((v===void 0||v<0)&&(v=0),v>this.length||((g===void 0||g>this.length)&&(g=this.length),g<=0)||(g>>>=0,v>>>=0,g<=v))return"";for(y||(y="utf8");;)switch(y){case"hex":return ue(this,v,g);case"utf8":case"utf-8":return k(this,v,g);case"ascii":return ne(this,v,g);case"latin1":case"binary":return oe(this,v,g);case"base64":return G(this,v,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return de(this,v,g);default:if(D)throw new TypeError("Unknown encoding: "+y);y=(y+"").toLowerCase(),D=!0}}u.prototype._isBuffer=!0;function E(y,v,g){const D=y[v];y[v]=y[g],y[g]=D}u.prototype.swap16=function(){const v=this.length;if(v%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let g=0;g<v;g+=2)E(this,g,g+1);return this},u.prototype.swap32=function(){const v=this.length;if(v%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let g=0;g<v;g+=4)E(this,g,g+3),E(this,g+1,g+2);return this},u.prototype.swap64=function(){const v=this.length;if(v%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let g=0;g<v;g+=8)E(this,g,g+7),E(this,g+1,g+6),E(this,g+2,g+5),E(this,g+3,g+4);return this},u.prototype.toString=function(){const v=this.length;return v===0?"":arguments.length===0?k(this,0,v):b.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(v){if(!u.isBuffer(v))throw new TypeError("Argument must be a Buffer");return this===v?!0:u.compare(this,v)===0},u.prototype.inspect=function(){let v="";const g=r.INSPECT_MAX_BYTES;return v=this.toString("hex",0,g).replace(/(.{2})/g,"$1 ").trim(),this.length>g&&(v+=" ... "),"<Buffer "+v+">"},h&&(u.prototype[h]=u.prototype.inspect),u.prototype.compare=function(v,g,D,L,N){if(Le(v,Uint8Array)&&(v=u.from(v,v.offset,v.byteLength)),!u.isBuffer(v))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof v);if(g===void 0&&(g=0),D===void 0&&(D=v?v.length:0),L===void 0&&(L=0),N===void 0&&(N=this.length),g<0||D>v.length||L<0||N>this.length)throw new RangeError("out of range index");if(L>=N&&g>=D)return 0;if(L>=N)return-1;if(g>=D)return 1;if(g>>>=0,D>>>=0,L>>>=0,N>>>=0,this===v)return 0;let V=N-L,ie=D-g;const he=Math.min(V,ie),Ie=this.slice(L,N),Pe=v.slice(g,D);for(let $e=0;$e<he;++$e)if(Ie[$e]!==Pe[$e]){V=Ie[$e],ie=Pe[$e];break}return V<ie?-1:ie<V?1:0};function x(y,v,g,D,L){if(y.length===0)return-1;if(typeof g=="string"?(D=g,g=0):g>2147483647?g=2147483647:g<-2147483648&&(g=-2147483648),g=+g,je(g)&&(g=L?0:y.length-1),g<0&&(g=y.length+g),g>=y.length){if(L)return-1;g=y.length-1}else if(g<0)if(L)g=0;else return-1;if(typeof v=="string"&&(v=u.from(v,D)),u.isBuffer(v))return v.length===0?-1:P(y,v,g,D,L);if(typeof v=="number")return v=v&255,typeof Uint8Array.prototype.indexOf=="function"?L?Uint8Array.prototype.indexOf.call(y,v,g):Uint8Array.prototype.lastIndexOf.call(y,v,g):P(y,[v],g,D,L);throw new TypeError("val must be string, number or Buffer")}function P(y,v,g,D,L){let N=1,V=y.length,ie=v.length;if(D!==void 0&&(D=String(D).toLowerCase(),D==="ucs2"||D==="ucs-2"||D==="utf16le"||D==="utf-16le")){if(y.length<2||v.length<2)return-1;N=2,V/=2,ie/=2,g/=2}function he(Pe,$e){return N===1?Pe[$e]:Pe.readUInt16BE($e*N)}let Ie;if(L){let Pe=-1;for(Ie=g;Ie<V;Ie++)if(he(y,Ie)===he(v,Pe===-1?0:Ie-Pe)){if(Pe===-1&&(Pe=Ie),Ie-Pe+1===ie)return Pe*N}else Pe!==-1&&(Ie-=Ie-Pe),Pe=-1}else for(g+ie>V&&(g=V-ie),Ie=g;Ie>=0;Ie--){let Pe=!0;for(let $e=0;$e<ie;$e++)if(he(y,Ie+$e)!==he(v,$e)){Pe=!1;break}if(Pe)return Ie}return-1}u.prototype.includes=function(v,g,D){return this.indexOf(v,g,D)!==-1},u.prototype.indexOf=function(v,g,D){return x(this,v,g,D,!0)},u.prototype.lastIndexOf=function(v,g,D){return x(this,v,g,D,!1)};function R(y,v,g,D){g=Number(g)||0;const L=y.length-g;D?(D=Number(D),D>L&&(D=L)):D=L;const N=v.length;D>N/2&&(D=N/2);let V;for(V=0;V<D;++V){const ie=parseInt(v.substr(V*2,2),16);if(je(ie))return V;y[g+V]=ie}return V}function F(y,v,g,D){return Qe(De(v,y.length-g),y,g,D)}function O(y,v,g,D){return Qe(et(v),y,g,D)}function T(y,v,g,D){return Qe(it(v),y,g,D)}function j(y,v,g,D){return Qe(Ve(v,y.length-g),y,g,D)}u.prototype.write=function(v,g,D,L){if(g===void 0)L="utf8",D=this.length,g=0;else if(D===void 0&&typeof g=="string")L=g,D=this.length,g=0;else if(isFinite(g))g=g>>>0,isFinite(D)?(D=D>>>0,L===void 0&&(L="utf8")):(L=D,D=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const N=this.length-g;if((D===void 0||D>N)&&(D=N),v.length>0&&(D<0||g<0)||g>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");let V=!1;for(;;)switch(L){case"hex":return R(this,v,g,D);case"utf8":case"utf-8":return F(this,v,g,D);case"ascii":case"latin1":case"binary":return O(this,v,g,D);case"base64":return T(this,v,g,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,v,g,D);default:if(V)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),V=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function G(y,v,g){return v===0&&g===y.length?e.fromByteArray(y):e.fromByteArray(y.slice(v,g))}function k(y,v,g){g=Math.min(y.length,g);const D=[];let L=v;for(;L<g;){const N=y[L];let V=null,ie=N>239?4:N>223?3:N>191?2:1;if(L+ie<=g){let he,Ie,Pe,$e;switch(ie){case 1:N<128&&(V=N);break;case 2:he=y[L+1],(he&192)===128&&($e=(N&31)<<6|he&63,$e>127&&(V=$e));break;case 3:he=y[L+1],Ie=y[L+2],(he&192)===128&&(Ie&192)===128&&($e=(N&15)<<12|(he&63)<<6|Ie&63,$e>2047&&($e<55296||$e>57343)&&(V=$e));break;case 4:he=y[L+1],Ie=y[L+2],Pe=y[L+3],(he&192)===128&&(Ie&192)===128&&(Pe&192)===128&&($e=(N&15)<<18|(he&63)<<12|(Ie&63)<<6|Pe&63,$e>65535&&$e<1114112&&(V=$e))}}V===null?(V=65533,ie=1):V>65535&&(V-=65536,D.push(V>>>10&1023|55296),V=56320|V&1023),D.push(V),L+=ie}return ae(D)}const Z=4096;function ae(y){const v=y.length;if(v<=Z)return String.fromCharCode.apply(String,y);let g="",D=0;for(;D<v;)g+=String.fromCharCode.apply(String,y.slice(D,D+=Z));return g}function ne(y,v,g){let D="";g=Math.min(y.length,g);for(let L=v;L<g;++L)D+=String.fromCharCode(y[L]&127);return D}function oe(y,v,g){let D="";g=Math.min(y.length,g);for(let L=v;L<g;++L)D+=String.fromCharCode(y[L]);return D}function ue(y,v,g){const D=y.length;(!v||v<0)&&(v=0),(!g||g<0||g>D)&&(g=D);let L="";for(let N=v;N<g;++N)L+=rt[y[N]];return L}function de(y,v,g){const D=y.slice(v,g);let L="";for(let N=0;N<D.length-1;N+=2)L+=String.fromCharCode(D[N]+D[N+1]*256);return L}u.prototype.slice=function(v,g){const D=this.length;v=~~v,g=g===void 0?D:~~g,v<0?(v+=D,v<0&&(v=0)):v>D&&(v=D),g<0?(g+=D,g<0&&(g=0)):g>D&&(g=D),g<v&&(g=v);const L=this.subarray(v,g);return Object.setPrototypeOf(L,u.prototype),L};function me(y,v,g){if(y%1!==0||y<0)throw new RangeError("offset is not uint");if(y+v>g)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(v,g,D){v=v>>>0,g=g>>>0,D||me(v,g,this.length);let L=this[v],N=1,V=0;for(;++V<g&&(N*=256);)L+=this[v+V]*N;return L},u.prototype.readUintBE=u.prototype.readUIntBE=function(v,g,D){v=v>>>0,g=g>>>0,D||me(v,g,this.length);let L=this[v+--g],N=1;for(;g>0&&(N*=256);)L+=this[v+--g]*N;return L},u.prototype.readUint8=u.prototype.readUInt8=function(v,g){return v=v>>>0,g||me(v,1,this.length),this[v]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(v,g){return v=v>>>0,g||me(v,2,this.length),this[v]|this[v+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(v,g){return v=v>>>0,g||me(v,2,this.length),this[v]<<8|this[v+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(v,g){return v=v>>>0,g||me(v,4,this.length),(this[v]|this[v+1]<<8|this[v+2]<<16)+this[v+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(v,g){return v=v>>>0,g||me(v,4,this.length),this[v]*16777216+(this[v+1]<<16|this[v+2]<<8|this[v+3])},u.prototype.readBigUInt64LE=q(function(v){v=v>>>0,Ee(v,"offset");const g=this[v],D=this[v+7];(g===void 0||D===void 0)&&we(v,this.length-8);const L=g+this[++v]*2**8+this[++v]*2**16+this[++v]*2**24,N=this[++v]+this[++v]*2**8+this[++v]*2**16+D*2**24;return BigInt(L)+(BigInt(N)<<BigInt(32))}),u.prototype.readBigUInt64BE=q(function(v){v=v>>>0,Ee(v,"offset");const g=this[v],D=this[v+7];(g===void 0||D===void 0)&&we(v,this.length-8);const L=g*2**24+this[++v]*2**16+this[++v]*2**8+this[++v],N=this[++v]*2**24+this[++v]*2**16+this[++v]*2**8+D;return(BigInt(L)<<BigInt(32))+BigInt(N)}),u.prototype.readIntLE=function(v,g,D){v=v>>>0,g=g>>>0,D||me(v,g,this.length);let L=this[v],N=1,V=0;for(;++V<g&&(N*=256);)L+=this[v+V]*N;return N*=128,L>=N&&(L-=Math.pow(2,8*g)),L},u.prototype.readIntBE=function(v,g,D){v=v>>>0,g=g>>>0,D||me(v,g,this.length);let L=g,N=1,V=this[v+--L];for(;L>0&&(N*=256);)V+=this[v+--L]*N;return N*=128,V>=N&&(V-=Math.pow(2,8*g)),V},u.prototype.readInt8=function(v,g){return v=v>>>0,g||me(v,1,this.length),this[v]&128?(255-this[v]+1)*-1:this[v]},u.prototype.readInt16LE=function(v,g){v=v>>>0,g||me(v,2,this.length);const D=this[v]|this[v+1]<<8;return D&32768?D|4294901760:D},u.prototype.readInt16BE=function(v,g){v=v>>>0,g||me(v,2,this.length);const D=this[v+1]|this[v]<<8;return D&32768?D|4294901760:D},u.prototype.readInt32LE=function(v,g){return v=v>>>0,g||me(v,4,this.length),this[v]|this[v+1]<<8|this[v+2]<<16|this[v+3]<<24},u.prototype.readInt32BE=function(v,g){return v=v>>>0,g||me(v,4,this.length),this[v]<<24|this[v+1]<<16|this[v+2]<<8|this[v+3]},u.prototype.readBigInt64LE=q(function(v){v=v>>>0,Ee(v,"offset");const g=this[v],D=this[v+7];(g===void 0||D===void 0)&&we(v,this.length-8);const L=this[v+4]+this[v+5]*2**8+this[v+6]*2**16+(D<<24);return(BigInt(L)<<BigInt(32))+BigInt(g+this[++v]*2**8+this[++v]*2**16+this[++v]*2**24)}),u.prototype.readBigInt64BE=q(function(v){v=v>>>0,Ee(v,"offset");const g=this[v],D=this[v+7];(g===void 0||D===void 0)&&we(v,this.length-8);const L=(g<<24)+this[++v]*2**16+this[++v]*2**8+this[++v];return(BigInt(L)<<BigInt(32))+BigInt(this[++v]*2**24+this[++v]*2**16+this[++v]*2**8+D)}),u.prototype.readFloatLE=function(v,g){return v=v>>>0,g||me(v,4,this.length),i.read(this,v,!0,23,4)},u.prototype.readFloatBE=function(v,g){return v=v>>>0,g||me(v,4,this.length),i.read(this,v,!1,23,4)},u.prototype.readDoubleLE=function(v,g){return v=v>>>0,g||me(v,8,this.length),i.read(this,v,!0,52,8)},u.prototype.readDoubleBE=function(v,g){return v=v>>>0,g||me(v,8,this.length),i.read(this,v,!1,52,8)};function ee(y,v,g,D,L,N){if(!u.isBuffer(y))throw new TypeError('"buffer" argument must be a Buffer instance');if(v>L||v<N)throw new RangeError('"value" argument is out of bounds');if(g+D>y.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(v,g,D,L){if(v=+v,g=g>>>0,D=D>>>0,!L){const ie=Math.pow(2,8*D)-1;ee(this,v,g,D,ie,0)}let N=1,V=0;for(this[g]=v&255;++V<D&&(N*=256);)this[g+V]=v/N&255;return g+D},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(v,g,D,L){if(v=+v,g=g>>>0,D=D>>>0,!L){const ie=Math.pow(2,8*D)-1;ee(this,v,g,D,ie,0)}let N=D-1,V=1;for(this[g+N]=v&255;--N>=0&&(V*=256);)this[g+N]=v/V&255;return g+D},u.prototype.writeUint8=u.prototype.writeUInt8=function(v,g,D){return v=+v,g=g>>>0,D||ee(this,v,g,1,255,0),this[g]=v&255,g+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(v,g,D){return v=+v,g=g>>>0,D||ee(this,v,g,2,65535,0),this[g]=v&255,this[g+1]=v>>>8,g+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(v,g,D){return v=+v,g=g>>>0,D||ee(this,v,g,2,65535,0),this[g]=v>>>8,this[g+1]=v&255,g+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(v,g,D){return v=+v,g=g>>>0,D||ee(this,v,g,4,4294967295,0),this[g+3]=v>>>24,this[g+2]=v>>>16,this[g+1]=v>>>8,this[g]=v&255,g+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(v,g,D){return v=+v,g=g>>>0,D||ee(this,v,g,4,4294967295,0),this[g]=v>>>24,this[g+1]=v>>>16,this[g+2]=v>>>8,this[g+3]=v&255,g+4};function _e(y,v,g,D,L){ge(v,D,L,y,g,7);let N=Number(v&BigInt(4294967295));y[g++]=N,N=N>>8,y[g++]=N,N=N>>8,y[g++]=N,N=N>>8,y[g++]=N;let V=Number(v>>BigInt(32)&BigInt(4294967295));return y[g++]=V,V=V>>8,y[g++]=V,V=V>>8,y[g++]=V,V=V>>8,y[g++]=V,g}function Fe(y,v,g,D,L){ge(v,D,L,y,g,7);let N=Number(v&BigInt(4294967295));y[g+7]=N,N=N>>8,y[g+6]=N,N=N>>8,y[g+5]=N,N=N>>8,y[g+4]=N;let V=Number(v>>BigInt(32)&BigInt(4294967295));return y[g+3]=V,V=V>>8,y[g+2]=V,V=V>>8,y[g+1]=V,V=V>>8,y[g]=V,g+8}u.prototype.writeBigUInt64LE=q(function(v,g=0){return _e(this,v,g,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=q(function(v,g=0){return Fe(this,v,g,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(v,g,D,L){if(v=+v,g=g>>>0,!L){const he=Math.pow(2,8*D-1);ee(this,v,g,D,he-1,-he)}let N=0,V=1,ie=0;for(this[g]=v&255;++N<D&&(V*=256);)v<0&&ie===0&&this[g+N-1]!==0&&(ie=1),this[g+N]=(v/V>>0)-ie&255;return g+D},u.prototype.writeIntBE=function(v,g,D,L){if(v=+v,g=g>>>0,!L){const he=Math.pow(2,8*D-1);ee(this,v,g,D,he-1,-he)}let N=D-1,V=1,ie=0;for(this[g+N]=v&255;--N>=0&&(V*=256);)v<0&&ie===0&&this[g+N+1]!==0&&(ie=1),this[g+N]=(v/V>>0)-ie&255;return g+D},u.prototype.writeInt8=function(v,g,D){return v=+v,g=g>>>0,D||ee(this,v,g,1,127,-128),v<0&&(v=255+v+1),this[g]=v&255,g+1},u.prototype.writeInt16LE=function(v,g,D){return v=+v,g=g>>>0,D||ee(this,v,g,2,32767,-32768),this[g]=v&255,this[g+1]=v>>>8,g+2},u.prototype.writeInt16BE=function(v,g,D){return v=+v,g=g>>>0,D||ee(this,v,g,2,32767,-32768),this[g]=v>>>8,this[g+1]=v&255,g+2},u.prototype.writeInt32LE=function(v,g,D){return v=+v,g=g>>>0,D||ee(this,v,g,4,2147483647,-2147483648),this[g]=v&255,this[g+1]=v>>>8,this[g+2]=v>>>16,this[g+3]=v>>>24,g+4},u.prototype.writeInt32BE=function(v,g,D){return v=+v,g=g>>>0,D||ee(this,v,g,4,2147483647,-2147483648),v<0&&(v=4294967295+v+1),this[g]=v>>>24,this[g+1]=v>>>16,this[g+2]=v>>>8,this[g+3]=v&255,g+4},u.prototype.writeBigInt64LE=q(function(v,g=0){return _e(this,v,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=q(function(v,g=0){return Fe(this,v,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function te(y,v,g,D,L,N){if(g+D>y.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("Index out of range")}function M(y,v,g,D,L){return v=+v,g=g>>>0,L||te(y,v,g,4),i.write(y,v,g,D,23,4),g+4}u.prototype.writeFloatLE=function(v,g,D){return M(this,v,g,!0,D)},u.prototype.writeFloatBE=function(v,g,D){return M(this,v,g,!1,D)};function $(y,v,g,D,L){return v=+v,g=g>>>0,L||te(y,v,g,8),i.write(y,v,g,D,52,8),g+8}u.prototype.writeDoubleLE=function(v,g,D){return $(this,v,g,!0,D)},u.prototype.writeDoubleBE=function(v,g,D){return $(this,v,g,!1,D)},u.prototype.copy=function(v,g,D,L){if(!u.isBuffer(v))throw new TypeError("argument should be a Buffer");if(D||(D=0),!L&&L!==0&&(L=this.length),g>=v.length&&(g=v.length),g||(g=0),L>0&&L<D&&(L=D),L===D||v.length===0||this.length===0)return 0;if(g<0)throw new RangeError("targetStart out of bounds");if(D<0||D>=this.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),v.length-g<L-D&&(L=v.length-g+D);const N=L-D;return this===v&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(g,D,L):Uint8Array.prototype.set.call(v,this.subarray(D,L),g),N},u.prototype.fill=function(v,g,D,L){if(typeof v=="string"){if(typeof g=="string"?(L=g,g=0,D=this.length):typeof D=="string"&&(L=D,D=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!u.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(v.length===1){const V=v.charCodeAt(0);(L==="utf8"&&V<128||L==="latin1")&&(v=V)}}else typeof v=="number"?v=v&255:typeof v=="boolean"&&(v=Number(v));if(g<0||this.length<g||this.length<D)throw new RangeError("Out of range index");if(D<=g)return this;g=g>>>0,D=D===void 0?this.length:D>>>0,v||(v=0);let N;if(typeof v=="number")for(N=g;N<D;++N)this[N]=v;else{const V=u.isBuffer(v)?v:u.from(v,L),ie=V.length;if(ie===0)throw new TypeError('The value "'+v+'" is invalid for argument "value"');for(N=0;N<D-g;++N)this[N+g]=V[N%ie]}return this};const W={};function re(y,v,g){W[y]=class extends g{constructor(){super(),Object.defineProperty(this,"message",{value:v.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${y}]`,this.stack,delete this.name}get code(){return y}set code(L){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:L,writable:!0})}toString(){return`${this.name} [${y}]: ${this.message}`}}}re("ERR_BUFFER_OUT_OF_BOUNDS",function(y){return y?`${y} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),re("ERR_INVALID_ARG_TYPE",function(y,v){return`The "${y}" argument must be of type number. Received type ${typeof v}`},TypeError),re("ERR_OUT_OF_RANGE",function(y,v,g){let D=`The value of "${y}" is out of range.`,L=g;return Number.isInteger(g)&&Math.abs(g)>2**32?L=Q(String(g)):typeof g=="bigint"&&(L=String(g),(g>BigInt(2)**BigInt(32)||g<-(BigInt(2)**BigInt(32)))&&(L=Q(L)),L+="n"),D+=` It must be ${v}. Received ${L}`,D},RangeError);function Q(y){let v="",g=y.length;const D=y[0]==="-"?1:0;for(;g>=D+4;g-=3)v=`_${y.slice(g-3,g)}${v}`;return`${y.slice(0,g)}${v}`}function X(y,v,g){Ee(v,"offset"),(y[v]===void 0||y[v+g]===void 0)&&we(v,y.length-(g+1))}function ge(y,v,g,D,L,N){if(y>g||y<v){const V=typeof v=="bigint"?"n":"";let ie;throw v===0||v===BigInt(0)?ie=`>= 0${V} and < 2${V} ** ${(N+1)*8}${V}`:ie=`>= -(2${V} ** ${(N+1)*8-1}${V}) and < 2 ** ${(N+1)*8-1}${V}`,new W.ERR_OUT_OF_RANGE("value",ie,y)}X(D,L,N)}function Ee(y,v){if(typeof y!="number")throw new W.ERR_INVALID_ARG_TYPE(v,"number",y)}function we(y,v,g){throw Math.floor(y)!==y?(Ee(y,g),new W.ERR_OUT_OF_RANGE("offset","an integer",y)):v<0?new W.ERR_BUFFER_OUT_OF_BOUNDS:new W.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${v}`,y)}const Be=/[^+/0-9A-Za-z-_]/g;function xe(y){if(y=y.split("=")[0],y=y.trim().replace(Be,""),y.length<2)return"";for(;y.length%4!==0;)y=y+"=";return y}function De(y,v){v=v||1/0;let g;const D=y.length;let L=null;const N=[];for(let V=0;V<D;++V){if(g=y.charCodeAt(V),g>55295&&g<57344){if(!L){if(g>56319){(v-=3)>-1&&N.push(239,191,189);continue}else if(V+1===D){(v-=3)>-1&&N.push(239,191,189);continue}L=g;continue}if(g<56320){(v-=3)>-1&&N.push(239,191,189),L=g;continue}g=(L-55296<<10|g-56320)+65536}else L&&(v-=3)>-1&&N.push(239,191,189);if(L=null,g<128){if((v-=1)<0)break;N.push(g)}else if(g<2048){if((v-=2)<0)break;N.push(g>>6|192,g&63|128)}else if(g<65536){if((v-=3)<0)break;N.push(g>>12|224,g>>6&63|128,g&63|128)}else if(g<1114112){if((v-=4)<0)break;N.push(g>>18|240,g>>12&63|128,g>>6&63|128,g&63|128)}else throw new Error("Invalid code point")}return N}function et(y){const v=[];for(let g=0;g<y.length;++g)v.push(y.charCodeAt(g)&255);return v}function Ve(y,v){let g,D,L;const N=[];for(let V=0;V<y.length&&!((v-=2)<0);++V)g=y.charCodeAt(V),D=g>>8,L=g%256,N.push(L),N.push(D);return N}function it(y){return e.toByteArray(xe(y))}function Qe(y,v,g,D){let L;for(L=0;L<D&&!(L+g>=v.length||L>=y.length);++L)v[L+g]=y[L];return L}function Le(y,v){return y instanceof v||y!=null&&y.constructor!=null&&y.constructor.name!=null&&y.constructor.name===v.name}function je(y){return y!==y}const rt=(function(){const y="0123456789abcdef",v=new Array(256);for(let g=0;g<16;++g){const D=g*16;for(let L=0;L<16;++L)v[D+L]=y[g]+y[L]}return v})();function q(y){return typeof BigInt>"u"?Y:y}function Y(){throw new Error("BigInt not supported")}})(Ya)),Ya}var dp=fp();globalThis.Buffer=dp.Buffer;"serviceWorker"in navigator&&navigator.serviceWorker.register("sw.js");od(up,{target:document.getElementById("app")});</script>
    <style rel="stylesheet" crossorigin>:root{font-family:system-ui,Avenir,Helvetica,Arial,sans-serif;line-height:1.5;font-weight:400;color-scheme:light dark;color:#ffffffde;background-color:#242424;font-synthesis:none;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}a{font-weight:500;color:#646cff;text-decoration:inherit}a:hover{color:#535bf2}body{margin:0;padding:0;display:flex;justify-content:center;align-items:flex-start;min-height:100vh;width:100%;max-width:100vw;overflow-x:hidden;box-sizing:border-box}h2{margin:0}button{padding:.5rem 1rem;border:1px solid #ccc;border-radius:4px;background:#fff;cursor:pointer;font-size:1rem;color:#000}button:hover{background:#f0f0f0}#app{width:100%;max-width:100%;overflow-x:hidden}.radioBoxes{margin-top:.25em;display:flex;justify-content:center;gap:1rem;width:100%;max-width:100%;box-sizing:border-box}.radioBox{border:1px solid gray;padding:.25em;margin-top:.5em;display:flex;align-items:center;justify-content:space-around;flex-wrap:wrap;text-wrap:nowrap;width:calc(50% - .5rem - 2px);max-width:calc(50% - .5rem - 2px);box-sizing:border-box}.radioBoxItem{display:flex;align-items:center;text-wrap:nowrap;color:#fff}.radioBoxItem input{margin:.25em .25em .25em .75em;cursor:pointer}.radioBoxItem label{cursor:pointer}.radioChosen{font-weight:700;color:#f44}.statBoxButton{cursor:pointer;border:1px solid gray;padding:.25em;display:inline-block;white-space:nowrap;border-radius:4px}.mainContainer{width:100%;max-width:1200px;margin:0 auto;display:flex;justify-content:center;align-items:flex-start;min-height:100vh;box-sizing:border-box;padding:0;overflow-x:hidden}.gauges{display:flex;justify-content:space-between;align-items:center;width:75vw}.gaugeRow{display:flex;justify-content:space-between;align-items:center;box-sizing:border-box}.statusText{margin-top:.5em;font-weight:700;font-size:1.2em;text-align:center;color:#f44}.settingsDialog{border:1px solid #eee;border-radius:8px;background-color:#333;max-width:1000px;position:absolute;top:10%;width:80%;margin:auto;padding:1em;vertical-align:top}.statBoxes{margin-top:.1em;display:flex;justify-content:space-evenly;width:100%}#auto_edging_duration_minutes{accent-color:red;background:linear-gradient(to right,red 0% 100%)}.settingSliders{margin-top:2em;width:100%;max-width:80vw;display:flex;flex-direction:column;gap:.5em;justify-content:center;box-sizing:border-box}.settingSliders #max_denied{accent-color:red;background:linear-gradient(to right,red 0% 100%)}.topButton{cursor:pointer;margin:.2%;padding-bottom:0;border-radius:5px}.circular-progress{display:flex;flex-direction:column;align-items:center;justify-content:center;max-width:280px}.circular-progress svg{width:20vw;height:20vw;max-width:240px;max-height:240px}.belowCircleButton{border-radius:8px;height:1.75rem;line-height:.75rem;color:#000;cursor:pointer;margin-top:.75rem;width:10em}.gaugesWrapper{display:flex;justify-content:center;align-items:center;width:100%;flex-direction:column;margin:0 auto}@media screen and (max-width:700px){.gaugesWrapper{width:100%}.belowCircleButton{width:2em}.radioBox{display:flex;margin-bottom:.3em;padding:0;max-width:100%;font-size:.8em}.statBoxButton{font-size:.5em}.gauges{flex-direction:column;gap:1.5rem}.gaugeRow{width:90vw;max-width:100%;gap:0;box-sizing:border-box;justify-content:space-evenly}.circular-progress{max-width:40vw;margin:0 1em}.circular-progress svg{width:30vw;height:30vw}.belowCircleButton{width:10em}}@media screen and (max-width:1000px){.radioBoxes{flex-direction:column;align-items:center}.radioBox{width:75vw;max-width:75vw}}@media screen and (max-width:1500px){.gaugeRow{justify-content:space-around}.gauges{justify-content:center}}@media screen and (max-width:460px){.radioBox{font-size:.6em}.circular-progress{max-width:30vw}}@keyframes flashRedPink{0%,to{stroke:red}50%{stroke:#f66}}@keyframes flashRedPinkText{0%,to{fill:red;color:red}50%{fill:#f66;color:#f66}}@keyframes flashOrangeYellow{0%,to{stroke:orange}50%{stroke:#ff0}}@keyframes flashOrangeYellowText{0%,to{fill:orange}50%{fill:#ff0}}@keyframes flashPinkWhite{0%,to{stroke:#ff7fff}50%{stroke:#ffb3ff}}@keyframes flashPinkWhiteText{0%,to{fill:#ff7fff}50%{fill:#ffb3ff}}.cooldown-flash-stroke{animation:flashRedPink .5s infinite}.cooldown-flash-text{animation:flashRedPinkText .5s infinite}.cooldown-flash-stroke-orange{animation:flashOrangeYellow .5s infinite}.cooldown-flash-text-orange{animation:flashOrangeYellowText .5s infinite}.cooldown-flash-stroke-pink{animation:flashPinkWhite .5s infinite}.cooldown-flash-text-pink{animation:flashPinkWhiteText .5s infinite}input[type=range][readonly]{-webkit-appearance:none;appearance:none}input[type=range][readonly]::-webkit-slider-track{width:50px;height:100%;background:linear-gradient(to bottom,orange 0% 100%);border-radius:25px;border:2px solid #ff8800}input[type=range][readonly]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:50px;height:20px;background:#fff;border:3px solid orange;border-radius:10px;cursor:default}input[type=range][readonly]::-moz-range-track{width:50px;height:100%;background:linear-gradient(to bottom,orange 0% 100%);border-radius:25px;border:2px solid #ff8800}input[type=range][readonly]::-moz-range-thumb{width:50px;height:20px;background:#fff;border:3px solid orange;border-radius:10px;cursor:default}.buttplug-connector{display:flex;flex-direction:column;gap:1rem;padding:1rem}.buttplug-connector ul{list-style:none;padding:0;margin:0;border-top:1px solid #eee}.buttplug-connector li{padding:.5rem;border-bottom:1px solid #eee}.buttplug-connector .device-sliders{display:flex;flex-direction:column;gap:.5rem}.buttplug-connector .device-sliders input::-webkit-outer-spin-button,.buttplug-connector .device-sliders input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.buttplug-connector .device-sliders .slider{width:100%;height:6px;position:relative;background:#444;border-radius:5px}.buttplug-connector .device-sliders .slider .range-slider{height:100%;left:0%;right:0%;position:absolute;border-radius:5px;background:#99c8ff}.buttplug-connector .device-sliders .range-input{position:relative}.buttplug-connector .device-sliders .range-input input{position:absolute;width:100%;height:5px;background:none;top:-15px;pointer-events:none;cursor:pointer;-webkit-appearance:none}.buttplug-connector .device-sliders input[type=range]::-webkit-slider-thumb{height:18px;width:40px;border-radius:4px;background:#555;pointer-events:auto;-webkit-appearance:none;position:relative}.buttplug-connector .device-sliders input[type=range]::-moz-range-thumb{height:18px;width:40px;border-radius:4px;background:#555;pointer-events:auto;border:none}.buttplug-connector .device-sliders input[type=range].min-range::-webkit-slider-thumb{background:#555 url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="40" height="18"><text x="50%" y="13" font-family="Arial" font-size="10" fill="white" text-anchor="middle">min</text></svg>') center/contain no-repeat}.buttplug-connector .device-sliders input[type=range].min-range::-moz-range-thumb{background:#555 url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="40" height="18"><text x="50%" y="13" font-family="Arial" font-size="10" fill="white" text-anchor="middle">min</text></svg>') center/contain no-repeat}.buttplug-connector .device-sliders input[type=range].max-range::-webkit-slider-thumb{background:#555 url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="40" height="18"><text x="50%" y="13" font-family="Arial" font-size="10" fill="white" text-anchor="middle">max</text></svg>') center/contain no-repeat}.buttplug-connector .device-sliders input[type=range].max-range::-moz-range-thumb{background:#555 url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="40" height="18"><text x="50%" y="13" font-family="Arial" font-size="10" fill="white" text-anchor="middle">max</text></svg>') center/contain no-repeat}.bluetooth-led-control.svelte-1oqb8um{align-items:center;gap:1rem;padding:1rem;border-top:1px solid #ccc}.bluetooth-led-control.svelte-1oqb8um .bluetooth-led-status:where(.svelte-1oqb8um){color:#666}</style>
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
